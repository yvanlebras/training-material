<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Extracting Workflows from Histories</title>
        
            <script async defer data-domain="training.galaxyproject.org" src="https://plausible.galaxyproject.eu/js/plausible.js"></script>

        
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap.min.css?v=3">
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap-toc.min.css">
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=2">
        <script src="https://kit.fontawesome.com/67b3f98409.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="/training-material/assets/css/academicons.css">
        <link rel="stylesheet" href="/training-material/assets/css/syntax_highlighting.css">
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon" />
        <link rel="alternate" type="application/atom+xml" href="/training-material/feed.xml" />

        
        
        
        
        
        <meta name="description" content="A collection of microtutorials explaining various feature..." />
        <meta property="og:title" content="Galaxy Training: Extracting Workflows from Histories" />
        <meta property="og:description" content="A collection of microtutorials explaining various feature..." />
        <meta property="og:image" content="/training-material/assets/images/GTNLogo1000.png" />
    </head>
    <body data-spy="scroll" data-target="#toc">
        <header>
    <nav class="navbar navbar-expand-md navbar-dark" aria-label="Site Navigation">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                Galaxy Training!
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        
                        <a class="nav-link" href="/training-material/topics/galaxy-interface" title="Go back to list of tutorials">
                            <i class="far fa-folder" aria-hidden="true"></i> Using Galaxy and Managing your Data
                        </a>
                        
                    </li>

                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Languages">
                            <i class="fas fa-language" aria-hidden="true"></i><span class="visually-hidden">language</span> Languages
                        </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            
                              <strong class="dropdown-header">Automatic Translations</strong>
            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=fr&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html&edit-text=&act=url">
                            Français
                            </a>
                            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ja&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html&edit-text=&act=url">
                            日本語
                            </a>
                            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=es&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html&edit-text=&act=url">
                            Español
                            </a>
                            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=pt&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html&edit-text=&act=url">
                            Português
                            </a>
                            
            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ar&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html&edit-text=&act=url">
                            العربية
                            </a>
                            
                            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=&u=https%3A%2F%2Ftraining.galaxyproject.org/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html&edit-text=&act=url" title="">
                            And more!
                            </a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu dropdown-menu-right">
        <!-- disable Tess for now
        <form method="get" action="https://tess.elixir-europe.org/materials">
            <input type="text" id="search" name="q" value="" style="margin-left: 0.5em;/*! border-radius: 0px; */">
            <input type="hidden" value="Galaxy Training" name="content_provider">
            <input type="submit" value="Search on TeSS" style="width: 92%;border-radius: 0px;margin: 0.5em;background: #f47d20;border: 0px;padding: 0.25em;" class="">
        </form>
        -->

        <a class="dropdown-item" href="/training-material/faq" title="Check our FAQs">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> FAQs
        </a>
        
        <a class="dropdown-item" href="/training-material/topics/galaxy-interface/faqs/" title="Check our FAQs for the Using Galaxy and Managing your Data topic">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Topic FAQs
        </a>
        
        <a class="dropdown-item" href="https://help.galaxyproject.org/" title="Discuss on Galaxy Help">
            <i class="far fa-comments" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Galaxy Help Forum
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Discuss on gitter">
           <i class="fab fa-gitter" aria-hidden="true"></i><span class="visually-hidden">gitter</span> Discuss on Gitter
        </a>
    </div>
</li>


                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Extras">
        <i class="far fa-star" aria-hidden="true"></i><span class="visually-hidden">galaxy-star</span> Extras
    </a>
    <div class="dropdown-menu dropdown-menu-right">

        
        <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/edit/main/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.md" title="Edit on GitHub">
          <i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
        </a>

        <a class="dropdown-item" href="/training-material/stats.html" title="Show view statistics about this repository">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN statistics
        </a>

        <a class="dropdown-item" href="https://plausible.galaxyproject.eu/training.galaxyproject.org?period=12mo&page=/training-material/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html" title="Show view statistics of this page">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> Page Metrics
        </a>

        
            <a class="dropdown-item" href="/training-material/feedback.html" title="Show feedback statistics about this repository">
                <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN feedback
            </a>
        

        <div class="dropdown-item">
            <div>
                <i class="fas fa-palette" aria-hidden="true"></i><span class="visually-hidden">gtn-theme</span> Theme
            </div>

            <div id="theme-selector" data-toggle="buttons">
                <label data-value="default" class="btn btn-secondary">
                    <input type="radio" name="options" id="default" autocomplete="off"> Default
                </label>
                <label data-value="night" class="btn btn-secondary">
                    <input type="radio" name="options" id="night" autocomplete="off"> Night
                </label>
                <label data-value="midnight" class="btn btn-secondary">
                    <input type="radio" name="options" id="midnight" autocomplete="off"> Midnight
                </label>
                <label data-value="rainbow" class="btn btn-secondary">
                    <input type="radio" name="options" id="rainbow" autocomplete="off"> Rainbow
                </label>
                <label data-value="progress" class="btn btn-secondary">
                    <input type="radio" name="options" id="progress" autocomplete="off">🏳️‍🌈
                </label>
                <label data-value="halloween" class="btn btn-secondary">
                    <input type="radio" name="options" id="halloween" autocomplete="off"> 🎃
                </label>
                <label data-value="straya" class="btn btn-secondary">
                    <input type="radio" name="options" id="downunder" autocomplete="off"> 🇦🇺
                </label>
            </div>

        </div>

        <div class="dropdown-item">
            <div>
                <i class="fas fa-history" aria-hidden="true"></i><span class="visually-hidden">galaxy-rulebuilder-history</span> Previous Versions
            </div>

            
            <div id="archive-selector">
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/" title="Older Versions">Older Versions</a>
            </div>

        </div>

    </div>
</li>


                    <!-- Search bar-->
                    <li class="nav-item">
                      <div id="navbarSupportedContent" role="search">
                        <!-- Search form -->
                        <form class="form-inline mr-auto" method="GET" action="/training-material/search">
                          <i class="fas fa-search nav-link" aria-hidden="true"></i>
                          <div class="md-form mb-2">
                            <input name="query" class="form-control nicer" type="text" placeholder="Search Tutorials" aria-label="Search">
                          </div>
                        </form>
                      </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

        <div class="container main-content" role="main">
        











<!-- Gitter -->




<script>
  ((window.gitter = {}).chat = {}).options = {
  room: 'Galaxy-Training-Network/Lobby'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

<script type="application/ld+json">
    


{
  "@context": "http://schema.org",
  "@type": "Course",
  "accessMode": [
    "textual",
    "visual"
  ],
  "accessModeSufficient": [
    "textual",
    "visual"
  ],
  "accessibilityControl": [
    "fullKeyboardControl",
    "fullMouseControl"
  ],
  "accessibilityFeature": [
    "alternativeText",
    "tableOfContents"
  ],
  "accessibilitySummary": "Short descriptions are present but long descriptions will be needed for non-visual users",
  "audience": {
    "@type": "EducationalAudience",
    "educationalRole": "students"
  },
  "citation": {
    "@type": "CreativeWork",
    "name": "Community-Driven Data Analysis Training for Biology",
    "url": "https://doi.org/10.1016/j.cels.2018.05.012"
  },
  "copyrightHolder": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "dateModified": "1970-01-01 00:00:26 +0000",
  "discussionUrl": "https://gitter.im/Galaxy-Training-Network/Lobby",
  "headline": "Extracting Workflows from Histories",
  "interactivityType": "mixed",
  "isAccessibleForFree": true,
  "isFamilyFriendly": true,
  "license": "https://spdx.org/licenses/CC-BY-4.0.html",
  "producer": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "provider": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "sourceOrganization": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "isPartOf": {
    "@type": "CreativeWork",
    "name": "Using Galaxy and Managing your Data",
    "description": "A collection of microtutorials explaining various features of the Galaxy user interface and manipulating data within Galaxy.",
    "url": "https://training.galaxyproject.org//training-material/topics/galaxy-interface/"
  },
  "courseCode": "galaxy-interface / history-to-workflow / hands-on",
  "learningResourceType": "hands-on tutorial",
  "name": "Hands-on for 'Extracting Workflows from Histories' tutorial",
  "url": "https://training.galaxyproject.org//training-material/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html",
  "timeRequired": "PT30M",
  "keywords": "workflows",
  "description": "The questions this  addresses are:\n - What is a workflow?\n - How can I create a workflow based on my analysis history?\n\n\\nThe objectives are:\n - Learn how to extract a workflow from a Galaxy history\n - Learn how to change a workflow using the workflow editor\n\n",
  "inLanguage": {
    "@type": "Language",
    "name": "English",
    "alternateName": "en"
  },
  "hasPart": [

  ],
  "author": [
    {
      "@type": "Person",
      "name": "Dave Clements"
    }
  ],
  "contributor": [
    {
      "@type": "Person",
      "name": "Dave Clements"
    }
  ],
  "about": [
    {
      "@type": "CreativeWork",
      "name": "Using Galaxy and Managing your Data",
      "description": "A collection of microtutorials explaining various features of the Galaxy user interface and manipulating data within Galaxy.",
      "url": "https://training.galaxyproject.org//training-material/topics/galaxy-interface/"
    }
  ]
}
</script>

<section class="tutorial topic-galaxy-interface">
    <h1 data-toc-skip>Extracting Workflows from Histories</h1>
    


    <div class="contributors-line">Authors: 
<a href="/training-material/hall-of-fame/tnabtaf/" class="contributor-badge contributor-tnabtaf"><img src="https://avatars.githubusercontent.com/tnabtaf?s=27" alt="Avatar">Dave Clements</a>


<a href="https://training.galaxyproject.org/training-material/topics/contributing/" class="contributor-badge contributor-newcontributors"><i class="fas fa-users" aria-hidden="true"></i><span class="visually-hidden">hall-of-fame</span>Add Contributions!</a>

</div>


    <blockquote class="overview">
        <h3>Overview</h3>
        
        <img alt="Creative Commons License" class="float-right" style="border-width:0; display: inline-block; margin:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" aria-hidden="true" />
        
        <strong><i class="far fa-question-circle" aria-hidden="true"></i> Questions:</strong>
        <ul>
        
        <li><p>What is a workflow?</p>
</li>
        
        <li><p>How can I create a workflow based on my analysis history?</p>
</li>
        
        </ul>

        <strong><i class="fas fa-bullseye" aria-hidden="true"></i> Objectives: </strong>
        <ul>
        
        <li><p>Learn how to extract a workflow from a Galaxy history</p>
</li>
        
        <li><p>Learn how to change a workflow using the workflow editor</p>
</li>
        
        </ul>

        

        
        <div><strong><i class="fas fa-hourglass-half" aria-hidden="true"></i> Time estimation:</strong> 30 minutes</div>
        

        

        
        

        

        <div><strong><i class="far fa-calendar" aria-hidden="true"></i> Last modification:</strong> Oct 26, 2021 </div>
        <div><strong><i class="fas fa-balance-scale" aria-hidden="true"></i> License:</strong>
            
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Tutorial Content is licensed under Creative Commons Attribution 4.0 International License</a>
            
            <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">The GTN Framework is licensed under MIT</a>
        </div>
    </blockquote>

    <div class="container">
        <div class="row">
            <!-- sidebar, which will move to the top on a small screen -->
            <div class="col-sm-2">
                <nav id="toc" data-toggle="toc" class="sticky-top" aria-label="Table of Contents"></nav>
            </div>
            <div class="col-sm-10">
                 

                <h1 class="no_toc" id="create-a-reusable-workflow-from-a-history">Create a reusable <span class="notranslate">workflow</span> from a history</h1>

<p>This practical shows how to create a reusable analysis pipeline, called a <em><span class="notranslate">workflow</span></em> in <span class="notranslate">Galaxy</span>, from an analysis that you have already run in <span class="notranslate">Galaxy</span>, called a <em>history</em>.</p>

<blockquote class="comment">
  <h3 id="comment-audience"><i class="far fa-comment-dots" aria-hidden="true"></i><span class="visually-hidden">comment</span> Audience</h3>
  <p>This tutorial is intended for those who are new to <span class="notranslate">Galaxy</span>.</p>
</blockquote>

<blockquote class="agenda">
  <h3 id="agenda">Agenda</h3>

  <p>In this tutorial, we will cover:</p>

<ol id="markdown-toc">
  <li><a href="#pretreatments" id="markdown-toc-pretreatments">Pretreatments</a>    <ol>
      <li><a href="#motivation" id="markdown-toc-motivation">Motivation</a></li>
      <li><a href="#set-your-current-history" id="markdown-toc-set-your-current-history">Set your current history</a></li>
      <li><a href="#extract-the-recipe-from-your-history" id="markdown-toc-extract-the-recipe-from-your-history">Extract the recipe from your history</a></li>
      <li><a href="#final-thoughts" id="markdown-toc-final-thoughts">Final thoughts</a></li>
    </ol>
  </li>
</ol>

</blockquote>

<h1 id="pretreatments">Pretreatments</h1>

<blockquote class="comment">
  <h3 id="requirements-requirements"><i class="fas fa-check-circle" aria-hidden="true"></i><span class="visually-hidden">requirements</span> Requirements</h3>

  <p>To run this practical you will need</p>

  <ol>
    <li>Previous experience running at least one analysis in <span class="notranslate">Galaxy</span>.</li>
    <li>An internet-connected computer.  <span class="notranslate">Galaxy</span> can run on your laptop without an internet connection, but this practical requires access to resources on the web.</li>
    <li>A web browser. <a href="https://www.mozilla.org/firefox">Firefox</a> and <a href="https://www.google.com/chrome/">Google Chrome</a> work well, as does <a href="https://www.apple.com/safari/">Safari</a>.  Internet Explorer is known to have issues with <span class="notranslate">Galaxy</span> so avoid using that.</li>
    <li>Access to a <span class="notranslate">Galaxy</span> instance, and an account on that instance. <span class="notranslate">Galaxy</span> is available in many ways. If you are doing this practical as part of a workshop, the instructor will tell you which instance to use. If you are doing this on your own, you can use <a href="https://usegalaxy.org">use<span class="notranslate">galaxy</span>.org</a>.</li>
    <li>A <span class="notranslate">Galaxy</span> <em>history</em> from an analysis that you have already run.  If you don’t have one handy, you can use <a href="https://usegalaxy.org/u/tnabtaf/h/overlapping-genes-on-opposite-strands">this history</a>. on use<span class="notranslate">galaxy</span>.org.  Click <strong>Import History</strong> (top right) to bring that history into your workspace on use<span class="notranslate">galaxy</span>.org. Any history will work with this tutorial, but that’s the one used in the examples.</li>
  </ol>
</blockquote>

<p>This tutorial is a good second step after running your first analysis on <span class="notranslate">Galaxy</span>.</p>

<h2 id="motivation">Motivation</h2>

<p><span class="notranslate">Galaxy</span> excels at helping researchers figure out how to do analyses.  It’s easy to try different tools and settings, and if your first result isn’t quite what you want, you can just keep trying until you get what you want.  What you may end up with is a slightly (or very) messy analysis <em>history</em> under your account.  If this is the only time you’ll run that particular analysis then it’s fine to just hang on to that history.   It might be handy to look at the next time you want to do something in <span class="notranslate">Galaxy</span>.</p>

<p>But what if you want to run that analysis again, maybe on updated datasets, or maybe even on entirely different datasets?  You could manually rerun all the steps in your first analysis, using the new datasets instead of the old.  But that is tedious, and error-prone. What you want is the ability to easily run exactly the same tools, with the same settings, in the same order as the first time you ran the analysis.</p>

<p><span class="notranslate">Galaxy</span> <em>workflows</em> enable this, and this tutorial shows how you can create one from the analysis you have already done, and then run the analysis exactly as you did before, but on the new datasets.</p>

<blockquote class="tip">
  <h3 id="tip-tip-confused-about-histories-and-workflows"><i class="far fa-lightbulb" aria-hidden="true"></i><span class="visually-hidden">tip</span> Tip: Confused about <em>Histories</em> and <em>Workflows?</em></h3>

  <p>Well, you are not alone.  This analogy may help.</p>

  <ul>
    <li>
      <p>A <em>history</em> is a record of analysis that you have done, or of the analysis you are currently working on.  <strong>Think of a history as a baked cake.</strong>  It’s something that been done.  It has input datasets, possibly intermediate datasets, and output datasets.  Think of the input datasets as the basic ingredients used to make the cake, like eggs and flour, and the output datasets are the cake.</p>
    </li>
    <li>
      <p>A <em><span class="notranslate">workflow</span></em> is a <strong>recipe</strong> for running an analysis.  It doesn’t contain any of the ingredients or the cake.  It does specify what you’ll need to run the recipe: input datasets (the eggs and flour), and all of the steps you’ll need to do to create the cake (beat the eggs, mix the flour, sugar and baking powder, …).</p>
    </li>
  </ul>

  <p>In this tutorial we will take a fully baked cake (a history), <em>ask it to tell us the recipe that was used to create it,</em> and then create a recipe (a <span class="notranslate">workflow</span>) based on what the cake tells us.</p>

  <p>Happy baking.</p>
</blockquote>

<h2 id="set-your-current-history">Set your current history</h2>

<p>By this time, you may have multiple histories under your <span class="notranslate">Galaxy</span> account.  You’ll need to make the history that you want create a recipe/<span class="notranslate">workflow</span> for be your <em>current</em> history.  Your current history is the one shown in the History panel on the right.</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-managing-your-histories"><i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Managing your histories</h3>

  <ol>
    <li>Make sure you are <em>logged in</em>.
      <ul>
        <li>If you haven’t yet created an account, now is an ideal time to that.  Your current history will be saved as your first history under your new account.</li>
      </ul>
    </li>
    <li><em>Click</em> on the <strong>table icon</strong> at the top-right of the history panel to switch to your <em>histories</em> view.
      <ul>
        <li>This lists your histories, from left to right in reverse chronological order, based on the last time each history was your current history.</li>
      </ul>
    </li>
    <li><em>Switch to</em> the history you want to extract a <span class="notranslate">workflow</span> from.
      <ul>
        <li>If the history that you want to create a repeatable <span class="notranslate">workflow</span> for is <em>not</em> your <em>current</em> history (the left-most one), then find the history you want and then <em>click</em> the <strong>Switch to</strong> button at the top of the history.</li>
        <li>This makes that history the current history and moves it to the very left.</li>
      </ul>
    </li>
    <li><em>Click</em> on the <span class="notranslate">Galaxy</span> Icon or the <i class="fas fa-home" aria-hidden="true"></i><span class="visually-hidden"><span class="notranslate">galaxy</span>-home</span> Home Button  at the top upper left of your histories view.
      <ul>
        <li>This returns you to the <span class="notranslate">Galaxy</span> home page with the selected history as your current history.</li>
      </ul>
    </li>
  </ol>
</blockquote>

<blockquote class="tip">
  <h3 id="tip-tip-always-name-your-histories"><i class="far fa-lightbulb" aria-hidden="true"></i><span class="visually-hidden">tip</span> Tip: Always name your histories</h3>

  <p>If you just saw multiple <code class="language-plaintext highlighter-rouge">Unnamed history</code> entries in your histories view, then now you know why.</p>

  <p><strong>Bonus tip:</strong> You can name your histories in your histories view.</p>
</blockquote>

<h2 id="extract-the-recipe-from-your-history">Extract the recipe from your history</h2>

<p>Now that we have the history we want, let’s use <span class="notranslate">Galaxy</span> to create a reusable <span class="notranslate">workflow</span> from it.  To do this we’ll use the history’s <strong>gear / history options</strong> pull-down list.</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-extract-workflow"><i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Extract <span class="notranslate">workflow</span></h3>

  <ol>
    <li><em>Click</em> on the <strong>gear icon</strong> at the top of your history.
      <ul>
        <li>This opens a pull-down menu showing lots of actions that you can perform on this history.  Right now, we are interested in only one of them:</li>
      </ul>
    </li>
    <li><em>Click</em> on <strong>Extract <span class="notranslate">Workflow</span></strong>.  It’s about half-way down the menu.
      <ul>
        <li>This launches a form to create a <span class="notranslate">workflow</span>.</li>
      </ul>
    </li>
    <li><em>Give</em> your <span class="notranslate">workflow</span> a meaningful name.
      <ul>
        <li>Think about giving it a more general name than what your history has. The example history is about looking for overlapping genes on opposite strands in human on chromosome 22.  That’s pretty specific.  We want to create a <span class="notranslate">workflow</span> that can be used to detect any type of overlapping features, not just genes, and in any species and on any chromosome (or on all chromosomes).  The name should reflect this goal.</li>
        <li>For this example we’ll name it <code class="language-plaintext highlighter-rouge">Overlapping features on opposite strands</code></li>
      </ul>
    </li>
    <li><em>Remove</em> unwanted steps
      <ul>
        <li>If there were any missteps or dead-ends in your history, uncheck those steps here.</li>
        <li>Don’t worry if you miss one - we can drop it in a subsequent step.</li>
      </ul>
    </li>
    <li>
      <p>Once you have named your <span class="notranslate">workflow</span>, click the <strong>Create <span class="notranslate">Workflow</span></strong> button.</p>

      <p><img src="../../images/workflow_strand_create.png" alt="Create workflow form. " loading="lazy" /></p>

      <ul>
        <li>This replaces the <span class="notranslate">workflow</span> creation form with a box that says:
          <ul>
            <li><span class="notranslate">Workflow</span> <em><code class="language-plaintext highlighter-rouge">whatever name you entered</code></em> created from current history. You can edit or run the <span class="notranslate">workflow</span>.</li>
          </ul>
        </li>
      </ul>
    </li>
    <li><em>Click</em> on the <strong>edit</strong> link in the box.</li>
  </ol>

</blockquote>

<p>This launches the <span class="notranslate">workflow</span> editor and shows a graphical representation of the inputs and steps taken during the analysis.  Each box is either an input dataset, or a tool that was run.  Boxes are connected by lines that show the flow of data from input datasets, through intermediate tools, to the tools that produce the final output(s).  Each tool box show a list of inputs (at the top) and a list of outputs (at the bottom).  The flow of data is generally from left to right.</p>

<p><img src="../../images/workflow_editor_landing_strand.png" alt="Workflow Editor. " loading="lazy" /></p>

<p>While we could run this <span class="notranslate">workflow</span> right now, here are a few cleanup steps we should do first.</p>

<h3 id="rename-input-datasets">Rename input datasets</h3>

<p>The <em>extract <span class="notranslate">workflow</span></em> step assigns the name of input datasets in your history to the corresponding inputs in your <span class="notranslate">workflow</span>.  This is very helpful in the short term because it makes it clear which of the boxes are which datasets.  But, for a <span class="notranslate">workflow</span>, we want a more general (but still helpful) name for input datasets.</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-rename-inputs"><i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Rename inputs</h3>

  <ol>
    <li><em>Click</em> on the first input dataset.
      <ul>
        <li>This changes the right panel to show information about the selected dataset.  In this example, this dataset is a set of genomic features (like genes or exons or repeats) that exist in an organism.</li>
      </ul>
    </li>
    <li><em>Set</em> the <strong>Label</strong> field to something more general, yet still informative.
      <ul>
        <li>In the example <span class="notranslate">workflow</span>, we’ll name this <code class="language-plaintext highlighter-rouge">Genomic features</code> about as general as you can get.</li>
      </ul>
    </li>
    <li>Add a <em>description</em> for your input datasets
      <ul>
        <li>This helps make your general input dataset name more informative.</li>
        <li><em>add</em> a description of the dataset in the <strong>Annotation</strong> box.</li>
        <li>For the example, we’ll use:
          <ul>
            <li><code class="language-plaintext highlighter-rouge"><span class="notranslate">Workflow</span> checks this set of genomic features to find any that overlap with each other on opposite strands.  **It must be at least a 6 column <span class="notranslate">BED</span> file,** as the <span class="notranslate">workflow</span> makes decisions based on column 6 (the strand).</code>
  <img src="../../images/workflow_strand_renamed_plus_annot.png" alt="Renamed and annotated input dataset. " loading="lazy" /></li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>
</blockquote>

<p>There are several other things we could do in the <span class="notranslate">workflow</span> editor, but let’s focus on just two of them.</p>

<p>First, your history might contain several false starts or tool runs where the parameters weren’t quite right. Lets get rid of those now.</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-drop-unused-input-datasets-and-tool-boxes"><i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Drop unused input datasets and tool boxes</h3>

  <ol>
    <li><em>Delete</em> unwanted steps
      <ul>
        <li>If your history contained any false starts or tool runs that didn’t contribute to your final result, then <em>delete</em> them from the <span class="notranslate">workflow</span> by clicking the black <strong>x</strong> in the corner of those datasets/tools’ boxes.</li>
        <li>This will remove them from the <span class="notranslate">workflow</span>.</li>
      </ul>
    </li>
  </ol>
</blockquote>

<blockquote class="tip">
  <h3 id="tip-tip-removing-unnecessary-steps-before-creating-workflow"><i class="far fa-lightbulb" aria-hidden="true"></i><span class="visually-hidden">tip</span> Tip: Removing unnecessary steps before creating <span class="notranslate">workflow</span></h3>
  <p>You can also delete these steps when you are first extracting the <span class="notranslate">workflow</span> from your history, by unchecking them.  However, it is often easier to identify the steps to drop in the <span class="notranslate">workflow</span> view, where connections and dead-ends are more obvious.</p>
</blockquote>

<p>Second, you might want to give your output datasets meaningful names too.</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-name-output-datasets"><i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Name output datasets</h3>

  <ol>
    <li><em>Click</em> on a step that produces an output file.
      <ul>
        <li>This brings up information about that step in the right panel.</li>
      </ul>
    </li>
    <li><em>Scroll</em> down in the right panel until you see a <strong>Configure Output</strong> link.  <em>Click</em> on it.</li>
    <li><em>Enter</em> a meaningful name in the <strong>Rename dataset</strong> field.
      <ul>
        <li>In the example, we’ll enter <code class="language-plaintext highlighter-rouge">Features that overlap another feature on opposite strand.</code></li>
      </ul>
    </li>
    <li>Repeat this for all your output datasets.</li>
  </ol>
</blockquote>

<p>We could add annotation to each step in the process as well, and if this <span class="notranslate">workflow</span> is going to be published in a paper, or shared with others, then that is definitely worth doing.</p>

<p>Now that our edits are done, let’s save our work and run the <span class="notranslate">workflow</span>.</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-save-the-workflow-edits"><i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Save the <span class="notranslate">workflow</span> edits</h3>

  <ol>
    <li><em>Click</em> on the <strong>gear icon</strong> at the top right of the central panel, <em>select</em> <strong>Save</strong> from the pull-down menu.</li>
  </ol>
</blockquote>

<h3 id="test-the-workflow">Test the <span class="notranslate">workflow</span></h3>

<p>Now that we have finished creating our <span class="notranslate">workflow</span>, it is time to test it.</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-run-the-workflow"><i class="fas fa-pencil-alt" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Run the <span class="notranslate">workflow</span></h3>

  <ol>
    <li><em>Click</em> on the <strong>gear icon</strong> and this time select <strong>Run</strong>.</li>
    <li>
      <p><em>Examine</em> the <span class="notranslate">workflow</span> run form.</p>

      <p>This form lists all the inputs and steps in the <span class="notranslate">workflow</span> also asks if you want to run this <span class="notranslate">workflow</span> in a new history, of just add it to your existing history.
<img src="../../images/workflow_run_strand_landing.png" alt="Run workflow form. " loading="lazy" /></p>

      <p>In this form you can also change the run-time parameters of any of the steps.  We aren’t going to do that, but it can be useful when are experimenting with different parameters in different steps.
Let’s test the <span class="notranslate">workflow</span> by running it on the same input datasets we used in the current history.  If we created the <span class="notranslate">workflow</span> correctly, we should get the same results as in the history.</p>
    </li>
    <li><em>Select</em> <strong>Yes</strong> under <strong>Send results to a new history</strong>.
      <ul>
        <li>Sometimes you’ll be building analyses out of component workflows and you will want to run them all in the same history.  Here we want a new history because the results will be cleaner and easier to understand.</li>
      </ul>
    </li>
    <li>Give the new history a meaningful name.</li>
    <li><em>Set</em> your first input dataset using the pull-down menu.
      <ul>
        <li><em>Repeat</em> until all input datasets are set.</li>
      </ul>
    </li>
    <li><em>Click</em> the <strong>Run <span class="notranslate">workflow</span></strong> button.</li>
  </ol>
</blockquote>

<p>And <span class="notranslate">Galaxy</span> launches the <span class="notranslate">workflow</span>, running in a new history.  It says (in a nice big green box) something like:</p>

<p>You can check the status of queued jobs and view the resulting data <em>by refreshing the History pane.</em> When the job has been run the status will change from ‘running’ to ‘finished’ if completed successfully or ‘error’ if problems were encountered.</p>

<p>But, <em>that’s a lie</em>.  In our case we sent the results to a new history, and the history panel is still showing us the old history.  To get to the new history, open the histories view (<em>click</em> the <strong>table icon</strong> at top of history) and then make the newly created history be the current history.</p>

<p>Depending on your <span class="notranslate">workflow</span> and datasets, your analysis may already be done by the time you make it the current history and go back to the standard view.</p>

<p>At this point it’s worth doing a little cleanup.  In particular think about updating the output dataset names to be more specific to the data we actually used.</p>

<h2 id="final-thoughts">Final thoughts</h2>

<ul>
  <li>Workflows can also be created from scratch</li>
  <li>If you ever work on large studies or even if you have just a few samples, workflows are critical to
    <ol>
      <li>Running the same analysis on each dataset.</li>
      <li>Not going insane.</li>
    </ol>
  </li>
</ul>


                
                <blockquote class="key_points">
                    <h3><i class="fas fa-key" aria-hidden="true"></i> Key points</h3>
                    <ul>
                        
                        <li><p>Workflows allow you to easily repeat your analyses on different input datasets</p>
</li>
                        
                        <li><p>Workflows can be automatically extracted from your analysis history</p>
</li>
                        
                        <li><p>You can perform your analysis manually once, then automatically extract the recipe for repeating this analysis on other datasets</p>
</li>
                        
                        <li><p>Workflows capture all the tools and parameter settings needed to perform an analysis</p>
</li>
                        
                        <li><p>Workflows can be edited or created from scratch using the workflow editor</p>
</li>
                        
                    </ul>
                </blockquote>
                

                <h1>Frequently Asked Questions</h1>
                Have questions about this tutorial? Check out the  <a href="/training-material/topics/galaxy-interface/faqs/">FAQ page for the Using Galaxy and Managing your Data topic</a> to see if your question is listed there.
                If not, please ask your question on the <a href="https://gitter.im/Galaxy-Training-Network/Lobby">GTN Gitter Channel</a> or the
                <a href="https://help.galaxyproject.org">Galaxy Help Forum</a>

                

                

                

                <h1>Feedback</h1>
                <p class="text-muted">Did you use this material as an instructor? Feel free to give us feedback on <a href="https://github.com/galaxyproject/training-material/issues/1452" target="_blank">how it went</a>.
                <br>Did you use this material as a learner or student? Click the form below to leave feedback.<i class="fas fa-hand-point-down"></i>
                </p>

                <div id="feedback-button">
                    <img src="/training-material/shared/images/feedback.png" title="Click to activate" alt="Click here to load Google feedback frame" />
                </div>
                <div id="feedback-form">
                </div>
                <script type="text/javascript">
                    (function (window, document) {
                        function onDocumentReady(fn) {
                            if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
                                fn();
                            } else {
                                document.addEventListener('DOMContentLoaded', fn);
                            }
                        }

                        onDocumentReady(function () {
                            $("#feedback-button").click(function(evt){
                                var e = $(evt.target)
                                e.hide();

                                $("#feedback-form").html(`
                                    <iframe id="feedback-google" class="google-form" src="https://docs.google.com/forms/d/e/1FAIpQLSd4VZptFTQ03kHkMz0JyW9b6_S8geU5KjNE_tLM0dixT3ZQmA/viewform?embedded=true&entry.1235803833=Extracting Workflows from Histories (Using Galaxy and Managing your Data)">Loading...</iframe>
                                `)
                            })
                        });
                    })(window, document);
                </script>



                <h1>Citing this Tutorial</h1>
                <p>
                    <ol>
                        <li id="citation-text">Dave Clements, 2021 <b>Extracting Workflows from Histories (Galaxy Training Materials)</b>. <a href="https://training.galaxyproject.org/training-material/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html">https://training.galaxyproject.org/training-material/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html</a> Online; accessed TODAY
                        </li>
                        <li>
                        Batut et al., 2018 <b>Community-Driven Data Analysis Training for Biology</b> Cell Systems <a href="https://doi.org/10.1016%2Fj.cels.2018.05.012">10.1016/j.cels.2018.05.012</a>
                        </li>
                    </ol>
                </p>


                <blockquote class="details">
                  <h3><i class="fa fa-info-circle" aria-hidden="true"></i><span class="visually-hidden">details</span> BibTeX</h3>
                  <p style="display: none;">

                <div class="highlighter-rouge"><div class="highlight"><pre class="highlight">
<code id="citation-code">@misc{galaxy-interface-history-to-workflow,
author = "Dave Clements",
title = "Extracting Workflows from Histories (Galaxy Training Materials)",
year = "2021",
month = "10",
day = "26"
url = "\url{https://training.galaxyproject.org/training-material/topics/galaxy-interface/tutorials/history-to-workflow/tutorial.html}",
note = "[Online; accessed TODAY]"
}
@article{Batut_2018,
    doi = {10.1016/j.cels.2018.05.012},
    url = {https://doi.org/10.1016%2Fj.cels.2018.05.012},
    year = 2018,
    month = {jun},
    publisher = {Elsevier {BV}},
    volume = {6},
    number = {6},
    pages = {752--758.e1},
    author = {B{\'{e}}r{\'{e}}nice Batut and Saskia Hiltemann and Andrea Bagnacani and Dannon Baker and Vivek Bhardwaj and Clemens Blank and Anthony Bretaudeau and Loraine Brillet-Gu{\'{e}}guen and Martin {\v{C}}ech and John Chilton and Dave Clements and Olivia Doppelt-Azeroual and Anika Erxleben and Mallory Ann Freeberg and Simon Gladman and Youri Hoogstrate and Hans-Rudolf Hotz and Torsten Houwaart and Pratik Jagtap and Delphine Larivi{\`{e}}re and Gildas Le Corguill{\'{e}} and Thomas Manke and Fabien Mareuil and Fidel Ram{\'{\i}}rez and Devon Ryan and Florian Christoph Sigloch and Nicola Soranzo and Joachim Wolff and Pavankumar Videm and Markus Wolfien and Aisanjiang Wubuli and Dilmurat Yusuf and James Taylor and Rolf Backofen and Anton Nekrutenko and Björn Grüning},
    title = {Community-Driven Data Analysis Training for Biology},
    journal = {Cell Systems}
}</code>
                </pre></div></div>
                </p>
                </blockquote>


<script type="text/javascript">
// update the date on load, or leave fallback of 'today'
d = new Date();
document.getElementById("citation-code").innerHTML = document.getElementById("citation-code").innerHTML.replace("TODAY", d.toDateString());
document.getElementById("citation-text").innerHTML = document.getElementById("citation-text").innerHTML.replace("TODAY", d.toDateString());
</script>

                <h3><i class="far fa-thumbs-up" aria-hidden="true"></i> Congratulations on successfully completing this tutorial!</h3>

                

                

            </div>
        </div>
    </div>
</section>
<br/>
<br/>
<br/>

        </div>
        
    </body>
    <script type="text/javascript" src="/training-material/assets/js/jquery.slim.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/popper.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/bootstrap.min.js?v=3"></script>
    <script type="text/javascript" src="/training-material/assets/js/details-element-polyfill.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="/training-material/assets/js/bootstrap-toc.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/main.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/theme.js"></script>

    <script type="text/javascript" src="/training-material/assets/js/clipboard.min.js"></script>
    <script type="text/javascript">
    var snippets=document.querySelectorAll('div.highlight');
    [].forEach.call(snippets,function(snippet){
        snippet.firstChild.insertAdjacentHTML('beforebegin','<button class="btn btn-light" data-clipboard-snippet><i class="fa fa-copy"></i>&nbsp;Copy</button>');
    });

    var clipboardSnippets=new ClipboardJS('[data-clipboard-snippet]',{
        target:function(trigger){return trigger.nextElementSibling;
    }});
    </script>
    

    <script type="text/javascript">
        if(window.location.hostname === "galaxyproject.github.io") {
            // Redirect
            var redirect = "https://training.galaxyproject.org" + window.location.pathname + window.location.search;
            $('div.container.main-content').prepend("<div class='alert alert-warning'><strong>Note: </strong>This content has a new home at <a href=\"" + redirect + "\">" + redirect + "</a>, which you will be redirected to in 5 seconds.</div>");

            window.setTimeout(function(){
                window.location.href = redirect;
            }, 5000)

        }
    </script>
</html>
