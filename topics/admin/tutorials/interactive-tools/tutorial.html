<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Galaxy Interactive Tools</title>
        
            <!--
<script async defer data-domain="training.galaxyproject.org" src="https://plausible.galaxyproject.eu/js/plausible.js"></script>
-->
<!-- We let users opt-out, so if they've opted in, we need to append the plausible script to the body -->

<script>
var scriptElement = document.createElement("script");
scriptElement.async = true;
scriptElement.defer = true;
scriptElement.setAttribute("data-domain", "training.galaxyproject.org");
scriptElement.src = "https://plausible.galaxyproject.eu/js/plausible.js";

// Appending the script element to the body
if(localStorage.getItem('plausible-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	console.log("Plausible: opt-in");
	// Wait for the document to be available
	document.addEventListener("DOMContentLoaded", function(event) {
		document.body.appendChild(scriptElement);
	});
}
</script>

<!-- JavaScript Error Monitoring, and performance tracking. -->
<!--
<script
  src="https://browser.sentry-cdn.com/7.52.1/bundle.tracing.min.js"
  integrity="sha384-muuFXKS3752PNA4rPm9Uq6BLvOfV4CXyr9MHDBPvozOJJUWLKkogEFWOIRoVps43"
  crossorigin="anonymous"
></script>
-->
<script type="text/javascript">
var scriptElement = document.createElement("script");
scriptElement.src = "https://browser.sentry-cdn.com/7.52.1/bundle.tracing.min.js";
scriptElement.integrity = "sha384-muuFXKS3752PNA4rPm9Uq6BLvOfV4CXyr9MHDBPvozOJJUWLKkogEFWOIRoVps43";
scriptElement.crossOrigin = "anonymous";

if(localStorage.getItem('sentry-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	console.log("Sentry: opt-in");
	// Appending the script element to the body
	document.addEventListener("DOMContentLoaded", function(event) {
		document.body.appendChild(scriptElement);
	});
		
	Sentry.init({
	  dsn: "https://45e0ec6e4373462b92969505df37cf40@sentry.galaxyproject.org/10",
	  release: "galaxy-training-network@ee51c939937f9893c63a0f9494eaef0bfbfa1c6d",
	  integrations: [new Sentry.BrowserTracing(), new Sentry.Replay()],
	  sampleRate: 0.1,
	  tracesSampleRate: 0.1,
	  // Capture Replay for no sessions by default
	  replaysSessionSampleRate: 0.01,
	  // plus for 1% of sessions with an error
	  replaysOnErrorSampleRate: 0.01,
	  // PII OFF
	  sendDefaultPii: false, // Off by default but just in case.
	  environment: "production",
	});
}
</script>

        
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon">
        <link rel="alternate" type="application/atom+xml" href="/training-material/feed.xml">
        <link rel="canonical" href="https://training.galaxyproject.org/training-material/topics/admin/tutorials/interactive-tools/tutorial.html">
        <link rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Regular-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Bold-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Italic-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" as="script" crossorigin>
        <link rel="preload" href="/training-material/assets/css/main.css?v=3" as="style">
        <link rel='preload' href='/training-material/assets/js/bundle.theme.js?v=1702340877' as='script'>
<link rel='preload' href='/training-material/assets/js/bundle.main.js?v=1702340877' as='script'>
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=3">
        <link rel="manifest" href="/training-material/manifest.json">
        <meta name="theme-color" content="#2c3143"/>


        <meta name="DC.identifier" content="https://github.com/galaxyproject/training-material">
<meta name="DC.type" content="text">
<meta name="DC.title" content="Galaxy Interactive Tools">
<meta name="DC.publisher" content="Galaxy Training Network">
<meta name="DC.date" content="2023-05-04 13:20:25 +0000">
<meta name="DC.creator" content="Nate Coraor">
<meta name="DC.creator" content="Simon Gladman">
<meta name="DC.creator" content="Helena Rasche">
<meta name="DC.creator" content="Anthony Bretaudeau">

        
        
        
        
        <meta name="description" content="Resources related to configuration and maintenance of Gal...">
        <meta property="og:site_name" content="Galaxy Training Network">
        <meta property="og:title" content="Galaxy Training: Galaxy Interactive Tools">
        <meta property="og:description" content="Resources related to configuration and maintenance of Gal...">
        
        <meta property="og:image" content="/training-material/assets/images/GTNLogo1000.png">

        
        <script type="application/ld+json">
            


{
  "@context": "http://schema.org",
  "@type": "LearningResource",
  "http://purl.org/dc/terms/conformsTo": {
    "@id": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
    "@type": "CreativeWork"
  },
  "audience": {
    "@type": "EducationalAudience",
    "educationalRole": "Students"
  },
  "citation": {
    "@type": "CreativeWork",
    "name": "Community-Driven Data Analysis Training for Biology",
    "url": "https://doi.org/10.1016/j.cels.2018.05.012"
  },
  "copyrightHolder": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "dateModified": "2023-05-04 13:20:25 +0000",
  "discussionUrl": "https://gitter.im/Galaxy-Training-Network/Lobby",
  "headline": "Galaxy Interactive Tools",
  "interactivityType": "mixed",
  "isAccessibleForFree": true,
  "isFamilyFriendly": true,
  "license": "https://spdx.org/licenses/CC-BY-4.0.html",
  "producer": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "provider": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "sourceOrganization": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "identifier": "https://github.com/galaxyproject/training-material",
  "workTranslation": [

  ],
  "creativeWorkStatus": "Active",
  "accessMode": [
    "textual",
    "visual"
  ],
  "accessModeSufficient": [
    "textual",
    "visual"
  ],
  "accessibilityControl": [
    "fullKeyboardControl",
    "fullMouseControl"
  ],
  "accessibilityFeature": [
    "alternativeText",
    "tableOfContents"
  ],
  "accessibilitySummary": "The text aims to be as accessible as possible. Image descriptions will vary per tutorial, from images being completely inaccessible, to images with good descriptions for non-visual users.",
  "isPartOf": {
    "@type": "CreativeWork",
    "name": "Galaxy Server administration",
    "description": "Resources related to configuration and maintenance of Galaxy servers",
    "url": "https://training.galaxyproject.org/training-material/topics/admin/"
  },
  "learningResourceType": "hands-on tutorial",
  "name": "Hands-on for 'Galaxy Interactive Tools' tutorial",
  "url": "https://training.galaxyproject.org/training-material/topics/admin/tutorials/interactive-tools/tutorial.html",
  "timeRequired": "PT2H",
  "teaches": "Understand what Galaxy Interactive Tools are and how they work\n - Be aware of the security implications of Interactive Tools\n - Have a basic understanding of the Interactive Tools (GxIT/GIE) Proxy, its purpose, and configuration\n - Be familiar with wildcard SSL certificates and how to get them from Let's Encrypt\n - Configure your Galaxy to serve Interactive Tools using an Ansible Playbook\n - Start, run, and use an Interactive Tool",
  "keywords": "admin, ansible, interactive-tools",
  "description": "The objectives are:\n - Understand what Galaxy Interactive Tools are and how they work\n - Be aware of the security implications of Interactive Tools\n - Have a basic understanding of the Interactive Tools (GxIT/GIE) Proxy, its purpose, and configuration\n - Be familiar with wildcard SSL certificates and how to get them from Let's Encrypt\n - Configure your Galaxy to serve Interactive Tools using an Ansible Playbook\n - Start, run, and use an Interactive Tool\n\n",
  "inLanguage": {
    "@type": "Language",
    "name": "English",
    "alternateName": "en"
  },
  "competencyRequired": [
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/admin/tutorials/ansible/slides.html",
      "name": "Ansible",
      "description": "Slides for 'Ansible' tutorial",
      "learningResourceType": "slides",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/admin/tutorials/ansible/tutorial.html",
      "name": "Ansible",
      "description": "Hands-on for 'Ansible' tutorial",
      "learningResourceType": "hands-on tutorial",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/admin/tutorials/ansible-galaxy/slides.html",
      "name": "Galaxy Installation with Ansible",
      "description": "Slides for 'Galaxy Installation with Ansible' tutorial",
      "learningResourceType": "slides",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/admin/tutorials/ansible-galaxy/tutorial.html",
      "name": "Galaxy Installation with Ansible",
      "description": "Hands-on for 'Galaxy Installation with Ansible' tutorial",
      "learningResourceType": "hands-on tutorial",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/admin/tutorials/connect-to-compute-cluster/slides.html",
      "name": "Connecting Galaxy to a compute cluster",
      "description": "Slides for 'Connecting Galaxy to a compute cluster' tutorial",
      "learningResourceType": "slides",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/admin/tutorials/connect-to-compute-cluster/tutorial.html",
      "name": "Connecting Galaxy to a compute cluster",
      "description": "Hands-on for 'Connecting Galaxy to a compute cluster' tutorial",
      "learningResourceType": "hands-on tutorial",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/admin/tutorials/job-destinations/tutorial.html",
      "name": "Mapping Jobs to Destinations using TPV",
      "description": "Hands-on for 'Mapping Jobs to Destinations using TPV' tutorial",
      "learningResourceType": "hands-on tutorial",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    }
  ],
  "author": [
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/natefoo/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/natefoo/",
      "name": "Nate Coraor",
      "image": "https://avatars.githubusercontent.com/natefoo",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "url": "https://galaxyproject.org/teach/gtn/"
        }
      ],
      "identifier": "https://orcid.org/0000-0001-8083-2963",
      "orcid": "https://orcid.org/0000-0001-8083-2963"
    },
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/slugger70/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/slugger70/",
      "name": "Simon Gladman",
      "image": "https://avatars.githubusercontent.com/slugger70",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "url": "https://galaxyproject.org/teach/gtn/"
        }
      ],
      "identifier": "https://orcid.org/0000-0002-6100-4385",
      "orcid": "https://orcid.org/0000-0002-6100-4385"
    },
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/hexylena/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/hexylena/",
      "name": "Helena Rasche",
      "image": "https://avatars.githubusercontent.com/hexylena",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "url": "https://galaxyproject.org/teach/gtn/"
        }
      ],
      "identifier": "https://orcid.org/0000-0001-9760-8992",
      "orcid": "https://orcid.org/0000-0001-9760-8992"
    },
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/abretaud/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/abretaud/",
      "name": "Anthony Bretaudeau",
      "image": "https://avatars.githubusercontent.com/abretaud",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "url": "https://galaxyproject.org/teach/gtn/"
        }
      ],
      "identifier": "https://orcid.org/0000-0003-0914-2470",
      "orcid": "https://orcid.org/0000-0003-0914-2470"
    }
  ],
  "about": [
    {
      "@type": "CreativeWork",
      "name": "Galaxy Server administration",
      "description": "Resources related to configuration and maintenance of Galaxy servers",
      "url": "https://training.galaxyproject.org/training-material/topics/admin/"
    }
  ],
  "educationalLevel": "Introductory",
  "mentions": [
    {
      "@type": "Thing",
      "name": "ansible"
    },
    {
      "@type": "Thing",
      "name": "interactive-tools"
    }
  ],
  "abstract": "> <div class="box-title warning-title" id="warning-evolving-topic-not-updated-for-23-0-gravity"><i class="fas fa-exclamation-triangle" aria-hidden="true" ></i> Warning: Evolving Topic, Not Updated for 23.0 + Gravity</div>"
}
        </script>
        
    </head>
    <body data-spy="scroll" data-target="#toc" data-brightness="auto" data-contrast="auto">
        <script src='/training-material/assets/js/bundle.theme.js?v=1702340877'></script>
        <header>
    <nav class="navbar navbar-expand-md navbar-dark" aria-label="Site Navigation">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                
                    Galaxy Training!
                
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        
                        <a class="nav-link" href="/training-material/topics/admin" title="Go back to list of tutorials">
                            <i class="far fa-folder" aria-hidden="true"></i> Galaxy Server administration
                        </a>
                        
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/training-material/learning-pathways" title="Learning Pathways">
                           <i class="fas fa-graduation-cap" aria-hidden="true"></i><span class="visually-hidden">curriculum</span> Learning Pathways
                        </a>
                    </li>

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu dropdown-menu-right">
        <!-- disable Tess for now
        <form method="get" action="https://tess.elixir-europe.org/materials">
            <input type="text" id="search" name="q" value="" style="margin-left: 0.5em;/*! border-radius: 0px; */">
            <input type="hidden" value="Galaxy Training" name="content_provider">
            <input type="submit" value="Search on TeSS" style="width: 92%;border-radius: 0px;margin: 0.5em;background: #f47d20;border: 0px;padding: 0.25em;" class="">
        </form>
        -->

	<a class="dropdown-item" href="/training-material/faqs/index.html" title="Check our FAQs">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> FAQs
        </a>
        
        
        <a class="dropdown-item" href="/training-material/topics/admin/faqs/" title="Check our FAQs for the Galaxy Server administration topic">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Topic FAQs
        </a>
        
        
        <a class="dropdown-item" href="https://help.galaxyproject.org/" title="Discuss on Galaxy Help">
            <i class="far fa-comments" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Galaxy Help Forum
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Discuss on gitter">
           <i class="fab fa-gitter" aria-hidden="true"></i><span class="visually-hidden">gitter</span> Discuss on Gitter
        </a>
    </div>
</li>


                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Extras">
        <i class="far fa-star" aria-hidden="true"></i><span class="visually-hidden">galaxy-star</span> Extras
    </a>
    <div class="dropdown-menu dropdown-menu-right">

        <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/edit/main/topics/admin/tutorials/interactive-tools/tutorial.md" title="Edit on GitHub">
          <i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
        </a>

        <a class="dropdown-item" href="/training-material/stats.html" title="Show view statistics about this repository">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN statistics
        </a>

        <a class="dropdown-item" href="https://plausible.galaxyproject.eu/training.galaxyproject.org?period=12mo&page=/training-material/topics/admin/tutorials/interactive-tools/tutorial.html" title="Show view statistics of this page">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> Page Metrics
        </a>

        <!-- link to feedback -->
        
            
            
                <a class="dropdown-item" href="/training-material/feedback.html" title="Show feedback statistics about this repository">
                    <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN feedback
                </a>
            
        

		<a href="/training-material/preferences.html" class="dropdown-item">
			<i class="fas fa-palette" aria-hidden="true"></i><span class="visually-hidden">gtn-theme</span> Themes have moved <span class="badge badge-secondary">New</span>
		</a>

        <div class="dropdown-item">
            <div>
                <i class="fas fa-history" aria-hidden="true"></i><span class="visually-hidden">galaxy-rulebuilder-history</span> Previous Versions
            </div>

            <div id="archive-selector">
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/">Older Versions</a>
            </div>

        </div>

    </div>
</li>


                    <!-- Search bar-->
                    <li class="nav-item">
                      <div id="navbarSupportedContent" role="search">
                        <!-- Search form -->
                        <form class="form-inline mr-auto" method="GET" action="/training-material/search2">
                          <i class="fas fa-search nav-link" aria-hidden="true"></i>
                          <div class="md-form mb-2">
                            <input name="query" class="form-control nicer" type="text" placeholder="Search Tutorials" aria-label="Search">
                          </div>
                        </form>
                      </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

        
        <div class="container main-content" role="main">
        














<!-- Gitter -->






<article class="tutorial topic-admin">
    <h1 data-toc-skip>Galaxy Interactive Tools</h1>
    

    <section aria-labelledby="overview-box" id="tutorial-metadata">
    <div markdown="0">

	<div class="contributors-line">
		Authors: <a href="/training-material/hall-of-fame/natefoo/" class="contributor-badge contributor-natefoo"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/natefoo?s=36" alt="Avatar" width="36" height="36">Nate Coraor</a><a href="/training-material/hall-of-fame/slugger70/" class="contributor-badge contributor-slugger70"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/slugger70?s=36" alt="Avatar" width="36" height="36">Simon Gladman</a><a href="/training-material/hall-of-fame/hexylena/" class="contributor-badge contributor-hexylena"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/hexylena?s=36" alt="Avatar" width="36" height="36">Helena Rasche</a><a href="/training-material/hall-of-fame/abretaud/" class="contributor-badge contributor-abretaud"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/abretaud?s=36" alt="Avatar" width="36" height="36">Anthony Bretaudeau</a>
	</div>

</div>


    <blockquote class="overview">
        <div id="overview-box" class="box-title">Overview</div>
        
        <img alt="Creative Commons License: CC-BY" class="float-right" style="border-width:0; display: inline-block; margin:0" src="/training-material/assets/images/cc-by.png"/>
        
        <strong><i class="far fa-question-circle" aria-hidden="true"></i> Questions:</strong>
        <ul>
        
        </ul>

        <strong><i class="fas fa-bullseye" aria-hidden="true"></i> Objectives: </strong>
        <ul>
        
        <li><p>Understand what Galaxy Interactive Tools are and how they work</p>
</li>
        
        <li><p>Be aware of the security implications of Interactive Tools</p>
</li>
        
        <li><p>Have a basic understanding of the Interactive Tools (GxIT/GIE) Proxy, its purpose, and configuration</p>
</li>
        
        <li><p>Be familiar with wildcard SSL certificates and how to get them from Let’s Encrypt</p>
</li>
        
        <li><p>Configure your Galaxy to serve Interactive Tools using an Ansible Playbook</p>
</li>
        
        <li><p>Start, run, and use an Interactive Tool</p>
</li>
        
        </ul>

        
        <strong><i class="fas fa-check-circle" aria-hidden="true"></i> Requirements:</strong>
        <ul>
        
        
    <li>
    
        
        
        <a href="/training-material/topics/admin">Galaxy Server administration</a>
        
            <ul>
                
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                            <li> Ansible:
                            
                                <a href="/training-material/topics/admin/tutorials/ansible/slides.html"><i class="fab fa-slideshare" aria-hidden="true"></i><span class="visually-hidden">slides</span> slides</a>
                                
                            
                            
                                
                                    - <a href="/training-material/topics/admin/tutorials/ansible/tutorial.html"><i class="fas fa-laptop" aria-hidden="true"></i><span class="visually-hidden">tutorial</span> hands-on</a>
                                
                            
                            </li>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                            <li> Galaxy Installation with Ansible:
                            
                                <a href="/training-material/topics/admin/tutorials/ansible-galaxy/slides.html"><i class="fab fa-slideshare" aria-hidden="true"></i><span class="visually-hidden">slides</span> slides</a>
                                
                            
                            
                                
                                    - <a href="/training-material/topics/admin/tutorials/ansible-galaxy/tutorial.html"><i class="fas fa-laptop" aria-hidden="true"></i><span class="visually-hidden">tutorial</span> hands-on</a>
                                
                            
                            </li>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                
                    
                        
                    
                        
                            
                            <li> Connecting Galaxy to a compute cluster:
                            
                                <a href="/training-material/topics/admin/tutorials/connect-to-compute-cluster/slides.html"><i class="fab fa-slideshare" aria-hidden="true"></i><span class="visually-hidden">slides</span> slides</a>
                                
                            
                            
                                
                                    - <a href="/training-material/topics/admin/tutorials/connect-to-compute-cluster/tutorial.html"><i class="fas fa-laptop" aria-hidden="true"></i><span class="visually-hidden">tutorial</span> hands-on</a>
                                
                            
                            </li>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                            <li> Mapping Jobs to Destinations using TPV:
                            
                            
                                
                                     <a href="/training-material/topics/admin/tutorials/job-destinations/tutorial.html"><i class="fas fa-laptop" aria-hidden="true"></i><span class="visually-hidden">tutorial</span> hands-on</a>
                                
                            
                            </li>
                        
                    
                        
                    
                        
                    
                        
                    
                
            </ul>
        
    
    </li>

        </ul>
        

        
        <div><strong><i class="fas fa-hourglass-half" aria-hidden="true"></i> Time estimation:</strong> 2 hours</div>
        

        

        

        

        <div id="supporting-materials"><strong><i class="fa fa-external-link" aria-hidden="true"></i> Supporting Materials:</strong></div>
        <ul class="supporting_material">
            
                <li class="btn btn-default"><a href="/training-material/topics/admin/tutorials/interactive-tools/slides.html" title="Slides for this tutorial">
                    <i class="fab fa-slideshare" aria-hidden="true"></i> Slides
                </a></li>
            

            

            

            

            

            
            
            
                <li class="btn btn-default supporting_material">    <a class="topic-icon" href="/training-material/topics/admin/tutorials/interactive-tools/faqs/" title="Frequently Asked Questions">
        <i class="far fa-question-circle" aria-hidden="true"></i> FAQs
    </a>
</li>
            

            <!-- Check the GTN Video Library for recordings of this tutorial or associated slides -->
            













  
<!-- GTN Video Library true -->
  
<li class="btn btn-default supporting_material">
  
    <a href="#" class="btn btn-default dropdown-toggle topic-icon" data-toggle="dropdown" aria-expanded="false" title="Latest recordings of this tutorial in the GTN Video Library">
        <i class="fas fa-video" aria-hidden="true"></i><span class="visually-hidden">video</span>&nbsp;Recordings
    </a>
    <ul class="dropdown-menu">
        
        
        
        

        <li>

            <a class="dropdown-item" href="https://gallantries.github.io/video-library/videos/admin/interactive-tools" title="View GTN Video Library for this Tutorial">
                <i class="fas fa-video" aria-hidden="true"></i><span class="visually-hidden">video</span> Lecture & Tutorial (February 2021)
            </a>
        </li>
        
        
        
        
        
    </ul>
  
</li>
  
   



            
                
            
        </ul>

        <div><strong><i class="far fa-calendar" aria-hidden="true"></i> Last modification:</strong> May 4, 2023 </div>
        <div><strong><i class="fas fa-balance-scale" aria-hidden="true"></i> License:</strong>
		
            
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Tutorial Content is licensed under Creative Commons Attribution 4.0 International License</a>.
             The GTN Framework is licensed under <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a>
        </div>
        
        <div><strong><i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span><abbr title="Persistent URL">PURL</abbr>:</strong> <a href="https://gxy.io/GTN:T00010">https://gxy.io/GTN:T00010</a> </div>
        
    </blockquote>
    </section>

    <div class="container">
        <div class="row">
            <!-- sidebar, which will move to the top on a small screen -->
            <div class="col-sm-2 hide-when-printing">
                <nav id="toc" data-toggle="toc" class="sticky-top" aria-label="Table of Contents"></nav>
            </div>
            <div class="col-sm-10">
                 

                <section aria-label="Tutorial Content" id="tutorial-content">
                <blockquote class="warning">
  <div class="box-title warning-title" id="warning-evolving-topic-not-updated-for-23-0-gravity-1"><i class="fas fa-exclamation-triangle" aria-hidden="true" ></i> Warning: Evolving Topic, Not Updated for 23.0 + Gravity</div>
  <p>Galaxy Interactive Tools are a <strong>new feature</strong> and there are some rough edges. Work to improve the experience of deploying and using them is ongoing.</p>
</blockquote>

<h1 id="overview">Overview</h1>

<p>Galaxy Interactive Tools (GxITs) are a method to run containerized tools that are interactive in nature. Interactive Tools typically run a persistent service accessed on a specific port and run until terminated by the user. One common example of such a tool is <a href="https://jupyter.org/">Jupyter Notebook</a>. Galaxy Interactive Tools are similar in purpose to <a href="https://docs.galaxyproject.org/en/release_19.09/admin/special_topics/interactive_environments.html">Galaxy Interactive Environments</a> (GIEs), but are implemented in a significantly different manner. Most notably, instead of directly invoking containers on the Galaxy server, dedicated Docker node, or as a Docker Swarm service (as is done for GIEs), Interactive Tools are submitted through Galaxy’s job management system and thus are scheduled the same as any other Galaxy tool - on a Slurm cluster, for instance. Galaxy Interactive Tools were introduced in Galaxy Release 19.09.</p>

<blockquote class="warning">
  <div class="box-title warning-title" id="warning-before-you-continue"><i class="fas fa-exclamation-triangle" aria-hidden="true" ></i> Warning: Before You Continue</div>
  <p>If you are <em>not</em> completing this tutorial as part of a <a href="https://github.com/galaxyproject/dagobah-training">Galaxy Admin Training</a> course, <strong>you will need a wildcard DNS record for your Galaxy server and a method for obtaining a wildcard SSL certificate for your Galaxy server</strong>.</p>

  <p><br /></p>

  <p>Galaxy Interactive Tools require a <a href="https://en.wikipedia.org/wiki/Wildcard_certificate">wildcard SSL certificate</a>. Because the <strong>Galaxy Installation with Ansible</strong> tutorial fetches <a href="https://letsencrypt.org/">Let’s Encrypt</a> certificates, this tutorial fetches Let’s Encrypt wildcard certificates. However, this process is only valid for Galaxy Admin Training courses, because Let’s Encrypt wildcard certificates <a href="https://letsencrypt.org/docs/faq/">can only be fetched using the DNS-01 challenge method</a>, which requires control of a <a href="https://en.wikipedia.org/wiki/Dynamic_DNS">dynamic DNS</a> server (which we have preconfigured for use at training courses). Configuring your DNS service for dynamic updates is outside the scope of this tutorial, but it will show you how to request certificates using DNS-01, which can be adapted for your site.</p>

  <p><br /></p>

  <p>If you are using Let’s Encrypt, <a href="https://certbot.eff.org/docs/using.html#dns-plugins">a list of available DNS plugins for Certbot</a> can be found in the Certbot documentation. If you are not using Let’s Encrypt, please consult your certificate vendor’s documentation for information on how to obtain a wildcard certificate. You will need a certificate with (at least) the <a href="https://en.wikipedia.org/wiki/Subject_Alternative_Name">subject alternative name</a>s <code class="language-plaintext highlighter-rouge">galaxy.example.org</code> and <code class="language-plaintext highlighter-rouge">*.interactivetoolentrypoint.interactivetool.galaxy.example.org</code> (where <code class="language-plaintext highlighter-rouge">galaxy.example.org</code> is the hostname of your Galaxy server).</p>

  <p><br /></p>

  <p>You will also need a wildcard DNS <code class="language-plaintext highlighter-rouge">CNAME</code> record for <code class="language-plaintext highlighter-rouge">*.interactivetoolentrypoint.interactivetool.galaxy.example.org</code>. You can verify that your Galaxy server has such a record using the <code class="language-plaintext highlighter-rouge">host</code> or <code class="language-plaintext highlighter-rouge">dig</code> command line tools like so:</p>

  <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   $</span><span class="w"> </span>host <span class="nt">-t</span> cname foo.interactivetoolentrypoint.interactivetool.live.usegalaxy.eu
<span class="go">   foo.interactivetoolentrypoint.interactivetool.live.usegalaxy.eu is an alias for usegalaxy.eu.
</span><span class="gp">   $</span><span class="w"> </span>host <span class="nt">-t</span> cname bar.interactivetoolentrypoint.interactivetool.live.usegalaxy.eu
<span class="go">   bar.interactivetoolentrypoint.interactivetool.live.usegalaxy.eu is an alias for usegalaxy.eu.
</span></code></pre></div>  </div>

  <p>Please consult your DNS server software or cloud provider’s documentation for information on how to set up a wildcard record.</p>
</blockquote>

<p>There are two sections to this exercise. The first shows you how to use Ansible to setup and configure Galaxy Interactive Tools. The second shows you how to do everything manually. It is recommended that you use the Ansible method. The manual method is included here mainly for a more in depth understanding of what is happening.</p>

<blockquote class="agenda">
  <div class="box-title agenda-title" id="agenda">Agenda</div>

<ol id="markdown-toc">
  <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
  <li><a href="#configuring-galaxy-interactive-tools-using-ansible" id="markdown-toc-configuring-galaxy-interactive-tools-using-ansible">Configuring Galaxy Interactive Tools using Ansible</a>    <ol>
      <li><a href="#installing-ansible-roles" id="markdown-toc-installing-ansible-roles">Installing Ansible Roles</a></li>
      <li><a href="#installing-docker" id="markdown-toc-installing-docker">Installing Docker</a></li>
      <li><a href="#installing-the-interactive-tools-proxy" id="markdown-toc-installing-the-interactive-tools-proxy">Installing the Interactive Tools Proxy</a></li>
      <li><a href="#proxying-the-proxy" id="markdown-toc-proxying-the-proxy">Proxying the Proxy</a></li>
      <li><a href="#getting-a-wildcard-ssl-certificate" id="markdown-toc-getting-a-wildcard-ssl-certificate">Getting a Wildcard SSL Certificate</a></li>
      <li><a href="#enabling-interactive-tools-in-galaxy" id="markdown-toc-enabling-interactive-tools-in-galaxy">Enabling Interactive Tools in Galaxy</a></li>
      <li><a href="#run-an-interactive-tool" id="markdown-toc-run-an-interactive-tool">Run an Interactive Tool</a></li>
      <li><a href="#securing-interactive-tools" id="markdown-toc-securing-interactive-tools">Securing Interactive Tools</a></li>
    </ol>
  </li>
  <li><a href="#final-notes" id="markdown-toc-final-notes">Final Notes</a></li>
</ol>

</blockquote>

<h1 id="configuring-galaxy-interactive-tools-using-ansible">Configuring Galaxy Interactive Tools using Ansible</h1>

<p>If the terms “Ansible,” “role,” and “playbook” mean nothing to you, please checkout <a href="/training-material/topics/admin/tutorials/ansible/slides.html">the Ansible introduction slides</a> and <a href="/training-material/topics/admin/tutorials/ansible/tutorial.html">the Ansible introduction tutorial</a>.</p>

<blockquote class="warning">
  <div class="box-title warning-title" id="warning-uses-ansible"><i class="fas fa-exclamation-triangle" aria-hidden="true" ></i> Warning: Uses Ansible!</div>
  <p>This section of the tutorial builds upon the work in the <a href="/training-material/topics/admin/tutorials/ansible-galaxy/tutorial.html">Galaxy Installation with Ansible</a> tutorial, please ensure that you have completed that tutorial first.</p>
</blockquote>

<blockquote class="comment">
  <div class="box-title comment-title" id="comment-ansible-best-practices"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment: Ansible Best Practices</div>
  <p>If you’ve set up your Galaxy server using the <a href="/training-material/topics/admin/tutorials/ansible-galaxy/tutorial.html">Galaxy Installation with Ansible</a> tutorial, you will have created a <code class="language-plaintext highlighter-rouge">galaxyservers</code> group in your inventory file, <code class="language-plaintext highlighter-rouge">hosts</code>, and placed your variables in <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code>. Although for the purposes of this tutorial, the Galaxy server and cluster node are one and the same, in a real world deployment they are very likely to be different hosts. We will continue to use the <code class="language-plaintext highlighter-rouge">galaxyservers</code> group for simplicity, but in your own deployment you should consider creating an additional group for cluster nodes.</p>
</blockquote>

<h2 id="installing-ansible-roles">Installing Ansible Roles</h2>

<p>We will use several Ansible roles for this tutorial. In order to avoid repetetively adding them to <code class="language-plaintext highlighter-rouge">requirements.yml</code> and installing them, we can simply install them all before getting started. Each role will be discussed in further detail later in the tutorial.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-installing-new-ansible-roles"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Installing New Ansible Roles</div>

  <ol>
    <li>
      <p>In your working directory, add the docker role to your <code class="language-plaintext highlighter-rouge">requirements.yml</code>:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">geerlingguy.docker</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">6.1.0</span>
<span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">usegalaxy_eu.gie_proxy</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">0.0.2</span>
</code></pre></div>      </div>
    </li>
    <li>
      <p>Install the requirements with <code class="language-plaintext highlighter-rouge">ansible-galaxy</code>:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-galaxy role install -p roles -r requirements.yml
</code></pre></div>      </div>
    </li>
  </ol>
</blockquote>

<h2 id="installing-docker">Installing Docker</h2>

<p>Currently, Galaxy Interactive Tools must be run in Docker containers. It may be possible to run them in Singularity or other types of containers in the future. Thus, the first step is ensuring that the <em>nodes</em> where Galaxy will run have Docker installed. Both the Galaxy Project and Galaxy Project EU organizations have their own docker roles, but these are not published to Ansible Galaxy because they were mostly developed for internal purposes. For now, we will use the <a href="https://galaxy.ansible.com/geerlingguy/docker">docker role</a> by the prolific Ansible Galaxy publisher, <a href="https://galaxy.ansible.com/geerlingguy">Jeff Geerling (geerlingguy)</a>. Have a look at the geerlingguy.docker <a href="https://github.com/geerlingguy/ansible-role-docker/blob/master/README.md">README</a> and <a href="https://github.com/geerlingguy/ansible-role-docker/blob/master/defaults/main.yml">defaults/main.yml</a> to get an understanding of what variables are used to control the role.</p>

<blockquote class="question">
  <div class="box-title question-title" id="question"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>What variables might be relevant to using this role?</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution"><button class="gtn-boxify-button solution" type="button" aria-controls="solution" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

    <p>The <code class="language-plaintext highlighter-rouge">docker_users</code> variable (a <em>list</em>) controls which users are able to interact with the Docker daemon, which our Galaxy user will need to do. Additionally, Docker Compose is configured by default, which we do not need, so it can be disabled with <code class="language-plaintext highlighter-rouge">docker_install_compose: false</code>.</p>

  </blockquote>

</blockquote>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-installing-docker-with-ansible"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Installing Docker with Ansible</div>

  <ol>
    <li>
      <p>Edit the group variables file, <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code>:</p>

      <p>The relevant variables to set for this role are:</p>

      <table>
        <thead>
          <tr>
            <th>Variable</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">docker_users</code></td>
            <td>list of strings</td>
            <td>List of users to be added to the <code class="language-plaintext highlighter-rouge">docker</code> group</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">docker_install_compose</code></td>
            <td>boolean</td>
            <td>Whether to install and configure Docker Compose</td>
          </tr>
        </tbody>
      </table>

      <p>Add the following lines to your <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code> file:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Interactive Tools</span>
<span class="na">docker_install_compose</span><span class="pi">:</span> <span class="kc">false</span>
<span class="na">docker_users</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_user.name</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div>      </div>

      <blockquote class="question">
        <div class="box-title question-title" id="question-1"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

        <p>Why is <code class="language-plaintext highlighter-rouge">"{{ galaxy_user.name }}"</code> specified instead of just the user <code class="language-plaintext highlighter-rouge">galaxy</code>?</p>

        <blockquote class="solution">
          <div class="box-title solution-title" id="solution-1"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-1" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>
          <p>Duplicating values is never a good idea. If we needed to change the Galaxy user down the line or wanted to reuse this playbook on another host where the Galaxy username was different, we would have to change the value in multiple locations.</p>

        </blockquote>

      </blockquote>
    </li>
    <li>
      <p>Add the new role to the list of roles under the <code class="language-plaintext highlighter-rouge">roles</code> key in your playbook, <code class="language-plaintext highlighter-rouge">galaxy.yml</code>:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span> <span class="s">galaxyservers</span>
  <span class="na">become</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">roles</span><span class="pi">:</span>
    <span class="c1"># ... existing roles ...</span>
    <span class="pi">-</span> <span class="s">geerlingguy.docker</span>
</code></pre></div>      </div>
    </li>
    <li>
      <p>Run the playbook:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook galaxy.yml
</code></pre></div>      </div>
    </li>
  </ol>
</blockquote>

<p>Congratulations, you’ve set up Docker. Verify the installation using the <code class="language-plaintext highlighter-rouge">docker info</code> command (but keep in mind: what users did we authorize to interact with Docker?).</p>

<h2 id="installing-the-interactive-tools-proxy">Installing the Interactive Tools Proxy</h2>

<p>When an Interactive Tool’s Docker container starts, it will be assigned a random port. In order to connect clients to the Interactive Tool, Galaxy needs to determine this port (and the node on which the tool is running) and configure a <em>proxy</em> from Galaxy to the GxIT’s host and port. Consider the following example of running the Jupyter Notebook Interactive Tool, shown in Figure 1 below:</p>

<ul>
  <li>nginx listens for requests from the client on <strong>port 443</strong> (https)</li>
  <li>Requests for Galaxy are delivered from nginx to Galaxy over a UNIX domain socket</li>
  <li>Requests for Interactive Tools are delivered from nginx to the Interactive Tools Proxy over (by default) <strong>port 8000</strong> (http)
    <ul>
      <li>GxIT http requests are forwarded by the proxy to Docker on the node on the container’s (randomly assigned) <strong>port 32768</strong></li>
      <li>GxIT http requests are again forwarded by Docker to Jupyter on its in-container “published” <strong>port 8888</strong></li>
    </ul>
  </li>
</ul>

<p><a href="../../images/interactive-tools/gxit-proxy-diagram.png" rel="noopener noreferrer"><figure id="figure-1" style="max-width: 90%; margin:auto;"><img src="../../images/interactive-tools/gxit-proxy-diagram.png" alt="Galaxy Interactive Tools Proxy Diagram. " width="565" height="470" loading="lazy" />&lt;figcaption&gt;<span class="figcaption-prefix"><strong>Figure 1</strong>:</span> Galaxy Interactive Tools Proxy Diagram&lt;/figcaption&gt;</figure></a></p>

<p>As you can see, the client only ever speaks to nginx on the Galaxy server running on the standard https port (443), never directly to the interactive tool (which may be running on a node that does not even have a public IP address). The mapping of GxIT invocation and its corresponding host/port is kept in a SQLite database known as the <em>Interactive Tools Session Map</em>, and the path to this database is important, since both Galaxy and the proxy need access to it.</p>

<p>The GIE Proxy is written in <a href="https://nodejs.org/">Node.js</a> and requires some configuration. Thankfully there is an Ansible role, <a href="https://galaxy.ansible.com/usegalaxy_eu/gie_proxy">usegalaxy_eu.gie_proxy</a>, that can install the proxy and its dependencies, and configure it for you. As usual, have a look through the <a href="https://github.com/usegalaxy-eu/ansible-gie-proxy/blob/master/README.md">README</a> and <a href="https://github.com/usegalaxy-eu/ansible-gie-proxy/blob/master/defaults/main.yml">defaults</a> to investigate which variables you might need to set before continuing.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-installing-the-proxy-with-ansible"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Installing the Proxy with Ansible</div>

  <ol>
    <li>
      <p>Edit the group variables file, <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code>:</p>

      <p>The relevant variables to set for this role are:</p>

      <table>
        <thead>
          <tr>
            <th>Variable</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">gie_proxy_dir</code></td>
            <td>path (string)</td>
            <td>Path of directory into which the proxy application will be installed</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">gie_proxy_git_version</code></td>
            <td>string</td>
            <td>Git reference to clone</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">gie_proxy_setup_nodejs</code></td>
            <td>string</td>
            <td>Whether to install Node.js, options are <code class="language-plaintext highlighter-rouge">package</code> and <code class="language-plaintext highlighter-rouge">nodeenv</code></td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">gie_proxy_virtualenv_command</code></td>
            <td>string</td>
            <td>Command to create virtualenv when using <code class="language-plaintext highlighter-rouge">nodeenv</code> method</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">gie_proxy_nodejs_version</code></td>
            <td>string</td>
            <td>Version of Node.js to install if using <code class="language-plaintext highlighter-rouge">nodeenv</code> method</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">gie_proxy_virtualenv</code></td>
            <td>path (string)</td>
            <td>Path of virtualenv into which nodeenv/Node.js/npm will be installed</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">gie_proxy_setup_service</code></td>
            <td>string</td>
            <td>Whether to configure the proxy as a service, only option is <code class="language-plaintext highlighter-rouge">systemd</code></td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">gie_proxy_sessions_path</code></td>
            <td>path (string)</td>
            <td>Path of Interactive Tools sessions map</td>
          </tr>
        </tbody>
      </table>

      <p>Add the following lines to your <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code> file:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">gie_proxy_dir</span><span class="pi">:</span> <span class="s">/srv/galaxy/gie-proxy/proxy</span>
<span class="na">gie_proxy_git_version</span><span class="pi">:</span> <span class="s">main</span>
<span class="na">gie_proxy_setup_nodejs</span><span class="pi">:</span> <span class="s">nodeenv</span>
<span class="na">gie_proxy_virtualenv_command</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">pip_virtualenv_command</span><span class="nv"> </span><span class="s">}}"</span>
<span class="na">gie_proxy_nodejs_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10.13.0"</span>
<span class="na">gie_proxy_virtualenv</span><span class="pi">:</span> <span class="s">/srv/galaxy/gie-proxy/venv</span>
<span class="na">gie_proxy_setup_service</span><span class="pi">:</span> <span class="s">systemd</span>
<span class="na">gie_proxy_sessions_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_mutable_data_dir</span><span class="nv"> </span><span class="s">}}/interactivetools_map.sqlite"</span>
</code></pre></div>      </div>

      <p>We have chosen to install Node.js using <a href="https://github.com/ekalinin/nodeenv">nodeenv</a> because the version in the training image’s package manager is fairly old.</p>
    </li>
    <li>
      <p>Add the new role to <code class="language-plaintext highlighter-rouge">galaxy.yml</code>:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span> <span class="s">galaxyservers</span>
  <span class="na">become</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">roles</span><span class="pi">:</span>
    <span class="c1"># ... existing roles ...</span>
    <span class="pi">-</span> <span class="s">geerlingguy.docker</span>
    <span class="pi">-</span> <span class="s">usegalaxy_eu.gie_proxy</span>
</code></pre></div>      </div>
    </li>
    <li>
      <p>Run the playbook:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook galaxy.yml
</code></pre></div>      </div>
    </li>
  </ol>

</blockquote>

<blockquote class="question">
  <div class="box-title question-title" id="question-2"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>What did running the playbook change?</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-2"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-2" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>A new Python venv was created at <code class="language-plaintext highlighter-rouge">/srv/galaxy/gie-proxy/venv</code></li>
      <li>Node.js version 10.13.0 was installed in to the venv</li>
      <li>The proxy was cloned to <code class="language-plaintext highlighter-rouge">/srv/galaxy/gie-proxy/proxy</code></li>
      <li>The proxy’s Node dependencies were installed to <code class="language-plaintext highlighter-rouge">/srv/galaxy/gie-proxy/proxy/node_modules</code> using the venv’s <code class="language-plaintext highlighter-rouge">npm</code></li>
      <li>A systemd service unit was installed at <code class="language-plaintext highlighter-rouge">/etc/systemd/system/galaxy-gie-proxy.service</code></li>
      <li>The systemd daemon was reloaded to read this new service unit</li>
      <li>The service was set to start on boot and started</li>
    </ol>

  </blockquote>

</blockquote>

<p>Because the proxy runs as a systemd service, you can inspect the log of the service using <code class="language-plaintext highlighter-rouge">journalctl</code>. The service name is <code class="language-plaintext highlighter-rouge">galaxy-gie-proxy</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>journalctl <span class="nt">-eu</span> galaxy-gie-proxy
<span class="go">Feb 14 17:38:49 gcc-4 systemd[1]: Started Galaxy IE/IT Proxy.
Feb 14 17:38:49 gcc-4 node[3679]: Watching path /srv/galaxy/var/interactivetools_map.sqlite
</span></code></pre></div></div>

<blockquote class="comment">
  <div class="box-title comment-title" id="comment-note"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment: Note</div>

  <p>You can ignore errors about failing to read the sessions map file for now - Galaxy will create it when it’s needed.</p>

</blockquote>

<h2 id="proxying-the-proxy">Proxying the Proxy</h2>

<p>As explained in the previous section, we will proxy the Interactive Tools Proxy with nginx so that it can serve requests on the standard HTTPS port, 443. Because we’ve configured nginx with Ansible, this is relatively simple.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-installing-the-proxy-with-ansible-1"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Installing the Proxy with Ansible</div>

  <ol>
    <li>
      <p>Edit the group variables file, <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code> and add a new item to the <strong>existing</strong> <code class="language-plaintext highlighter-rouge">nginx_ssl_servers</code> so it matches:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">nginx_ssl_servers</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">galaxy</span>
  <span class="pi">-</span> <span class="s">galaxy-gie-proxy</span>
</code></pre></div>      </div>

      <p>The nginx configuration <code class="language-plaintext highlighter-rouge">galaxy-gie-proxy</code> doesn’t exist yet, but we’ll create it in a moment.</p>
    </li>
    <li>
      <p>Create <code class="language-plaintext highlighter-rouge">templates/nginx/galaxy-gie-proxy.j2</code> with the following contents:</p>

      <div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="c1"># Listen on port 443</span>
    <span class="kn">listen</span>       <span class="s">*:443</span> <span class="s">ssl</span><span class="p">;</span>
    <span class="c1"># Match all requests for the interactive tools subdomain</span>
    <span class="kn">server_name</span>  <span class="s">*.interactivetool.</span><span class="p">{</span><span class="err">{</span> <span class="kn">inventory_hostname</span> <span class="err">}}</span><span class="p">;</span>

    <span class="c1"># Our log files will go here.</span>
    <span class="kn">access_log</span>  <span class="s">syslog:server=unix:/dev/log</span><span class="p">;</span>
    <span class="kn">error_log</span>   <span class="s">syslog:server=unix:/dev/log</span><span class="p">;</span>

    <span class="c1"># Proxy all requests to the GIE Proxy application</span>
    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span>
        <span class="kn">proxy_redirect</span> <span class="no">off</span><span class="p">;</span>
        <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">X-Real-IP</span> <span class="nv">$remote_addr</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">Upgrade</span> <span class="nv">$http_upgrade</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="s">"upgrade"</span><span class="p">;</span>
        <span class="kn">proxy_pass</span> <span class="s">http://localhost:</span><span class="p">{</span><span class="err">{</span> <span class="kn">gie_proxy_port</span> <span class="err">}}</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>
    </li>
    <li>
      <p>Run the playbook:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook galaxy.yml
</code></pre></div>      </div>
    </li>
  </ol>

</blockquote>

<h2 id="getting-a-wildcard-ssl-certificate">Getting a Wildcard SSL Certificate</h2>

<p>During the <a href="/training-material/topics/admin/tutorials/ansible-galaxy/tutorial.html">Galaxy Installation with Ansible</a> tutorial, we acquired an SSL certificate for our Galaxy server from <a href="https://letsencrypt.org/">Let’s Encrypt</a>. This certificate was issued for the hostname of your Galaxy server (e.g. <code class="language-plaintext highlighter-rouge">galaxy.example.org</code>). SSL certificates are valid <em>only for the name to which they were issued</em>. This presents a problem for us due to the way that Galaxy Interactive Tools work.</p>

<p>In order to ensure each Interactive Tool’s cookies are unique, and to provide each tool with a unique entry point, they are served from a subdomain of your Galaxy server (e.g. <code class="language-plaintext highlighter-rouge">&lt;unique-id&gt;.interactivetoolentrypoint.interactivetool.galaxy.example.org</code>). Your SSL cert is not valid for this subdomain. Further, in order to support the random <code class="language-plaintext highlighter-rouge">&lt;unique-id&gt;</code> in the hostname, we need a <em>wildcard certificate</em> for <code class="language-plaintext highlighter-rouge">*.interactivetoolentrypoint.interactivetool.galaxy.example.org</code>.</p>

<p>This process is highly dependent on your site; specifically, your SSL certificate vendor, and your DNS server software or cloud provider.</p>

<p>Let’s Encrypt, the SSL certificate vendor we use in our tutorials, <a href="https://letsencrypt.org/docs/faq/">can only generate wildcard certificates using the DNS-01 challenge method</a>, which works by issuing a <a href="https://en.wikipedia.org/wiki/Dynamic_DNS">dynamic DNS</a> update to set the requested domain’s <code class="language-plaintext highlighter-rouge">TXT</code> record.</p>

<p>If you are completing this tutorial as part of a <a href="https://github.com/galaxyproject/dagobah-training">Galaxy Admin Training</a> course, we might have precreated a dynamic DNS server that you will use for this step. The <em>TSIG key</em> that allows you to perform dynamic DNS updates will be provided to you. Your instructor will also tell you which option to follow (1 or 2), depending on the DNS provider that was chosen for this course.</p>

<p>As we use Let’s Encrypt in staging mode, the wildcard certificates generated with either option 1 or 2 will still be invalid, and you will still see a warning in your web browser when accessing an Interactive Tool. If this warning is not a problem for you, you can just skip this section of the tutorial, and move on to “Enabling Interactive Tools in Galaxy”.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-requesting-a-wildcard-certificate-with-certbot-using-ansible-option-1-rfc2136"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Requesting a Wildcard Certificate with Certbot using Ansible - Option 1 (rfc2136)</div>

  <p>This method uses a DNS provider hosted by the Galaxy Project.</p>

  <ol>
    <li>
      <p>Edit the group variables file, <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code>:</p>

      <p>The relevant variables to set for this role are:</p>

      <table>
        <thead>
          <tr>
            <th>Variable</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">certbot_domains</code></td>
            <td>list</td>
            <td>List of domains to include as subject alternative names (the first will also be the certificate’s <em>common name</em>)</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">certbot_dns_provider</code></td>
            <td>string</td>
            <td>Name of <a href="https://certbot.eff.org/docs/using.html#dns-plugins">Certbot DNS plugin</a> to use</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">certbot_dns_credentials</code></td>
            <td>dictionary</td>
            <td>Plugin-specific credentials for performing dynamic DNS updates</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">certbot_expand</code></td>
            <td>boolean</td>
            <td>Whether to “expand” an existing certificate (add new domain names to it)</td>
          </tr>
        </tbody>
      </table>

      <ul>
        <li>
          <p>Add a new item to the <strong>existing</strong> <code class="language-plaintext highlighter-rouge">certbot_domains</code> list so it matches:</p>

          <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">certbot_domains</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">*.interactivetoolentrypoint.interactivetool.{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div>          </div>
        </li>
        <li>
          <p>Comment out the existing <code class="language-plaintext highlighter-rouge">certbot_auth_method</code> like so:</p>

          <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#certbot_auth_method: --webroot</span>
</code></pre></div>          </div>

          <p>Although this is not explicitly required (setting <code class="language-plaintext highlighter-rouge">certbot_dns_provider</code> as we do overrides this setting), doing so is less confusing in the future, since it makes it clear that the “webroot” method for Let’s Encrypt WEB-01 challenges is no longer in use for this server.</p>
        </li>
        <li>
          <p>Add the following lines to your <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code> file:</p>

          <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">certbot_dns_provider</span><span class="pi">:</span> <span class="s">rfc2136</span>
<span class="na">certbot_dns_credentials</span><span class="pi">:</span>
  <span class="na">server</span><span class="pi">:</span> <span class="s">ns-training.galaxyproject.org</span>
  <span class="na">port</span><span class="pi">:</span> <span class="m">53</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">certbot-training.</span>
  <span class="na">secret</span><span class="pi">:</span> <span class="s">&lt;SECRET PROVIDED BY INSTRUCTOR&gt;</span>
  <span class="na">algorithm</span><span class="pi">:</span> <span class="s">HMAC-SHA512</span>
</code></pre></div>          </div>
        </li>
      </ul>
    </li>
    <li>
      <p>Run the playbook <strong>with <code class="language-plaintext highlighter-rouge">certbot_expand</code></strong>:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook galaxy.yml -e certbot_expand=true
</code></pre></div>      </div>

      <blockquote class="question">
        <div class="box-title question-title" id="question-3"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

        <p>What is the <code class="language-plaintext highlighter-rouge">-e</code> flag to <code class="language-plaintext highlighter-rouge">ansible-playbook</code> and why did we use it?</p>

        <blockquote class="solution">
          <div class="box-title solution-title" id="solution-3"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-3" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

          <p>As per <code class="language-plaintext highlighter-rouge">ansible-playbook --help</code>:</p>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  -e EXTRA_VARS, --extra-vars EXTRA_VARS
                        set additional variables as key=value or YAML/JSON, if
                        filename prepend with @
</code></pre></div>          </div>

          <p>We used this flag because <code class="language-plaintext highlighter-rouge">certbot_expand</code> only needs to be set <em>once</em>, when we are adding a new domain to the certificate. It should not be enabled on subsequent runs of the playbook, or else we would request a new certificate on each run! Thus, it does not make sense to add it to a vars file.</p>

        </blockquote>

      </blockquote>

      <p>Be patient! The certificate request step can take time due to the time allowed for DNS propagation to occur.</p>
    </li>
  </ol>

</blockquote>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-requesting-a-wildcard-certificate-with-certbot-using-ansible-option-2-route53"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Requesting a Wildcard Certificate with Certbot using Ansible - Option 2 (route53)</div>

  <p>This method uses route53, the Amazon Web Services DNS provider. To manage connection to AWS, we will first install a specific role.</p>

  <ol>
    <li>
      <p>In your working directory, add the aws_cli role to your <code class="language-plaintext highlighter-rouge">requirements.yml</code>:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">usegalaxy_eu.aws_cli</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">0.0.1</span>
</code></pre></div>      </div>
    </li>
    <li>
      <p>Install the requirements with <code class="language-plaintext highlighter-rouge">ansible-galaxy</code>:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-galaxy role install -p roles -r requirements.yml
</code></pre></div>      </div>
    </li>
    <li>
      <p>Open <code class="language-plaintext highlighter-rouge">galaxy.yml</code> with your text editor to add the role <code class="language-plaintext highlighter-rouge">usegalaxy_eu.aws_cli</code> just before the nginx role:</p>

      <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/galaxy.yml b/galaxy.yml
</span><span class="gd">--- a/galaxy.yml
</span><span class="gi">+++ b/galaxy.yml
</span><span class="p">@@ -21,6 +21,7 @@</span>
       become: true
       become_user: galaxy
     - usegalaxy_eu.galaxy_systemd
<span class="gi">+    - usegalaxy_eu.aws_cli
</span>     - galaxyproject.nginx
     - geerlingguy.docker
     - usegalaxy_eu.gie_proxy
</code></pre></div>      </div>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-how-to-read-a-diff"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-how-to-read-a-diff" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> Tip: How to read a Diff<span class="fold-unfold fa fa-minus-square"></span></button></div>   <p>If you haven’t worked with diffs before, this can be something quite new or different.</p>   <p>If we have two files, let’s say a grocery list, in two files. We’ll call them ‘a’ and ‘b’.</p>   <blockquote class="code-2col">   <blockquote class="code-in">     <div class="box-title code-in-title" id="code-in-old"><i class="far fa-keyboard" aria-hidden="true" ></i> Input: Old</div>     <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat old<br />🍎<br />🍐<br />🍊<br />🍋<br />🍒<br />🥑<br /></code></pre></div>    </div>   </blockquote>   <blockquote class="code-out">     <div class="box-title code-out-title" id="code-out-new"><i class="fas fa-laptop-code" aria-hidden="true" ></i> Output: New</div>     <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat new<br />🍎<br />🍐<br />🍊<br />🍋<br />🍍<br />🥑<br /></code></pre></div>    </div>   </blockquote> </blockquote>   <p>We can see that they have some different entries. We’ve removed 🍒 because they’re awful, and replaced them with an 🍍</p>   <p>Diff lets us compare these files</p>   <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>diff old new<br />5c5<br />&lt; 🍒<br /><span class="nt">---</span><br /><span class="o">&gt;</span> 🍍<br /></code></pre></div></div>   <p>Here we see that 🍒 is only in a, and 🍍 is only in b. But otherwise the files are identical.</p>   <p>There are a couple different formats to diffs, one is the ‘unified diff’</p>   <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>diff <span class="nt">-U2</span> old new<br /><span class="nt">---</span> old	2022-02-16 14:06:19.697132568 +0100<br />+++ new	2022-02-16 14:06:36.340962616 +0100<br />@@ <span class="nt">-3</span>,4 +3,4 @@<br /> 🍊<br /> 🍋<br />-🍒<br />+🍍<br /> 🥑<br /></code></pre></div></div>   <p>This is basically what you see in the training materials which gives you a lot of context about the changes:</p>   <ul>   <li><code class="language-plaintext highlighter-rouge">--- old</code> is the ‘old’ file in our view</li>   <li><code class="language-plaintext highlighter-rouge">+++ new</code> is the ‘new’ file</li>   <li>@@ these lines tell us where the change occurs and how many lines are added or removed.</li>   <li>Lines starting with a - are removed from our ‘new’ file</li>   <li>Lines with a + have been added.</li> </ul>   <p>So when you go to apply these diffs to your files in the training:</p>   <ol>   <li>Ignore the header</li>   <li>Remove lines starting with - from your file</li>   <li>Add lines starting with + to your file</li> </ol>   <p>The other lines (🍊/🍋 and 🥑) above just provide “context”, they help you know where a change belongs in a file, but <strong>should not be edited</strong> when you’re making the above change. Given the above diff, you would find a line with a 🍒, and replace it with a 🍍</p>   <h4 id="added--removed-lines">Added &amp; Removed Lines</h4>   <p>Removals are very easy to spot, we just have removed lines</p>   <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">---</span> old	2022-02-16 14:06:19.697132568 +0100<br />+++ new	2022-02-16 14:10:14.370722802 +0100<br />@@ <span class="nt">-4</span>,3 +4,2 @@<br /> 🍋<br /> 🍒<br />-🥑<br /></code></pre></div></div>   <p>And additions likewise are very easy, just add a new line, between the other lines in your file.</p>   <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">---</span> old	2022-02-16 14:06:19.697132568 +0100<br />+++ new	2022-02-16 14:11:11.422135393 +0100<br />@@ <span class="nt">-1</span>,3 +1,4 @@<br /> 🍎<br />+🍍<br /> 🍐<br /> 🍊<br /></code></pre></div></div>   <h4 id="completely-new-files">Completely new files</h4>   <p>Completely new files look a bit different, there the “old” file is <code class="language-plaintext highlighter-rouge">/dev/null</code>, the empty file in a Linux machine.</p>   <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>diff <span class="nt">-U2</span> /dev/null old<br /><span class="nt">---</span> /dev/null	2022-02-15 11:47:16.100000270 +0100<br />+++ old	2022-02-16 14:06:19.697132568 +0100<br />@@ <span class="nt">-0</span>,0 +1,6 @@<br />+🍎<br />+🍐<br />+🍊<br />+🍋<br />+🍒<br />+🥑<br /></code></pre></div></div>   <p>And removed files are similar, except with the new file being /dev/null</p>   <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">---</span> old	2022-02-16 14:06:19.697132568 +0100<br />+++ /dev/null	2022-02-15 11:47:16.100000270 +0100<br />@@ <span class="nt">-1</span>,6 +0,0 @@<br />-🍎<br />-🍐<br />-🍊<br />-🍋<br />-🍒<br />-🥑<br /></code></pre></div></div> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
    <li>
      <p>Edit the group variables file, <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code>:</p>

      <p>The relevant variables to set for this role are:</p>

      <table>
        <thead>
          <tr>
            <th>Variable</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">certbot_domains</code></td>
            <td>list</td>
            <td>List of domains to include as subject alternative names (the first will also be the certificate’s <em>common name</em>)</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">certbot_dns_provider</code></td>
            <td>string</td>
            <td>Name of <a href="https://certbot.eff.org/docs/using.html#dns-plugins">Certbot DNS plugin</a> to use</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">certbot_dns_credentials</code></td>
            <td>dictionary</td>
            <td>Plugin-specific credentials for performing dynamic DNS updates</td>
          </tr>
          <tr>
            <td><code class="language-plaintext highlighter-rouge">certbot_expand</code></td>
            <td>boolean</td>
            <td>Whether to “expand” an existing certificate (add new domain names to it)</td>
          </tr>
        </tbody>
      </table>

      <ul>
        <li>
          <p>Add a new item to the <strong>existing</strong> <code class="language-plaintext highlighter-rouge">certbot_domains</code> list so it matches:</p>

          <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">certbot_domains</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">*.interactivetoolentrypoint.interactivetool.{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div>          </div>
        </li>
        <li>
          <p>Comment out the existing <code class="language-plaintext highlighter-rouge">certbot_auth_method</code> like so:</p>

          <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#certbot_auth_method: --webroot</span>
</code></pre></div>          </div>

          <p>Although this is not explicitly required (setting <code class="language-plaintext highlighter-rouge">certbot_dns_provider</code> as we do overrides this setting), doing so is less confusing in the future, since it makes it clear that the “webroot” method for Let’s Encrypt WEB-01 challenges is no longer in use for this server.</p>
        </li>
        <li>
          <p>Add the following lines to your <code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code> file:</p>

          <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">certbot_dns_provider</span><span class="pi">:</span> <span class="s">route53</span>
<span class="na">aws_cli_credentials</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">&lt;SECRET</span><span class="nv"> </span><span class="s">PROVIDED</span><span class="nv"> </span><span class="s">BY</span><span class="nv"> </span><span class="s">INSTRUCTOR&gt;"</span>
    <span class="na">secret_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">&lt;SECRET</span><span class="nv"> </span><span class="s">PROVIDED</span><span class="nv"> </span><span class="s">BY</span><span class="nv"> </span><span class="s">INSTRUCTOR&gt;"</span>
    <span class="na">homedir</span><span class="pi">:</span> <span class="s">/root</span>
    <span class="na">owner</span><span class="pi">:</span> <span class="s">root</span>
    <span class="na">group</span><span class="pi">:</span> <span class="s">root</span>
</code></pre></div>          </div>
        </li>
      </ul>
    </li>
    <li>
      <p>Run the playbook <strong>with <code class="language-plaintext highlighter-rouge">certbot_expand</code></strong>:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook galaxy.yml -e certbot_expand=true
</code></pre></div>      </div>

      <blockquote class="question">
        <div class="box-title question-title" id="question-4"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

        <p>What is the <code class="language-plaintext highlighter-rouge">-e</code> flag to <code class="language-plaintext highlighter-rouge">ansible-playbook</code> and why did we use it?</p>

        <blockquote class="solution">
          <div class="box-title solution-title" id="solution-4"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-4" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

          <p>As per <code class="language-plaintext highlighter-rouge">ansible-playbook --help</code>:</p>

          <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  -e EXTRA_VARS, --extra-vars EXTRA_VARS
                        set additional variables as key=value or YAML/JSON, if
                        filename prepend with @
</code></pre></div>          </div>

          <p>We used this flag because <code class="language-plaintext highlighter-rouge">certbot_expand</code> only needs to be set <em>once</em>, when we are adding a new domain to the certificate. It should not be enabled on subsequent runs of the playbook, or else we would request a new certificate on each run! Thus, it does not make sense to add it to a vars file.</p>

        </blockquote>

      </blockquote>
    </li>
  </ol>

</blockquote>

<p>You can verify that your certificate has been expanded using your browser’s developer tools:</p>

<p><a href="../../images/interactive-tools/wildcard-cert.png" rel="noopener noreferrer"><figure id="figure-2" style="max-width: 90%; margin:auto;"><img src="../../images/interactive-tools/wildcard-cert.png" alt="Wildcard Certificate Dialog. " width="2084" height="942" loading="lazy" />&lt;figcaption&gt;<span class="figcaption-prefix"><strong>Figure 2</strong>:</span> Wildcard Certificate Dialog&lt;/figcaption&gt;</figure></a></p>

<h2 id="enabling-interactive-tools-in-galaxy">Enabling Interactive Tools in Galaxy</h2>

<p>A few Interactive Tool wrappers are provided with Galaxy, but they are <a href="https://github.com/galaxyproject/galaxy/blob/9d788cb144a18570e7e5e948ac1f7bc04fec4e75/lib/galaxy/config/sample/tool_conf.xml.sample#L126">commented out in Galaxy’s default tool config file</a>. As a result, we need to instruct the <a href="https://github.com/galaxyproject/ansible-galaxy">galaxyproject.galaxy role</a> to install a tool panel configuration file containing at least one of these tools in order to try them out. For the purposes of this tutorial, a good choice is the <a href="https://ethercalc.net/">EtherCalc</a> GxIT, because it has a relatively small <a href="https://hub.docker.com/r/shiltemann/ethercalc-galaxy-ie">Docker image</a>.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-enabling-interactive-tools-in-galaxy"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Enabling Interactive Tools in Galaxy</div>

  <ol>
    <li>
      <p>Rather than modifying the default tool configuration file, we’ll add a new one that only references the Interactive Tools. This way, the default set of tools will still load without us having to incorporate the entire default tool config into our playbook.</p>

      <p>If the folder does not exist, create <code class="language-plaintext highlighter-rouge">templates/galaxy/config</code> next to your <code class="language-plaintext highlighter-rouge">galaxy.yml</code> (<code class="language-plaintext highlighter-rouge">mkdir -p templates/galaxy/config/</code>)</p>

      <p>Create <code class="language-plaintext highlighter-rouge">templates/galaxy/config/tool_conf_interactive.xml.j2</code> with the following contents:</p>

      <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;toolbox</span> <span class="na">monitor=</span><span class="s">"true"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"interactivetools"</span> <span class="na">name=</span><span class="s">"Interactive Tools"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tool</span> <span class="na">file=</span><span class="s">"interactive/interactivetool_ethercalc.xml"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/section&gt;</span>
<span class="nt">&lt;/toolbox&gt;</span>
</code></pre></div>      </div>
    </li>
    <li>
      <p>We need to modify <code class="language-plaintext highlighter-rouge">job_conf.xml</code> to instruct Galaxy on how to run Interactive Tools (and specifically, how to run them in Docker). We will begin with a basic job conf:</p>

      <p>Create <code class="language-plaintext highlighter-rouge">templates/galaxy/config/job_conf.xml.j2</code> with the following contents:</p>

      <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;job_conf&gt;</span>
    <span class="nt">&lt;plugins</span> <span class="na">workers=</span><span class="s">"4"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;plugin</span> <span class="na">id=</span><span class="s">"local"</span> <span class="na">type=</span><span class="s">"runner"</span> <span class="na">load=</span><span class="s">"galaxy.jobs.runners.local:LocalJobRunner"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;destinations&gt;</span>
        <span class="nt">&lt;destination</span> <span class="na">id=</span><span class="s">"local"</span> <span class="na">runner=</span><span class="s">"local"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/destinations&gt;</span>
<span class="nt">&lt;/job_conf&gt;</span>
</code></pre></div>      </div>

      <blockquote class="comment">
        <div class="box-title comment-title" id="comment-note-1"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment: Note</div>
        <p>Depending on the order in which you are completing this tutorial in relation to other tutorials, you may have already created the <code class="language-plaintext highlighter-rouge">job_conf.xml.j2</code> file, as well as defined <code class="language-plaintext highlighter-rouge">galaxy_config_templates</code> and set the <code class="language-plaintext highlighter-rouge">job_config_file</code> option in <code class="language-plaintext highlighter-rouge">galaxy_config</code> (step 4). If this is the case, be sure to <strong>merge the changes in this section with your existing playbook</strong>.</p>
      </blockquote>
    </li>
    <li>
      <p>Next, we need to configure the interactive tools destination. First, we explicitly set the destination to the default <code class="language-plaintext highlighter-rouge">local</code> destination since there will now be two destinations defined. Then we add a destination for submitting jobs as docker containers using the <a href="https://github.com/galaxyproject/galaxy/blob/6622ad1acb91866febb3d2f229de7cfb8af3a9f6/lib/galaxy/config/sample/job_conf.xml.sample_advanced#L410">advanced sample job configuration</a> as a guide. Finally, use the <a href="https://github.com/galaxyproject/galaxy/blob/6622ad1acb91866febb3d2f229de7cfb8af3a9f6/tools/interactive/interactivetool_ethercalc.xml">EtherCalc GxIT’s</a> tool ID to route executions of the EtherCalc GxIT to the newly created destination:</p>

      <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">--- a/templates/galaxy/config/job_conf.xml.j2
</span><span class="gi">+++ b/templates/galaxy/config/job_conf.xml.j2
</span>     &lt;plugins workers="4"&gt;
         &lt;plugin id="local" type="runner" load="galaxy.jobs.runners.local:LocalJobRunner"/&gt;
     &lt;/plugins&gt;
<span class="gd">-    &lt;destinations&gt;
</span><span class="gi">+    &lt;destinations default="local"&gt;
</span>         &lt;destination id="local" runner="local"/&gt;
<span class="gi">+        &lt;destination id="interactive_local" runner="local"&gt;
+            &lt;param id="docker_enabled"&gt;true&lt;/param&gt;
+            &lt;param id="docker_volumes"&gt;$defaults&lt;/param&gt;
+            &lt;param id="docker_sudo"&gt;false&lt;/param&gt;
+            &lt;param id="docker_net"&gt;bridge&lt;/param&gt;
+            &lt;param id="docker_auto_rm"&gt;true&lt;/param&gt;
+            &lt;param id="docker_set_user"&gt;&lt;/param&gt;
+            &lt;param id="require_container"&gt;true&lt;/param&gt;
+        &lt;/destination&gt;
</span>     &lt;/destinations&gt;
<span class="gi">+    &lt;tools&gt;
+        &lt;tool destination="interactive_local" id="interactive_tool_ethercalc" /&gt;
+    &lt;/tools&gt;
</span> &lt;/job_conf&gt;
</code></pre></div>      </div>

      <p>Of considerable note is the <code class="language-plaintext highlighter-rouge">docker_volumes</code> param: the variable expansions are explained in the <a href="https://github.com/galaxyproject/galaxy/blob/6622ad1acb91866febb3d2f229de7cfb8af3a9f6/lib/galaxy/config/sample/job_conf.xml.sample_advanced#L410">advanced sample job configuration</a>.  We’ll use this volume configuration for now but it has some considerable data security problems. We’ll discuss a better solution at the end of this tutorial.</p>
    </li>
    <li>
      <p>Inform <code class="language-plaintext highlighter-rouge">galaxyproject.galaxy</code> of what tool configuration files to load in your group variables (<code class="language-plaintext highlighter-rouge">group_vars/galaxyservers.yml</code>):</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">galaxy_tool_config_files</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_server_dir</span><span class="nv"> </span><span class="s">}}/config/tool_conf.xml.sample"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_config_dir</span><span class="nv"> </span><span class="s">}}/tool_conf_interactive.xml"</span>
</code></pre></div>      </div>

      <p>Next, inform <code class="language-plaintext highlighter-rouge">galaxyproject.galaxy</code> of where you would like the <code class="language-plaintext highlighter-rouge">job_conf.xml</code> to reside, that GxITs should be enabled, and where the GxIT map database can be found. Watch for other conflicting configurations from previous tutorials (e.g. <code class="language-plaintext highlighter-rouge">job_config: ...</code>):</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">galaxy_config</span><span class="pi">:</span>
  <span class="na">galaxy</span><span class="pi">:</span>
    <span class="c1"># ... existing configuration options in the `galaxy` section ...</span>
    <span class="na">job_config_file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_config_dir</span><span class="nv"> </span><span class="s">}}/job_conf.xml"</span>
    <span class="na">interactivetools_enable</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">interactivetools_map</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">gie_proxy_sessions_path</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div>      </div>

      <p>And then deploy the new config templates using the <code class="language-plaintext highlighter-rouge">galaxy_config_templates</code> var in your group vars:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">galaxy_config_templates</span><span class="pi">:</span>
  <span class="c1"># ... possible existing config file definitions</span>
  <span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">templates/galaxy/config/tool_conf_interactive.xml.j2</span>
    <span class="na">dest</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_config_dir</span><span class="nv"> </span><span class="s">}}/tool_conf_interactive.xml"</span>
  <span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">templates/galaxy/config/job_conf.xml.j2</span>
    <span class="na">dest</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_config.galaxy.job_config_file</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div>      </div>
    </li>
    <li>
      <p>Run the playbook:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook galaxy.yml
</code></pre></div>      </div>
    </li>
    <li>
      <p>Follow the Galaxy logs with <code class="language-plaintext highlighter-rouge">journalctl -f -u galaxy</code></p>
    </li>
  </ol>

</blockquote>

<h2 id="run-an-interactive-tool">Run an Interactive Tool</h2>

<p>You should now be ready to run an Interactive Tool in Galaxy!</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-running-an-interactive-tool"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Running an Interactive Tool</div>

  <ol>
    <li>Ensure that you are logged in to your Galaxy server by checking the <strong>User</strong> menu in the masthead.</li>
    <li>
      <p>We’ll need an input for our test GxIT (EtherCalc). Any tabular file can be used, such as Galaxy’s <a href="https://raw.githubusercontent.com/galaxyproject/galaxy/release_20.01/test-data/1.tabular">1.tabular</a> test data. Copy this file’s URL:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://raw.githubusercontent.com/galaxyproject/galaxy/release_20.01/test-data/1.tabular
</code></pre></div>      </div>
    </li>
    <li>Click <i class="fas fa-upload" aria-hidden="true"></i><span class="visually-hidden">galaxy-upload</span> <strong>Upload</strong> at the top of the tool panel (on the left side of the Galaxy UI).</li>
    <li>In the resulting modal dialog, click the <strong>Paste/Fetch data</strong> button.</li>
    <li>Paste the URL in the <strong>text field</strong> that has just appeared.</li>
    <li>Give the new dataset a name such as <code class="language-plaintext highlighter-rouge">tabular</code>, if you like.</li>
    <li>Click <strong>Start</strong> and then <strong>Close</strong>.</li>
    <li>From the tool menu, click the <strong>Interactive Tools</strong> section, then click <strong>EtherCalc</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>.</li>
    <li>Ensure that your newly uploaded tabular dataset is selected as the input <strong>Some tabular dataset</strong>, then click <strong>Execute</strong>.</li>
    <li>
      <p>Monitor the blue <strong>info box</strong> on the next page, which will inform you when the Interactive Tool is accessible and provide you with a link to access it.</p>

      <p><br /></p>

      <p>If you navigate away from this page, you can view your running Interactive Tools from the <strong>Active InteractiveTools</strong> menu item in the <strong>User</strong> menu.</p>
    </li>
    <li>Click the <strong>click here to display</strong> link.</li>
  </ol>

</blockquote>

<p>If everything has worked correctly, your browser will load EtherCalc with your tabular data preloaded. Once you’re done working with the data, return to Galaxy and stop EtherCalc by deleting its output dataset from your history, or stopping it via the interface from the <strong>Active InteractiveTools</strong> menu item in the <strong>User</strong> menu.</p>

<h2 id="securing-interactive-tools">Securing Interactive Tools</h2>

<p>Inspecting the Docker container of a running Interactive Tool shows the volume configuration expanded from <code class="language-plaintext highlighter-rouge">$galaxy_root</code> in the job destination’s <code class="language-plaintext highlighter-rouge">docker_volumes</code> param:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker inspect <span class="si">$(</span>docker ps <span class="nt">-q</span><span class="si">)</span> | jq <span class="s1">'.[0].HostConfig.Binds'</span>
<span class="go">[
</span><span class="gp">  "/srv/galaxy/server:/srv/galaxy/server:ro",                                     #</span><span class="w"> </span>Galaxy server <span class="nb">dir</span>
<span class="gp">  "/srv/galaxy/server/tools/interactive:/srv/galaxy/server/tools/interactive:ro", #</span><span class="w"> </span>EtherCalc tool wrapper parent <span class="nb">dir</span>
<span class="gp">  "/srv/galaxy/jobs/000/1:/srv/galaxy/jobs/000/1:ro",                             #</span><span class="w"> </span>Per-job root <span class="nb">dir</span>
<span class="gp">  "/srv/galaxy/jobs/000/1/outputs:/srv/galaxy/jobs/000/1/outputs:rw",             #</span><span class="w"> </span>Job outputs <span class="nb">dir</span>
<span class="gp">  "/srv/galaxy/jobs/000/1/configs:/srv/galaxy/jobs/000/1/configs:rw",             #</span><span class="w"> </span>Job config files <span class="nb">dir</span>
<span class="gp">  "/srv/galaxy/jobs/000/1/working:/srv/galaxy/jobs/000/1/working:rw",             #</span><span class="w"> </span>Job working <span class="o">(</span>cwd<span class="o">)</span> <span class="nb">dir</span>
<span class="gp">  "/data:/data:rw",                                                               #</span><span class="w"> </span>GALAXY USER DATASETS DIR <span class="o">(</span>RW!<span class="o">)</span>
<span class="gp">  "/srv/galaxy/server/tool-data:/srv/galaxy/server/tool-data:ro"                  #</span><span class="w"> </span>Galaxy reference data <span class="nb">dir</span>
<span class="go">]
</span></code></pre></div></div>

<p>As hinted earlier, there is a concerning state here: The directory containing <strong>all</strong> of the the user-generated data in Galaxy (not just the data for this job) has been mounted <strong>read-write</strong> in to the container. <strong>This configuration grants users running interactive tools full access to all the data in Galaxy, which is a very bad idea.</strong> Unlike standard Galaxy tools, where the tool’s design prevents users from writing to arbitrary paths, Interactive Tools are fully user controllable. Although EtherCalc does not provide a mechanism for writing to this path, other Interactive Tools (such as Jupyter Notebook) do.</p>

<p>Two solutions are discussed in the <a href="https://github.com/galaxyproject/galaxy/blob/6622ad1acb91866febb3d2f229de7cfb8af3a9f6/lib/galaxy/config/sample/job_conf.xml.sample_advanced#L410">advanced sample job configuration</a>:</p>

<ol>
  <li>Use the <code class="language-plaintext highlighter-rouge">outputs_to_working_directory</code> job configuration option, which allows you to mount datasets read-only: this prevents manipulation, but still allows GxIT users to read any dataset in your Galaxy server.</li>
  <li>Use <a href="https://github.com/galaxyproject/pulsar">Pulsar</a>, Galaxy’s remote job execution engine, to provide full job isolation: this avoids all access to Galaxy data, with the performance penalty of copying input dataset(s) to the job directory.</li>
</ol>

<p>Because we want to maintain dataset privacy, Pulsar is the better choice here. And in fact, we don’t even need to set up a Pulsar server: because we only need Pulsar’s input staging and isolation features, we can use <a href="https://github.com/galaxyproject/galaxy/blob/6622ad1acb91866febb3d2f229de7cfb8af3a9f6/lib/galaxy/config/sample/job_conf.xml.sample_advanced#L106">Embedded Pulsar</a>, which runs a Pulsar server within the Galaxy application to perform these tasks. Embedded Pulsar can even interface with your distributed resource manager (aka cluster scheduler) of choice, as long as your Galaxy server and cluster both have access to a common filesystem (otherwise, you will need to use Pulsar in standalone mode; see the <a href="/training-material/topics/admin/tutorials/pulsar/tutorial.html">Running Jobs on Remote Resources with Pulsar</a> tutorial).</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-running-interactive-tools-with-embedded-pulsar"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Running Interactive Tools with Embedded Pulsar</div>

  <ol>
    <li>
      <p>Create a configuration file <em>template</em> for the Pulsar application at <code class="language-plaintext highlighter-rouge">templates/galaxy/config/pulsar_app.yml.j2</code>.</p>

      <p><br /></p>

      <p>If the folder does not exist, create <code class="language-plaintext highlighter-rouge">templates/galaxy/config</code> next to your <code class="language-plaintext highlighter-rouge">galaxy.yml</code> (<code class="language-plaintext highlighter-rouge">mkdir -p templates/galaxy/config/</code>).</p>

      <p><br /></p>

      <p>Add the following contents to the template:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>

<span class="c1"># The path where per-job directories will be created</span>
<span class="na">staging_directory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_job_working_directory</span><span class="nv"> </span><span class="s">}}/_interactive"</span>

<span class="c1"># Where Pulsar state information will be stored (e.g. currently active jobs)</span>
<span class="na">persistence_directory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_mutable_data_dir</span><span class="nv"> </span><span class="s">}}/pulsar"</span>

<span class="c1"># Where to find Galaxy tool dependencies</span>
<span class="na">tool_dependency_dir</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_tool_dependency_dir</span><span class="nv"> </span><span class="s">}}"</span>

<span class="c1"># How to run jobs (see https://pulsar.readthedocs.io/en/latest/job_managers.html)</span>
<span class="na">managers</span><span class="pi">:</span>
  <span class="na">_default_</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">queued_python</span>
    <span class="na">num_concurrent_jobs</span><span class="pi">:</span> <span class="m">1</span>
</code></pre></div>      </div>
    </li>
    <li>
      <p>Modify the job configuration file, <code class="language-plaintext highlighter-rouge">templates/galaxy/config/job_conf.xml.j2</code>, to configure Interactive Tools to use the embedded Pulsar runner.</p>

      <p><br /></p>

      <p><strong>Add</strong> the embedded Pulsar runner plugin to the <code class="language-plaintext highlighter-rouge">&lt;plugins&gt;</code> section of the config:</p>

      <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin</span> <span class="na">id=</span><span class="s">"pulsar_embedded"</span> <span class="na">type=</span><span class="s">"runner"</span> <span class="na">load=</span><span class="s">"galaxy.jobs.runners.pulsar:PulsarEmbeddedJobRunner"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">id=</span><span class="s">"pulsar_config"</span><span class="nt">&gt;</span>/srv/galaxy/config/pulsar_app.yml<span class="nt">&lt;/param&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div>      </div>

      <blockquote class="tip">
        <div class="box-title tip-title" id="tip-ansible-best-practices"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-ansible-best-practices" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> Tip: Ansible Best Practices<span class="fold-unfold fa fa-minus-square"></span></button></div>
        <p>We have used a bit of bad practice here: hardcoding the Pulsar config file path in to the job config file. At this point, we should convert the job config file to a template (in the same manner as the Pulsar config template). The reason we don’t do it in this tutorial is to maintain compatibility with other tutorials, but you may do so by following the same pattern as is used for the Pulsar config template.</p>
      </blockquote>

      <p>Next, <strong>modify</strong> the <code class="language-plaintext highlighter-rouge">interactive_local</code> destination to use the new runner and set the new parameter <code class="language-plaintext highlighter-rouge">container_monitor_result</code> to <code class="language-plaintext highlighter-rouge">callback</code> (explained in more detail in the next step):</p>

      <blockquote class="warning">
        <div class="box-title warning-title" id="warning-untrusted-ssl-certificates"><i class="fas fa-exclamation-triangle" aria-hidden="true" ></i> Warning: Untrusted SSL Certificates</div>
        <p>If you are completing this tutorial as part of a <a href="https://github.com/galaxyproject/dagobah-training">Galaxy Admin Training</a> course, you will also need the <code class="language-plaintext highlighter-rouge">&lt;env&gt;</code> setting shown below to prevent problems with the untrusted SSL certificates in use during the course. Galaxy servers with valid SSL certificates <em>do not need this option</em>.</p>
      </blockquote>

      <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">--- a/templates/galaxy/config/job_conf.xml.j2
</span><span class="gi">+++ b/templates/galaxy/config/job_conf.xml.j2
</span>     &lt;destinations default="local"&gt;
         &lt;destination id="local" runner="local"/&gt;
<span class="gd">-        &lt;destination id="interactive_local" runner="local"&gt;
</span><span class="gi">+        &lt;destination id="interactive_local" runner="pulsar_embedded"&gt;
</span>             &lt;param id="docker_enabled"&gt;true&lt;/param&gt;
             &lt;param id="docker_volumes"&gt;$defaults&lt;/param&gt;
             &lt;param id="docker_sudo"&gt;false&lt;/param&gt;
             &lt;param id="docker_net"&gt;bridge&lt;/param&gt;
             &lt;param id="docker_auto_rm"&gt;true&lt;/param&gt;
             &lt;param id="docker_set_user"&gt;&lt;/param&gt;
             &lt;param id="require_container"&gt;true&lt;/param&gt;
<span class="gi">+            &lt;param id="container_monitor_result"&gt;callback&lt;/param&gt;
+            &lt;env id="REQUESTS_CA_BUNDLE"&gt;/etc/ssl/certs/ca-certificates.crt&lt;/env&gt;
</span>         &lt;/destination&gt;
     &lt;/destinations&gt;
</code></pre></div>      </div>
    </li>
    <li>
      <p>Open your <code class="language-plaintext highlighter-rouge">galaxyservers</code> group variables file and instruct <code class="language-plaintext highlighter-rouge">galaxyproject.galaxy</code> to install the Pulsar configuration file:</p>

      <blockquote class="comment">
        <div class="box-title comment-title" id="comment-note-2"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment: Note</div>
        <p>Depending on the order in which you are completing this tutorial in relation to other tutorials, you may have already defined <code class="language-plaintext highlighter-rouge">galaxy_config_templates</code>. If this is the case, be sure to <strong>merge the changes in this step with your existing playbook</strong>.</p>
      </blockquote>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">galaxy_config_templates</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">templates/galaxy/config/pulsar_app.yml.j2</span>
    <span class="na">dest</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">galaxy_config_dir</span><span class="nv"> </span><span class="s">}}/pulsar_app.yml"</span>
</code></pre></div>      </div>

      <p>Additionally, you will need to set the <code class="language-plaintext highlighter-rouge">galaxy_infrastructure_url</code> config option:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">galaxy_config</span><span class="pi">:</span>
  <span class="na">galaxy</span><span class="pi">:</span>
    <span class="c1"># ... existing configuration options in the `galaxy` section ...</span>
    <span class="na">galaxy_infrastructure_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}/"</span>
</code></pre></div>      </div>

      <blockquote class="details">
        <div class="box-title details-title" id="details-detail-infrastructure-url-callback"><button class="gtn-boxify-button details" type="button" aria-controls="details-detail-infrastructure-url-callback" aria-expanded="true"><i class="fas fa-info-circle" aria-hidden="true" ></i> Details: Detail: Infrastructure URL/Callback<span class="fold-unfold fa fa-minus-square"></span></button></div>
        <p>Galaxy must be made aware of the randomly selected port Docker has assigned after the GxIT begins operating, in order to update the proxy map. By default, this is done by writing a JSON file in the job directory. This method does not work with Pulsar since Pulsar uses a different job directory from the Galaxy job directory. As a result, Pulsar jobs use the <code class="language-plaintext highlighter-rouge">callback</code> method configured in the previous step to make a request to Galaxy’s API, the URL for which is set in <code class="language-plaintext highlighter-rouge">galaxy_infrastructure_url</code>.</p>
      </blockquote>
    </li>
    <li>
      <p>Run the playbook:</p>

      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook galaxy.yml
</code></pre></div>      </div>
    </li>
  </ol>

</blockquote>

<p>Once the playbook run is complete and your Galaxy server has restarted, run the EtherCalc Interactive Tool again.</p>

<blockquote class="question">
  <div class="box-title question-title" id="question-5"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>Once EtherCalc is running, check the mounts of its container. What do you observe?</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-5"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-5" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker inspect <span class="si">$(</span>docker ps <span class="nt">-q</span><span class="si">)</span> | jq <span class="s1">'.[0].HostConfig.Binds'</span>
<span class="go">[
</span><span class="gp">  "/srv/galaxy/jobs/_interactive/2:/srv/galaxy/jobs/_interactive/2:ro",                       #</span><span class="w"> </span>Per-job root <span class="nb">dir</span>
<span class="gp">  "/srv/galaxy/jobs/_interactive/2/tool_files:/srv/galaxy/jobs/_interactive/2/tool_files:ro", #</span><span class="w"> </span>EtherCalc tool wrapper parent <span class="nb">dir</span>
<span class="gp">  "/srv/galaxy/jobs/_interactive/2/outputs:/srv/galaxy/jobs/_interactive/2/outputs:rw",       #</span><span class="w"> </span>Job outputs <span class="nb">dir</span>
<span class="gp">  "/srv/galaxy/jobs/_interactive/2/working:/srv/galaxy/jobs/_interactive/2/working:rw",       #</span><span class="w"> </span>Job working <span class="o">(</span>cwd<span class="o">)</span> <span class="nb">dir</span>
<span class="gp">  "/srv/galaxy/server/tool-data:/srv/galaxy/server/tool-data:ro"                              #</span><span class="w"> </span>Galaxy reference data <span class="nb">dir</span>
<span class="go">]
</span></code></pre></div>    </div>

    <p>Of note, the user data directory, <code class="language-plaintext highlighter-rouge">/data</code>, is no longer mounted in the container!</p>

  </blockquote>

</blockquote>

<h1 id="final-notes">Final Notes</h1>

<p>As mentioned at the beginning of this tutorial, Galaxy Interactive Tools are a relatively new and rapidly evolving feature. At the time of writing, there is no official documentation for Interactive Tools. Please watch the <a href="https://docs.galaxyproject.org/en/master/releases/index.html">Galaxy Release Notes</a> for updates, changes, new documentation, and bug fixes.</p>


                </section>

                <section aria-label="Tutorial Footer, Feedback, Citation" id="tutorial-footer">
                
                <blockquote class="key_points">
                    <div class="box-title"><i class="fas fa-key" aria-hidden="true"></i> Key points</div>
                    <ul>
                        
                        <li><p>Galaxy Interactive Tools run as jobs in largely the same manner as any other Galaxy job</p>
</li>
                        
                        <li><p>nginx routes GxIT requests to the GxIT(/GIE) Proxy, which routes them to the node/port on which the GxIT is running</p>
</li>
                        
                        <li><p>GxITs require wildcard SSL certificates</p>
</li>
                        
                        <li><p>GxITs expose your Galaxy server’s user datasets unless configured to use Pulsar</p>
</li>
                        
                    </ul>
                </blockquote>
                

                <h1>Frequently Asked Questions</h1>
                Have questions about this tutorial? Check out the <a href="faqs/">tutorial FAQ page</a> or the  <a href="/training-material/topics/admin/faqs/">FAQ page for the Galaxy Server administration topic</a> to see if your question is listed there.
                If not, please ask your question on the <a href="https://gitter.im/Galaxy-Training-Network/Lobby">GTN Gitter Channel</a> or the
                <a href="https://help.galaxyproject.org">Galaxy Help Forum</a>

                

                


                

                

                <h1>Feedback</h1>
                <p class="text-muted">Did you use this material as an instructor? Feel free to give us feedback on <a href="https://github.com/galaxyproject/training-material/issues/1452">how it went</a>.
                <br>Did you use this material as a learner or student? Click the form below to leave feedback.<i class="fas fa-hand-point-down"></i>
                </p>

                <a href="https://docs.google.com/forms/d/e/1FAIpQLSd4VZptFTQ03kHkMz0JyW9b6_S8geU5KjNE_tLM0dixT3ZQmA/viewform?embedded=true&entry.1235803833=Galaxy Interactive Tools (Galaxy Server administration)" alt="Feedback form link">
                    <img src="/training-material/shared/images/feedback.png" alt="Preview of the google form" />
                </a>

                <h1>Citing this Tutorial</h1>
                <p>
                    <ol>
                        <li id="citation-text">
                            Nate Coraor, Simon Gladman, Helena Rasche, Anthony Bretaudeau,  <b>Galaxy Interactive Tools (Galaxy Training Materials)</b>. <a href="https://training.galaxyproject.org/training-material/topics/admin/tutorials/interactive-tools/tutorial.html">https://training.galaxyproject.org/training-material/topics/admin/tutorials/interactive-tools/tutorial.html</a> Online; accessed TODAY
                        </li>
                        <li>
                        Hiltemann, Saskia, Rasche, Helena et al., 2023 <b>Galaxy Training: A Powerful Framework for Teaching!</b> PLOS Computational Biology <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1010752">10.1371/journal.pcbi.1010752</a>
                        </li>
                        <li>
                        Batut et al., 2018 <b>Community-Driven Data Analysis Training for Biology</b> Cell Systems <a href="https://doi.org/10.1016%2Fj.cels.2018.05.012">10.1016/j.cels.2018.05.012</a>
                        </li>
                    </ol>
                </p>

                <!-- collapsible boxcontaining the BibTeX-formatted citation -->
                <blockquote class="details">

                  <div id="citation-bibtex" class="box-title">
                    <button type="button" aria-controls="citation-bibtex" aria-expanded="false">
                      <i class="fas fa-info-circle" aria-hidden="true"></i>
                      <span class="visually-hidden"></span> BibTeX<span role="button" class="fold-unfold fa fa-minus-square" aria-hidden="true"></span>
                    </button>
                   </div>
                   <p style="display: none;">

                   <div class="highlighter-rouge"><div class="highlight"><pre class="highlight">


<code id="citation-code">@misc{admin-interactive-tools,
author = "Nate Coraor and Simon Gladman and Helena Rasche and Anthony Bretaudeau",
	title = "Galaxy Interactive Tools (Galaxy Training Materials)",
	year = "",
	month = "",
	day = ""
	url = "\url{https://training.galaxyproject.org/training-material/topics/admin/tutorials/interactive-tools/tutorial.html}",
	note = "[Online; accessed TODAY]"
}
@article{Hiltemann_2023,
	doi = {10.1371/journal.pcbi.1010752},
	url = {https://doi.org/10.1371%2Fjournal.pcbi.1010752},
	year = 2023,
	month = {jan},
	publisher = {Public Library of Science ({PLoS})},
	volume = {19},
	number = {1},
	pages = {e1010752},
	author = {Saskia Hiltemann and Helena Rasche and Simon Gladman and Hans-Rudolf Hotz and Delphine Larivi{\`{e}}re and Daniel Blankenberg and Pratik D. Jagtap and Thomas Wollmann and Anthony Bretaudeau and Nadia Gou{\'{e}} and Timothy J. Griffin and Coline Royaux and Yvan Le Bras and Subina Mehta and Anna Syme and Frederik Coppens and Bert Droesbeke and Nicola Soranzo and Wendi Bacon and Fotis Psomopoulos and Crist{\'{o}}bal Gallardo-Alba and John Davis and Melanie Christine Föll and Matthias Fahrner and Maria A. Doyle and Beatriz Serrano-Solano and Anne Claire Fouilloux and Peter van Heusden and Wolfgang Maier and Dave Clements and Florian Heyl and Björn Grüning and B{\'{e}}r{\'{e}}nice Batut and},
	editor = {Francis Ouellette},
	title = {Galaxy Training: A powerful framework for teaching!},
	journal = {PLoS Comput Biol} Computational Biology}
}
</code>
                   </pre></div></div>
                   </p>
                </blockquote>

                


<script>
// update the date on load, or leave fallback of 'today'
const citationTodaysDate = new Date();
document.getElementById("citation-code").innerHTML = document.getElementById("citation-code").innerHTML.replace("TODAY", citationTodaysDate.toDateString());
document.getElementById("citation-text").innerHTML = document.getElementById("citation-text").innerHTML.replace("TODAY", citationTodaysDate.toDateString());
</script>

                <i class="far fa-thumbs-up" aria-hidden="true"></i> Congratulations on successfully completing this tutorial!

                

                

		
                <blockquote class="agenda follow-up" id="admins-install-missing-tools">
                    <div class="box-title">Galaxy Administrators: Install the missing tools</div>
			<p>You can use Ephemeris's <code>shed-tools install</code> command to install the tools used in this tutorial.</p>
<div class="highlight"><pre class="highlight"><code>shed-tools install [-g GALAXY] [-a API_KEY] -t &lt;(curl https://training.galaxyproject.org/training-material/api/topics/admin/tutorials/interactive-tools/tutorial.json | jq .admin_install_yaml -r)</code></pre></div>
<p>Alternatively you can copy and paste the following YAML</p>
<div class="highlight"><pre class="highlight"><code>---
install_tool_dependencies: true
install_repository_dependencies: true
install_resolver_dependencies: true
tools: []
</code></pre></div>
                </blockquote>
		


                </section>

            </div>
        </div>
    </div>
</article>
<br/>
<br/>
<br/>

        </div>
        <footer>
	<hr />
	<div class="container">
		<div class="row">
			<div class="col-sm-6" style="text-align: left">
				<p>
					The <a href="https://galaxyproject.org/teach/gtn/">Galaxy Training Network</a>
					provides researchers with online training materials, connects them with local trainers, and helps promoting FAIR and Open Science practices worldwide. All contributions are subject to the <a rel="code-of-conduct" href="https://galaxyproject.org/community/coc/">Galaxy Project Code of Conduct</a>.
				</p>
				<p>
				The GTN infrastructure is licensed under <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a>
				</p>
				<p>
				Revision <a href="https://github.com/galaxyproject/training-material/commit/ee51c939937f9893c63a0f9494eaef0bfbfa1c6d">ee51c93</a>, built with Jekyll (4.3.2 | production)
				</p>
			</div>
			<div class="col-sm-6" style="text-align: right">
				
				<p>
					Resource <i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span><abbr title="Persistent URL">PURL</abbr>: <a href="https://gxy.io/GTN:T00010">https://gxy.io/GTN:T00010</a>
				</p>
				
				<p>
					<i>This Material</i>:
					
					is licensed under
					<a rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
						Creative Commons Attribution 4.0 International License
					</a>
				</p>
				<p>
					<a href="https://github.com/galaxyproject/training-material/edit/main/topics/admin/tutorials/interactive-tools/tutorial.md" title="Edit on GitHub">
					<i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
					</a>
				</p>
			</div>
		</div>
	</div>
</footer>


    </div>
</footer>


        <script src='/training-material/assets/js/bundle.main.js?v=1702340877'></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </body>
</html>