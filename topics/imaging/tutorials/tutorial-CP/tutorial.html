<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Nucleoli segmentation and feature extraction using CellProfiler</title>
        
            <!--
<script async defer data-domain="training.galaxyproject.org" src="https://plausible.galaxyproject.eu/js/plausible.js"></script>
-->
<!-- We let users opt-out, so if they've opted in, we need to append the plausible script to the body -->

<script>
var scriptElement = document.createElement("script");
scriptElement.async = true;
scriptElement.defer = true;
scriptElement.setAttribute("data-domain", "training.galaxyproject.org");
scriptElement.src = "https://plausible.galaxyproject.eu/js/plausible.js";

// Appending the script element to the body
if(localStorage.getItem('plausible-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	console.log("Plausible: opt-in");
	// Wait for the document to be available
	document.addEventListener("DOMContentLoaded", function(event) {
		document.body.appendChild(scriptElement);
	});
}
</script>

<!-- JavaScript Error Monitoring, and performance tracking. -->
<!--
<script
  src="https://browser.sentry-cdn.com/7.52.1/bundle.tracing.min.js"
  integrity="sha384-muuFXKS3752PNA4rPm9Uq6BLvOfV4CXyr9MHDBPvozOJJUWLKkogEFWOIRoVps43"
  crossorigin="anonymous"
></script>
-->
<script type="text/javascript">
var scriptElement = document.createElement("script");
scriptElement.src = "https://browser.sentry-cdn.com/7.52.1/bundle.tracing.min.js";
scriptElement.integrity = "sha384-muuFXKS3752PNA4rPm9Uq6BLvOfV4CXyr9MHDBPvozOJJUWLKkogEFWOIRoVps43";
scriptElement.crossOrigin = "anonymous";

if(localStorage.getItem('sentry-opt-out') !== 'opt-out' && navigator.doNotTrack !== "1") {
	console.log("Sentry: opt-in");
	// Appending the script element to the body
	document.addEventListener("DOMContentLoaded", function(event) {
		document.body.appendChild(scriptElement);
	});
		
	Sentry.init({
	  dsn: "https://45e0ec6e4373462b92969505df37cf40@sentry.galaxyproject.org/10",
	  release: "galaxy-training-network@ee51c939937f9893c63a0f9494eaef0bfbfa1c6d",
	  integrations: [new Sentry.BrowserTracing(), new Sentry.Replay()],
	  sampleRate: 0.1,
	  tracesSampleRate: 0.1,
	  // Capture Replay for no sessions by default
	  replaysSessionSampleRate: 0.01,
	  // plus for 1% of sessions with an error
	  replaysOnErrorSampleRate: 0.01,
	  // PII OFF
	  sendDefaultPii: false, // Off by default but just in case.
	  environment: "production",
	});
}
</script>

        
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon">
        <link rel="alternate" type="application/atom+xml" href="/training-material/feed.xml">
        <link rel="canonical" href="https://training.galaxyproject.org/training-material/topics/imaging/tutorials/tutorial-CP/tutorial.html">
        <link rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Regular-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Bold-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/training-material/assets/fonts/AtkinsonHyperlegible/Atkinson-Hyperlegible-Italic-102a.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" as="script" crossorigin>
        <link rel="preload" href="/training-material/assets/css/main.css?v=3" as="style">
        <link rel='preload' href='/training-material/assets/js/bundle.theme.js?v=1701044858' as='script'>
<link rel='preload' href='/training-material/assets/js/bundle.main.js?v=1701044858' as='script'>
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=3">
        <link rel="manifest" href="/training-material/manifest.json">
        <meta name="theme-color" content="#2c3143"/>


        <meta name="DC.identifier" content="https://github.com/galaxyproject/training-material">
<meta name="DC.type" content="text">
<meta name="DC.title" content="Nucleoli segmentation and feature extraction using CellProfiler">
<meta name="DC.publisher" content="Galaxy Training Network">
<meta name="DC.date" content="2022-10-20 15:55:57 +0000">
<meta name="DC.creator" content="Beatriz Serrano-Solano">
<meta name="DC.creator" content="Jean-Karim Hériché">

        
        
        
        
        <meta name="description" content="Image analysis using Galaxy">
        <meta property="og:site_name" content="Galaxy Training Network">
        <meta property="og:title" content="Galaxy Training: Nucleoli segmentation and feature extraction using CellPr...">
        <meta property="og:description" content="Image analysis using Galaxy">
        
        <meta property="og:image" content="/training-material/assets/images/GTNLogo1000.png">

        
        <script type="application/ld+json">
            


{
  "@context": "http://schema.org",
  "@type": "LearningResource",
  "http://purl.org/dc/terms/conformsTo": {
    "@id": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
    "@type": "CreativeWork"
  },
  "audience": {
    "@type": "EducationalAudience",
    "educationalRole": "Students"
  },
  "citation": {
    "@type": "CreativeWork",
    "name": "Community-Driven Data Analysis Training for Biology",
    "url": "https://doi.org/10.1016/j.cels.2018.05.012"
  },
  "copyrightHolder": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "dateModified": "2022-10-20 15:55:57 +0000",
  "discussionUrl": "https://gitter.im/Galaxy-Training-Network/Lobby",
  "headline": "Nucleoli segmentation and feature extraction using CellProfiler",
  "interactivityType": "mixed",
  "isAccessibleForFree": true,
  "isFamilyFriendly": true,
  "license": "https://spdx.org/licenses/CC-BY-4.0.html",
  "producer": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "provider": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "sourceOrganization": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "identifier": "https://github.com/galaxyproject/training-material",
  "workTranslation": [

  ],
  "creativeWorkStatus": "Active",
  "accessMode": [
    "textual",
    "visual"
  ],
  "accessModeSufficient": [
    "textual",
    "visual"
  ],
  "accessibilityControl": [
    "fullKeyboardControl",
    "fullMouseControl"
  ],
  "accessibilityFeature": [
    "alternativeText",
    "tableOfContents"
  ],
  "accessibilitySummary": "The text aims to be as accessible as possible. Image descriptions will vary per tutorial, from images being completely inaccessible, to images with good descriptions for non-visual users.",
  "isPartOf": {
    "@type": "CreativeWork",
    "name": "Imaging",
    "description": "Image analysis using Galaxy",
    "url": "https://training.galaxyproject.org/training-material/topics/imaging/"
  },
  "learningResourceType": "hands-on tutorial",
  "name": "Hands-on for 'Nucleoli segmentation and feature extraction using CellProfiler' tutorial",
  "url": "https://training.galaxyproject.org/training-material/topics/imaging/tutorials/tutorial-CP/tutorial.html",
  "timeRequired": "PT4H",
  "teaches": "How to download images from a public image repository.\n - How to segment cell nuclei using CellProfiler in Galaxy.\n - How to segment cell nucleoli using CellProfiler in Galaxy.\n - How to extract features for images, nuclei and nucleoli.",
  "keywords": "imaging",
  "description": "The questions this  addresses are:\n - How do I run an image analysis pipeline on public data using CellProfiler?\n - How do I analyse the DNA channel of fluorescence siRNA screens?\n - How do I download public image data into my history?\n - How do I segment and label cell nuclei?\n - How do I segment nucleoli (as the absence of DNA)?\n - How do I combine nuclei and nucleoli into one segmentation mask?\n - How do I extract the background of an image?\n - How do I relate the nucleoli to their parent nucleus?\n - How do I measure the image and object features?\n - How do I measure the image quality?\n\n\nThe objectives are:\n - How to download images from a public image repository.\n - How to segment cell nuclei using CellProfiler in Galaxy.\n - How to segment cell nucleoli using CellProfiler in Galaxy.\n - How to extract features for images, nuclei and nucleoli.\n\n",
  "inLanguage": {
    "@type": "Language",
    "name": "English",
    "alternateName": "en"
  },
  "competencyRequired": [
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/introduction/",
      "name": "Introduction to Galaxy Analyses",
      "description": "Introduction to Galaxy Analyses",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/fair/tutorials/bioimage-metadata/tutorial.html",
      "name": "FAIR Bioimage Metadata",
      "description": "Hands-on for 'FAIR Bioimage Metadata' tutorial",
      "learningResourceType": "hands-on tutorial",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    },
    {
      "@context": "http://schema.org",
      "@type": "LearningResource",
      "url": "https://training.galaxyproject.org/training-material/topics/fair/tutorials/bioimage-REMBI/tutorial.html",
      "name": "REMBI - Recommended Metadata for Biological Images – metadata guidelines for bioimaging data",
      "description": "Hands-on for 'REMBI - Recommended Metadata for Biological Images – metadata guidelines for bioimaging data' tutorial",
      "learningResourceType": "hands-on tutorial",
      "interactivityType": "expositive",
      "provider": {
        "@type": "Organization",
        "email": "galaxytrainingnetwork@gmail.com",
        "name": "Galaxy Training Network",
        "url": "https://galaxyproject.org/teach/gtn/"
      }
    }
  ],
  "author": [
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/beatrizserrano/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/beatrizserrano/",
      "name": "Beatriz Serrano-Solano",
      "image": "https://avatars.githubusercontent.com/beatrizserrano",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "url": "https://galaxyproject.org/teach/gtn/"
        }
      ],
      "identifier": "https://orcid.org/0000-0002-5862-6132",
      "orcid": "https://orcid.org/0000-0002-5862-6132"
    },
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "http://purl.org/dc/terms/conformsTo": {
        "@id": "https://bioschemas.org/profiles/Person/0.3-DRAFT",
        "@type": "CreativeWork"
      },
      "url": "https://training.galaxyproject.org/training-material/hall-of-fame/jkh1/",
      "mainEntityOfPage": "https://training.galaxyproject.org/training-material/hall-of-fame/jkh1/",
      "name": "Jean-Karim Hériché",
      "image": "https://avatars.githubusercontent.com/jkh1",
      "description": "A contributor to the GTN project.",
      "memberOf": [
        {
          "@type": "Organization",
          "email": "galaxytrainingnetwork@gmail.com",
          "name": "Galaxy Training Network",
          "url": "https://galaxyproject.org/teach/gtn/"
        }
      ]
    }
  ],
  "about": [
    {
      "@type": "CreativeWork",
      "name": "Imaging",
      "description": "Image analysis using Galaxy",
      "url": "https://training.galaxyproject.org/training-material/topics/imaging/"
    },
    {
      "@type": "DefinedTerm",
      "@id": "http://edamontology.org/topic_3382",
      "inDefinedTermSet": "http://edamontology.org",
      "termCode": "topic_3382",
      "url": "https://bioportal.bioontology.org/ontologies/EDAM/?p=classes&conceptid=http%3A%2F%2Fedamontology.org%2Ftopic_3382"
    }
  ],
  "educationalLevel": "Introductory",
  "mentions": [

  ],
  "abstract": "# Introduction"
}
        </script>
        
    </head>
    <body data-spy="scroll" data-target="#toc" data-brightness="auto" data-contrast="auto">
        <script src='/training-material/assets/js/bundle.theme.js?v=1701044858'></script>
        <header>
    <nav class="navbar navbar-expand-md navbar-dark" aria-label="Site Navigation">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                
                    Galaxy Training!
                
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        
                        <a class="nav-link" href="/training-material/topics/imaging" title="Go back to list of tutorials">
                            <i class="far fa-folder" aria-hidden="true"></i> Imaging
                        </a>
                        
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/training-material/learning-pathways" title="Learning Pathways">
                           <i class="fas fa-graduation-cap" aria-hidden="true"></i><span class="visually-hidden">curriculum</span> Learning Pathways
                        </a>
                    </li>

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu dropdown-menu-right">
        <!-- disable Tess for now
        <form method="get" action="https://tess.elixir-europe.org/materials">
            <input type="text" id="search" name="q" value="" style="margin-left: 0.5em;/*! border-radius: 0px; */">
            <input type="hidden" value="Galaxy Training" name="content_provider">
            <input type="submit" value="Search on TeSS" style="width: 92%;border-radius: 0px;margin: 0.5em;background: #f47d20;border: 0px;padding: 0.25em;" class="">
        </form>
        -->

	<a class="dropdown-item" href="/training-material/faqs/index.html" title="Check our FAQs">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> FAQs
        </a>
        
        
        <a class="dropdown-item" href="/training-material/topics/imaging/faqs/" title="Check our FAQs for the Imaging topic">
           <i class="far fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Topic FAQs
        </a>
        
        
        <a class="dropdown-item" href="https://help.galaxyproject.org/" title="Discuss on Galaxy Help">
            <i class="far fa-comments" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Galaxy Help Forum
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Discuss on gitter">
           <i class="fab fa-gitter" aria-hidden="true"></i><span class="visually-hidden">gitter</span> Discuss on Gitter
        </a>
    </div>
</li>


                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Extras">
        <i class="far fa-star" aria-hidden="true"></i><span class="visually-hidden">galaxy-star</span> Extras
    </a>
    <div class="dropdown-menu dropdown-menu-right">

        <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/edit/main/topics/imaging/tutorials/tutorial-CP/tutorial.md" title="Edit on GitHub">
          <i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
        </a>

        <a class="dropdown-item" href="/training-material/stats.html" title="Show view statistics about this repository">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN statistics
        </a>

        <a class="dropdown-item" href="https://plausible.galaxyproject.eu/training.galaxyproject.org?period=12mo&page=/training-material/topics/imaging/tutorials/tutorial-CP/tutorial.html" title="Show view statistics of this page">
            <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> Page Metrics
        </a>

        <!-- link to feedback -->
        
            
            
                <a class="dropdown-item" href="/training-material/feedback.html" title="Show feedback statistics about this repository">
                    <i class="fas fa-chart-bar" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> GTN feedback
                </a>
            
        

		<a href="/training-material/preferences.html" class="dropdown-item">
			<i class="fas fa-palette" aria-hidden="true"></i><span class="visually-hidden">gtn-theme</span> Themes have moved <span class="badge badge-secondary">New</span>
		</a>

        <div class="dropdown-item">
            <div>
                <i class="fas fa-history" aria-hidden="true"></i><span class="visually-hidden">galaxy-rulebuilder-history</span> Previous Versions
            </div>

            <div id="archive-selector">
            
                <a class="btn btn-warning" href="https://training.galaxyproject.org/archive/">Older Versions</a>
            </div>

        </div>

    </div>
</li>


                    <!-- Search bar-->
                    <li class="nav-item">
                      <div id="navbarSupportedContent" role="search">
                        <!-- Search form -->
                        <form class="form-inline mr-auto" method="GET" action="/training-material/search2">
                          <i class="fas fa-search nav-link" aria-hidden="true"></i>
                          <div class="md-form mb-2">
                            <input name="query" class="form-control nicer" type="text" placeholder="Search Tutorials" aria-label="Search">
                          </div>
                        </form>
                      </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

        
        <div class="container main-content" role="main">
        














<!-- Gitter -->






<article class="tutorial topic-imaging">
    <h1 data-toc-skip>Nucleoli segmentation and feature extraction using CellProfiler</h1>
    

    <section aria-labelledby="overview-box" id="tutorial-metadata">
    <div markdown="0">

	<div class="contributors-line">
		Authors: <a href="/training-material/hall-of-fame/beatrizserrano/" class="contributor-badge contributor-beatrizserrano"><img src="/training-material/assets/images/orcid.png" alt="orcid logo" width="36" height="36"/><img src="https://avatars.githubusercontent.com/beatrizserrano?s=36" alt="Avatar" width="36" height="36">Beatriz Serrano-Solano</a><a href="/training-material/hall-of-fame/jkh1/" class="contributor-badge contributor-jkh1"><img src="https://avatars.githubusercontent.com/jkh1?s=36" alt="Avatar" width="36" height="36">Jean-Karim Hériché</a>
	</div>

</div>


    <blockquote class="overview">
        <div id="overview-box" class="box-title">Overview</div>
        
        <img alt="Creative Commons License: CC-BY" class="float-right" style="border-width:0; display: inline-block; margin:0" src="/training-material/assets/images/cc-by.png"/>
        
        <strong><i class="far fa-question-circle" aria-hidden="true"></i> Questions:</strong>
        <ul>
        
        <li><p>How do I run an image analysis pipeline on public data using CellProfiler?</p>
</li>
        
        <li><p>How do I analyse the DNA channel of fluorescence siRNA screens?</p>
</li>
        
        <li><p>How do I download public image data into my history?</p>
</li>
        
        <li><p>How do I segment and label cell nuclei?</p>
</li>
        
        <li><p>How do I segment nucleoli (as the absence of DNA)?</p>
</li>
        
        <li><p>How do I combine nuclei and nucleoli into one segmentation mask?</p>
</li>
        
        <li><p>How do I extract the background of an image?</p>
</li>
        
        <li><p>How do I relate the nucleoli to their parent nucleus?</p>
</li>
        
        <li><p>How do I measure the image and object features?</p>
</li>
        
        <li><p>How do I measure the image quality?</p>
</li>
        
        </ul>

        <strong><i class="fas fa-bullseye" aria-hidden="true"></i> Objectives: </strong>
        <ul>
        
        <li><p>How to download images from a public image repository.</p>
</li>
        
        <li><p>How to segment cell nuclei using CellProfiler in Galaxy.</p>
</li>
        
        <li><p>How to segment cell nucleoli using CellProfiler in Galaxy.</p>
</li>
        
        <li><p>How to extract features for images, nuclei and nucleoli.</p>
</li>
        
        </ul>

        
        <strong><i class="fas fa-check-circle" aria-hidden="true"></i> Requirements:</strong>
        <ul>
        
    <li>
    
        
        
        <a href="/training-material/topics/introduction">Introduction to Galaxy Analyses</a>
        
    
    </li>

    <li>
    
        
        
        <a href="/training-material/topics/fair">FAIR Data, Workflows, and Research</a>
        
            <ul>
                
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                            <li> FAIR Bioimage Metadata:
                            
                            
                                
                                     <a href="/training-material/topics/fair/tutorials/bioimage-metadata/tutorial.html"><i class="fas fa-laptop" aria-hidden="true"></i><span class="visually-hidden">tutorial</span> hands-on</a>
                                
                            
                            </li>
                        
                    
                        
                    
                        
                    
                
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                            <li> REMBI - Recommended Metadata for Biological Images – metadata guidelines for bioimaging data:
                            
                            
                                
                                     <a href="/training-material/topics/fair/tutorials/bioimage-REMBI/tutorial.html"><i class="fas fa-laptop" aria-hidden="true"></i><span class="visually-hidden">tutorial</span> hands-on</a>
                                
                            
                            </li>
                        
                    
                
            </ul>
        
    
    </li>

        
        </ul>
        

        
        <div><strong><i class="fas fa-hourglass-half" aria-hidden="true"></i> Time estimation:</strong> 4 hours</div>
        

        

        

        

        <div id="supporting-materials"><strong><i class="fa fa-external-link" aria-hidden="true"></i> Supporting Materials:</strong></div>
        <ul class="supporting_material">
            
                <li class="btn btn-default"><a href="/training-material/topics/imaging/tutorials/tutorial-CP/slides.html" title="Slides for this tutorial">
                    <i class="fab fa-slideshare" aria-hidden="true"></i> Slides
                </a></li>
            

            

            
                <li class="btn btn-default supporting_material">


    <a class="btn btn-default topic-icon" href="/training-material/topics/imaging/tutorials/tutorial-CP/workflows/" title="Nucleoli segmentation and feature extraction using CellProfiler workflows">
        <i class="fas fa-share-alt" aria-hidden="true"></i>&nbsp;Workflows
    </a>

</li>
            

            

            

            
            
            
                <li class="btn btn-default supporting_material">    <a class="topic-icon" href="/training-material/topics/imaging/tutorials/tutorial-CP/faqs/" title="Frequently Asked Questions">
        <i class="far fa-question-circle" aria-hidden="true"></i> FAQs
    </a>
</li>
            

            <!-- Check the GTN Video Library for recordings of this tutorial or associated slides -->
            













  



            
                
                <li class="btn btn-default supporting_material">






    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Where to run the tutorial">
        <i class="fas fa-globe" aria-hidden="true"></i><span class="visually-hidden">instances</span>&nbsp;Available on these Galaxies 
    </a>
    <ul class="dropdown-menu">
        
	<li class="dropdown-header">
		<b>Known Working</b>
	</li>
	
	

    
	<li>
		<a class="dropdown-item" href="https://usegalaxy.be/" title="">
			UseGalaxy.be <abbr title="This instance supports the precise tool versions used in this tutorial">✅</abbr> ⭐️
		</a>
	</li>
    
	<li>
		<a class="dropdown-item" href="https://usegalaxy.eu" title="">
			UseGalaxy.eu <abbr title="This instance supports the precise tool versions used in this tutorial">✅</abbr> ⭐️
		</a>
	</li>
    
    
    
    
	<li class="dropdown-header">
		<b>Possibly Working</b>
	</li>
    
	<li>
		<a class="dropdown-item" href="https://usegalaxy.no/" title="">
			UseGalaxy.no
		</a>
	</li>
    
    

    
	<li class="dropdown-header">
		Containers
	</li>
        <li>
            <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/tree/main/topics//docker" title="Docker image for this tutorial">
                <i class="fab fa-docker" aria-hidden="true"></i><span class="visually-hidden">docker_image</span> Docker image
            </a>
        </li>
    
    </ul>

</li>
                
            
        </ul>

        <div><strong><i class="far fa-calendar" aria-hidden="true"></i> Last modification:</strong> Oct 20, 2022 </div>
        <div><strong><i class="fas fa-balance-scale" aria-hidden="true"></i> License:</strong>
		
            
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Tutorial Content is licensed under Creative Commons Attribution 4.0 International License</a>.
             The GTN Framework is licensed under <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a>
        </div>
        
        <div><strong><i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span><abbr title="Persistent URL">PURL</abbr>:</strong> <a href="https://gxy.io/GTN:T00183">https://gxy.io/GTN:T00183</a> </div>
        
    </blockquote>
    </section>

    <div class="container">
        <div class="row">
            <!-- sidebar, which will move to the top on a small screen -->
            <div class="col-sm-2 hide-when-printing">
                <nav id="toc" data-toggle="toc" class="sticky-top" aria-label="Table of Contents"></nav>
            </div>
            <div class="col-sm-10">
                 

                <section aria-label="Tutorial Content" id="tutorial-content">
                <h1 id="introduction">Introduction</h1>

<p>The nucleolus is a prominent structure of the nucleus of eukaryotic cells and is involved in ribosome biogenesis and cell cycle regulation. In DNA staining of cells, nucleoli can be identified as the absence of DNA in nuclei (<a href="#figure-1">Fig. 1</a>).
Phenotypes caused by reduced gene function are widely used to elucidate gene function and image-based RNA interference (RNAi) screens are routinely used to find and characterize genes involved in a particular biological process. While screens typically focus on one biological process of interest, the molecular markers used can also inform on other processes. Re-using published screens image data can then be a cost-effective alternative to performing new experiments.
In particular, regardless of the targeted biological process, many screens include a DNA label and therefore can also reveal the effect of gene knock-downs on nucleoli.</p>

<p><a href="../../images/tutorial-CP/img_dna_channel.png" rel="noopener noreferrer"><figure id="figure-1" style="max-width: 90%; margin:auto;"><img src="../../images/tutorial-CP/img_dna_channel.png" alt="DNA channel. " width="804" height="626" loading="lazy" />&lt;figcaption&gt;<span class="figcaption-prefix"><strong>Figure 1</strong>:</span> DNA channel from the screen described in <span class="citation"><a href="#Heriche_2014">“<b>Integration of biological data by kernels on graph nodes allows prediction of new genes involved in mitotic chromosome condensation</b>” 2014</a></span>. The red arrows point at nucleoli.&lt;/figcaption&gt;</figure></a></p>

<p>In this tutorial, we will analyse DNA channel images of publicly available RNAi screens to extract numerical descriptors (i.e. features) of nucleoli.
The images and associated metadata will be retrieved from the <a href="http://idr.openmicroscopy.org/">Image Data Resource (IDR)</a>, a repository that collects image datasets of tissues and cells.</p>

<p>To process and analyse the images, we will use <a href="http://cellprofiler-manual.s3.amazonaws.com/CellProfiler-3.1.9/index.html">CellProfiler</a> (<span class="citation"><a href="#McQuin_2018">“<b>CellProfiler 3.0: Next-generation image processing for biology</b>” 2018</a></span>), a popular image analysis software. CellProfiler normally comes as a desktop application in which users can compose image analysis workflows from a series of modules. Many of these modules are now also available as tools in Galaxy.</p>

<p>To fully emulate the behaviour of the standalone CellProfiler in Galaxy, each image analysis workflow needs to have three parts:</p>

<p>1) <strong>StartingModules</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> to initialise the pipeline,</p>

<p>2) tools performing the analysis (<a href="#figure-2">Fig. 2</a>): identification of the nuclei, nucleoli and background, together with the feature extraction,</p>

<p>3) <strong>CellProfiler</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> to actually run the pipeline.</p>

<p><a href="../../images/tutorial-CP/wf.jpg" rel="noopener noreferrer"><figure id="figure-2" style="max-width: 90%; margin:auto;"><img src="../../images/tutorial-CP/wf.jpg" alt="High-level view of the workflow. " width="2874" height="1156" loading="lazy" />&lt;figcaption&gt;<span class="figcaption-prefix"><strong>Figure 2</strong>:</span> High-level view of the workflow&lt;/figcaption&gt;</figure></a></p>

<p>In this tutorial, you will learn how to create a workflow that downloads a selection of images from the IDR, and uses CellProfiler to segment the nuclei and nucleoli. You will also learn how to extract and export features at three different levels: image, nucleus, nucleolus.</p>

<blockquote class="agenda">
  <div class="box-title agenda-title" id="agenda">Agenda</div>

  <p>In this tutorial, we will cover:</p>

<ol id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#get-data" id="markdown-toc-get-data">Get data</a></li>
  <li><a href="#start-cellprofiler-pipeline" id="markdown-toc-start-cellprofiler-pipeline">Start CellProfiler pipeline</a></li>
  <li><a href="#object-segmentation" id="markdown-toc-object-segmentation">Object segmentation</a>    <ol>
      <li><a href="#segment-nuclei" id="markdown-toc-segment-nuclei">Segment nuclei</a></li>
      <li><a href="#segment-nucleoli" id="markdown-toc-segment-nucleoli">Segment nucleoli</a></li>
      <li><a href="#combine-segmentation-masks" id="markdown-toc-combine-segmentation-masks">Combine segmentation masks</a></li>
    </ol>
  </li>
  <li><a href="#background-extraction" id="markdown-toc-background-extraction">Background extraction</a>    <ol>
      <li><a href="#identify-the-foreground" id="markdown-toc-identify-the-foreground">Identify the foreground</a></li>
      <li><a href="#remove-the-foreground-from-the-original-image" id="markdown-toc-remove-the-foreground-from-the-original-image">Remove the foreground from the original image</a></li>
    </ol>
  </li>
  <li><a href="#feature-extraction" id="markdown-toc-feature-extraction">Feature extraction</a>    <ol>
      <li><a href="#measure-the-granularity-texture-intensity-size-and-shape" id="markdown-toc-measure-the-granularity-texture-intensity-size-and-shape">Measure the granularity, texture, intensity, size and shape</a></li>
      <li><a href="#relate-nucleoli-to-their-parent-nucleus" id="markdown-toc-relate-nucleoli-to-their-parent-nucleus">Relate nucleoli to their parent nucleus</a></li>
      <li><a href="#measure-the-image-quality-related-parameters" id="markdown-toc-measure-the-image-quality-related-parameters">Measure the image quality-related parameters</a></li>
      <li><a href="#export-the-features-to-a-csv" id="markdown-toc-export-the-features-to-a-csv">Export the features to a CSV</a></li>
    </ol>
  </li>
  <li><a href="#run-the-cellprofiler-pipeline" id="markdown-toc-run-the-cellprofiler-pipeline">Run the CellProfiler pipeline</a></li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
</ol>

</blockquote>

<h1 id="get-data">Get data</h1>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-download-images-from-the-idr"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Download images from the IDR</div>

  <ol>
    <li>
      <p>If you are logged in, create a new history for this tutorial.</p>

      <!--SNIPPET-->
      <blockquote class="tip">   <div class="box-title tip-title" id="tip-creating-a-new-history"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-creating-a-new-history" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true"></i> Tip: Creating a new history<span class="fold-unfold fa fa-minus-square"></span></button></div>   <p>Click the <i class="fas fa-plus" aria-hidden="true"></i><span class="visually-hidden">new-history</span> icon at the top of the history panel.</p>   <p>If the <i class="fas fa-plus" aria-hidden="true"></i><span class="visually-hidden">new-history</span> is missing:</p>   <ol>   <li>Click on the <i class="fas fa-cog" aria-hidden="true"></i><span class="visually-hidden">galaxy-gear</span> icon (<strong>History options</strong>) on the top of the history panel</li>   <li>Select the option <strong>Create New</strong> from the menu</li> </ol> </blockquote>
      <p><!--END_SNIPPET--></p>
    </li>
    <li>
      <p><strong>IDR Download</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:</p>
      <ul>
        <li><em>“How would you like to specify the IDs of images to download?”</em>: <code class="language-plaintext highlighter-rouge">As text (comma-separated list of IDs or a valid IDR link)</code></li>
        <li><em>“Image IDs to download”</em>: <code class="language-plaintext highlighter-rouge">http://idr.openmicroscopy.org/webclient/?show=image-295900|image-295905|image-295910|image-295918|image-295928|image-295934</code></li>
        <li><em>“Name of the channel to download”</em>: <code class="language-plaintext highlighter-rouge">Cy3</code></li>
        <li><em>“z-plane of images to download”</em>: <code class="language-plaintext highlighter-rouge">0</code></li>
        <li><em>“Image frame to download”</em>: <code class="language-plaintext highlighter-rouge">0</code></li>
        <li><em>“Limit the download to a selected region of the image?”</em>: <code class="language-plaintext highlighter-rouge">No, download the entire image plane</code></li>
        <li><em>“Skip failed retrievals?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
        <li><em>“Download images in a tarball?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
      </ul>

      <blockquote class="tip">
        <div class="box-title tip-title" id="tip-get-the-idr-link-from-a-manual-selection-of-images"><button class="gtn-boxify-button tip" type="button" aria-controls="tip-get-the-idr-link-from-a-manual-selection-of-images" aria-expanded="true"><i class="far fa-lightbulb" aria-hidden="true" ></i> Tip: Get the IDR link from a manual selection of images<span class="fold-unfold fa fa-minus-square"></span></button></div>

        <p>To get the valid IDR link, go to the <a href="http://idr.openmicroscopy.org/webclient/?show=screen-102">dataset of interest in the IDR</a> and select in the preview of a plate a few images ((figure <a href="#figure-3">Fig. 3</a> - 1)). Once you see them at the bottom of the page (figure <a href="#figure-3">Fig. 3</a> - 2), select them again and click the link button in the top-right corner of the right panel (figure <a href="#figure-3">Fig. 3</a> - 3).</p>

        <p><a href="../../images/tutorial-CP/IDR_interface.jpg" rel="noopener noreferrer"><figure id="figure-3" style="max-width: 90%; margin:auto;"><img src="../../images/tutorial-CP/IDR_interface.jpg" alt="IDR interface. " width="2452" height="1376" loading="lazy" />&lt;figcaption&gt;<span class="figcaption-prefix"><strong>Figure 3</strong>:</span> IDR interface&lt;/figcaption&gt;</figure></a></p>
      </blockquote>

      <blockquote class="comment">
        <div class="box-title comment-title" id="comment"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment</div>

        <p><strong>IMPORTANT:</strong> When the number of images to download is high, it is strongly recommended to enable the option <em>“Download images in a tarball?”</em> in order to improve the performance.</p>
      </blockquote>
    </li>
  </ol>

</blockquote>

<blockquote class="question">
  <div class="box-title question-title" id="question"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <ol>
    <li>Why are we taking the <code class="language-plaintext highlighter-rouge">Cy3</code> channel in the <a href="http://idr.openmicroscopy.org/webclient/img_detail/295900/">example data</a>?</li>
    <li>How could we download 100,000 images in one go?</li>
  </ol>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution"><button class="gtn-boxify-button solution" type="button" aria-controls="solution" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

    <ol>
      <li>
        <p>The <code class="language-plaintext highlighter-rouge">Cy3</code> dye was used in the study to stain DNA. Since we want to segment the abscence of DNA, <code class="language-plaintext highlighter-rouge">Cy3</code> is the only channel that we need to download from the IDR.</p>
      </li>
      <li>
        <p>We could upload a text file with the image ids of interest.</p>
      </li>
    </ol>

  </blockquote>

</blockquote>

<h1 id="start-cellprofiler-pipeline">Start CellProfiler pipeline</h1>

<p>The tool <strong>Starting Modules</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> comprises the first 4 modules of the standalone CellProfiler. It needs to be the first tool of a workflow because it sets the naming and metadata handling for the rest of tools.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-specify-metadata-to-cellprofiler"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Specify metadata to CellProfiler</div>

  <ol>
    <li><strong>Starting Modules</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li>Images
          <ul>
            <li><em>“Do you want to filter only the images? “</em>: <code class="language-plaintext highlighter-rouge">Select the images only</code></li>
          </ul>
        </li>
        <li>Metadata
          <ul>
            <li><em>“Do you want to extract the metadata?”</em>: <code class="language-plaintext highlighter-rouge">Yes, specify metadata</code>
              <ul>
                <li><em>“Metadata extraction method”</em>: <code class="language-plaintext highlighter-rouge">Extract from file/folder names</code></li>
              </ul>
            </li>
            <li><em>“Metadata source”</em>: <code class="language-plaintext highlighter-rouge">File name</code></li>
            <li><em>“Select the pattern to extract metadata from the file name”</em>: <code class="language-plaintext highlighter-rouge">field1__field2__field3__field4__field5__field6</code></li>
            <li><em>“Extract metadata from”</em>: <code class="language-plaintext highlighter-rouge">All images</code></li>
          </ul>
        </li>
        <li>NamesAndTypes
          <ul>
            <li><em>“Process 3D”</em>: <code class="language-plaintext highlighter-rouge">No, do not process 3D data</code></li>
            <li><em>“Assign a name to”</em>: <code class="language-plaintext highlighter-rouge">Give every image the same name</code></li>
            <li><em>“Name to assign these images”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
            <li><em>“Select the image type”</em>: <code class="language-plaintext highlighter-rouge">Grayscale image</code>
              <ul>
                <li><em>“Set intensity range from”</em>: <code class="language-plaintext highlighter-rouge">Image metadata</code></li>
              </ul>
            </li>
          </ul>
        </li>
        <li>Groups
          <ul>
            <li><em>“Do you want to group your images?”</em>: <code class="language-plaintext highlighter-rouge">Yes, group the images</code></li>
            <li><em>“param”</em>: <code class="language-plaintext highlighter-rouge">field1</code></li>
          </ul>
        </li>
      </ul>

      <blockquote class="comment">
        <div class="box-title comment-title" id="comment-1"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment</div>

        <p>The images downloaded from the IDR are named following the pattern: <code class="language-plaintext highlighter-rouge">plateName__imageID__cropX__cropY__cropWidth__cropHeight</code>. These fields indicate to which plate the image belongs, what is the identifier of the image in the IDR, and the 4 cropping parameters selected. In our case, the upper-left corner (X, Y) and the width and height from there. We have a total of 6 metadata values encoded in the name of the file, separated by <code class="language-plaintext highlighter-rouge">__</code>. The pattern to extract our metadata from the file name properly is, therefore: <code class="language-plaintext highlighter-rouge">field1__field2__field3__field4__field5__field6</code>. It is important to keep in mind that, for CellProfiler, our <code class="language-plaintext highlighter-rouge">plateName</code> will be called <code class="language-plaintext highlighter-rouge">field1</code>, <code class="language-plaintext highlighter-rouge">imageID</code> will be <code class="language-plaintext highlighter-rouge">field2</code>, <code class="language-plaintext highlighter-rouge">cropX</code> will be <code class="language-plaintext highlighter-rouge">field3</code>, etc. These matches are relevant for a meaningful interpretation of the features.</p>
      </blockquote>
    </li>
  </ol>

</blockquote>

<h1 id="object-segmentation">Object segmentation</h1>

<h2 id="segment-nuclei">Segment nuclei</h2>

<p>Since we are interested in segmenting the nucleoli, you may wonder why we need to segment nuclei first. There are several reasons for that:</p>

<ul>
  <li>
    <p>Get the nuclei features. The intensity, size, shape, number of nucleoli per nucleus, etc. can be informative to study the nucleoli.</p>
  </li>
  <li>
    <p>Avoid the detection of wrong spots. In a first segmentation, we detect the nuclei, while in the second pass we will segment the holes (nucleoli). The holes need to fall inside the nuclei, and hence the importance of having them segmented too.</p>
  </li>
</ul>

<p>In the first step, we will identify the nuclei that are complete, meaning that they are not touching the borders of the image.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-segment-nuclei-that-are-complete-within-the-boundaries-of-the-image"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Segment nuclei that are complete within the boundaries of the image</div>

  <ol>
    <li><strong>IdentifyPrimaryObjects</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>Starting Modules</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Use advanced settings?”</em>: <code class="language-plaintext highlighter-rouge">Yes, use advanced settings</code>
          <ul>
            <li><em>“Enter the name of the input image (from NamesAndTypes)”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
            <li><em>“Enter the name of the primary objects to be identified”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
            <li><em>“Typical minimum diameter of objects, in pixel units (Min)”</em>: <code class="language-plaintext highlighter-rouge">15</code></li>
            <li><em>“Typical maximum diameter of objects, in pixel units (Max)”</em>: <code class="language-plaintext highlighter-rouge">200</code></li>
            <li><em>“Discard objects outside the diameter range?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
            <li><em>“Discard objects touching the border of the image?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
            <li><em>“Threshold strategy”</em>: <code class="language-plaintext highlighter-rouge">Global</code>
              <ul>
                <li><em>“Thresholding method”</em>: <code class="language-plaintext highlighter-rouge">Otsu</code>
                  <ul>
                    <li><em>“Two-class or three-class thresholding?”</em>: <code class="language-plaintext highlighter-rouge">Two classes</code></li>
                    <li><em>“Threshold correction factor”</em>: <code class="language-plaintext highlighter-rouge">0.9</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><em>“Method to distinguish clumped objects”</em>: <code class="language-plaintext highlighter-rouge">Shape</code>
              <ul>
                <li><em>“Method to draw dividing lines between clumped objects”</em>: <code class="language-plaintext highlighter-rouge">Shape</code>
                  <ul>
                    <li><em>“Automatically calculate size of smoothing filter for declumping?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
                    <li><em>“Automatically calculate minimum allowed distance between local maxima?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><em>“Handling of objects if excessive number of objects identified”</em>: <code class="language-plaintext highlighter-rouge">Continue</code></li>
          </ul>
        </li>
      </ul>

      <blockquote class="comment">
        <div class="box-title comment-title" id="comment-2"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment</div>

        <ul>
          <li>The names entered to the input image and objects have to be consistent (case sensitive) with the ones in <em>NamesAndTypes</em> and the tools to follow.</li>
          <li>The min and max diameter of the objects (<code class="language-plaintext highlighter-rouge">Typical minimum diameter of objects, in pixel units (Min)</code> and <code class="language-plaintext highlighter-rouge">Typical minimum diameter of objects, in pixel units (Max)</code>) will have to be adjusted to the resolution of the images.</li>
          <li>The <code class="language-plaintext highlighter-rouge">Threshold correction factor</code> is used to adjust the threshold in Otsu’s method. The value depends on the images and it might be useful to test several values and pick the one that works best for a particular kind of image.</li>
        </ul>
      </blockquote>
    </li>
  </ol>

</blockquote>

<blockquote class="question">
  <div class="box-title question-title" id="question-1"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>We are using here Otsu’s thresholding method for segmentation. What other segmentation options are available? What is the difference between them?</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-1"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-1" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

    <p>In the <em>global</em> methods we have <code class="language-plaintext highlighter-rouge">Manual</code>, <code class="language-plaintext highlighter-rouge">Measurement</code>, <code class="language-plaintext highlighter-rouge">Minimum cross entropy</code>, <code class="language-plaintext highlighter-rouge">Otsu</code> and <code class="language-plaintext highlighter-rouge">Robust background</code>. For the <em>adaptive</em> ones we only have <code class="language-plaintext highlighter-rouge">Otsu</code>. Check the parameters’ help to get more information on each one.</p>

  </blockquote>

</blockquote>

<p>From the previous tool, we got a group of objects (nuclei). Now, we want to export the segmentation masks as a single image to check how well the segmentation algorithm is performing. We also want to label the nuclei with their identifiers for future visual inspection of the results. The output of this step will look like (you will only get this image after running the whole workflow):</p>

<p><a href="../../images/tutorial-CP/img_nuclei_labels.png" rel="noopener noreferrer"><figure id="figure-4" style="max-width: 90%; margin:auto;"><img src="../../images/tutorial-CP/img_nuclei_labels.png" alt="Identified nuclei with labels. " width="1534" height="1180" loading="lazy" />&lt;figcaption&gt;<span class="figcaption-prefix"><strong>Figure 4</strong>:</span> Identified nuclei with labels.&lt;/figcaption&gt;</figure></a></p>

<blockquote class="question">
  <div class="box-title question-title" id="question-2"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>Why are some nuclei not labeled in the image above?</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-2"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-2" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

    <p>We have indicated to the tool <strong>IdentifyPrimaryObjects</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> that the nuclei that are either outside the diameter range or touching the border should be discarded.</p>

  </blockquote>

</blockquote>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-mask-the-nuclei-detected"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Mask the nuclei detected</div>

  <ol>
    <li><strong>ConvertObjectsToImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>IdentifyPrimaryObjects</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Enter the name of the input objects you want to convert to an image”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
        <li><em>“Enter the name of the resulting image”</em>: <code class="language-plaintext highlighter-rouge">MaskNuclei</code></li>
        <li><em>“Select the color format”</em>: <code class="language-plaintext highlighter-rouge">Binary (black &amp; white)</code></li>
      </ul>
    </li>
    <li><strong>DisplayDataOnImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>ConvertObjectsToImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Display object or image measurements?”</em>: <code class="language-plaintext highlighter-rouge">Object</code>
          <ul>
            <li><em>“Enter the name of the input objects”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
            <li><em>“Measurement category”</em>: <code class="language-plaintext highlighter-rouge">Number</code></li>
          </ul>
        </li>
        <li><em>“Enter the name of the image on which to display the measurements”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
        <li><em>“Display mode”</em>: <code class="language-plaintext highlighter-rouge">Text</code>
          <ul>
            <li><em>“Text color”</em>: <code class="language-plaintext highlighter-rouge">#ff0000</code></li>
            <li><em>“Number of decimals”</em>: <code class="language-plaintext highlighter-rouge">0</code></li>
          </ul>
        </li>
        <li><em>“Name the output image that has the measurements displayed”</em>: <code class="language-plaintext highlighter-rouge">ImageDisplay</code></li>
      </ul>
    </li>
    <li><strong>SaveImages</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>DisplayDataOnImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Select the type of image to save”</em>: <code class="language-plaintext highlighter-rouge">Image</code>
          <ul>
            <li><em>“Saved the format to save the image(s)”</em>: <code class="language-plaintext highlighter-rouge">tiff</code></li>
          </ul>
        </li>
        <li><em>“Enter the name of the image to save”</em>: <code class="language-plaintext highlighter-rouge">ImageDisplay</code></li>
        <li><em>“Select method for constructing file names”</em>: <code class="language-plaintext highlighter-rouge">From image filename</code>
          <ul>
            <li><em>“Enter the image name (from NamesAndTypes) to be used as file prefix”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
            <li><em>“Append a suffix to the image file name?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code>
              <ul>
                <li><em>“Text to append to the image name”</em>: <code class="language-plaintext highlighter-rouge">_nucleiNumbers</code></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><em>“Overwrite existing files without warning?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
      </ul>

      <blockquote class="comment">
        <div class="box-title comment-title" id="comment-3"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment</div>

        <p>The <code class="language-plaintext highlighter-rouge">Text color</code> parameter can be any of your choice, the hexa code is not really relevant. The only consideration is that it needs to be visible on top of the nuclei.</p>
      </blockquote>
    </li>
  </ol>
</blockquote>

<h2 id="segment-nucleoli">Segment nucleoli</h2>

<p>The nucleoli are lacking intensity in the DNA staining and therefore, we need to enhance the black holes before masking.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-detect-and-mask-dark-holes"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Detect and mask dark holes</div>

  <ol>
    <li><strong>EnhanceOrSuppressFeatures</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>SaveImages</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Enter the name of the input image”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
        <li><em>“Enter a name for the resulting image”</em>: <code class="language-plaintext highlighter-rouge">DNAdarkholes</code></li>
        <li><em>“Select the operation”</em>: <code class="language-plaintext highlighter-rouge">Enhance</code>
          <ul>
            <li><em>“Feature type”</em>: <code class="language-plaintext highlighter-rouge">Dark holes</code>
              <ul>
                <li><em>“Maximum hole size”</em>: <code class="language-plaintext highlighter-rouge">15</code></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><strong>MaskImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>EnhanceOrSuppressFeatures</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Enter the name of the input image”</em>: <code class="language-plaintext highlighter-rouge">DNAdarkholes</code></li>
        <li><em>“Enter the name of the resulting image”</em>: <code class="language-plaintext highlighter-rouge">MaskDNAdarkholes</code></li>
        <li><em>“Use objects or an image as a mask?”</em>: <code class="language-plaintext highlighter-rouge">Objects</code>
          <ul>
            <li><em>“Enter the name objects to mask the input image”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
          </ul>
        </li>
        <li><em>“Invert the mask?”</em>: <code class="language-plaintext highlighter-rouge">No</code></li>
      </ul>
    </li>
  </ol>

</blockquote>

<p>Now that we have all the holes in one mask, we can segment the nucleoli as individual objects in the same way as we did with the nuclei. All the nucleoli can be then combined into one single image.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-segment-nucleoli-as-individual-objects"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Segment nucleoli as individual objects</div>

  <ol>
    <li><strong>IdentifyPrimaryObjects</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>MaskImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Use advanced settings?”</em>: <code class="language-plaintext highlighter-rouge">Yes, use advanced settings</code>
          <ul>
            <li><em>“Enter the name of the input image (from NamesAndTypes)”</em>: <code class="language-plaintext highlighter-rouge">MaskDNAdarkholes</code></li>
            <li><em>“Enter the name of the primary objects to be identified”</em>: <code class="language-plaintext highlighter-rouge">Nucleoli</code></li>
            <li><em>“Typical minimum diameter of objects, in pixel units (Min)”</em>: <code class="language-plaintext highlighter-rouge">2</code></li>
            <li><em>“Typical maximum diameter of objects, in pixel units (Max)”</em>: <code class="language-plaintext highlighter-rouge">15</code></li>
            <li><em>“Discard objects touching the border of the image?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
            <li><em>“Threshold strategy”</em>: <code class="language-plaintext highlighter-rouge">Global</code>
              <ul>
                <li><em>“Thresholding method”</em>: <code class="language-plaintext highlighter-rouge">Otsu</code>
                  <ul>
                    <li><em>“Two-class or three-class thresholding?”</em>: <code class="language-plaintext highlighter-rouge">Two classes</code></li>
                    <li><em>“Threshold correction factor”</em>: <code class="language-plaintext highlighter-rouge">0.9</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><em>“Method to distinguish clumped objects”</em>: <code class="language-plaintext highlighter-rouge">Shape</code>
              <ul>
                <li><em>“Method to draw dividing lines between clumped objects”</em>: <code class="language-plaintext highlighter-rouge">Shape</code>
                  <ul>
                    <li><em>“Automatically calculate size of smoothing filter for declumping?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
                    <li><em>“Automatically calculate minimum allowed distance between local maxima?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><em>“Handling of objects if excessive number of objects identified”</em>: <code class="language-plaintext highlighter-rouge">Continue</code></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><strong>ConvertObjectsToImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>IdentifyPrimaryObjects</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Enter the name of the input objects you want to convert to an image”</em>: <code class="language-plaintext highlighter-rouge">Nucleoli</code></li>
        <li><em>“Enter the name of the resulting image”</em>: <code class="language-plaintext highlighter-rouge">MaskNucleoli</code></li>
        <li><em>“Select the color format”</em>: <code class="language-plaintext highlighter-rouge">Binary (black &amp; white)</code></li>
      </ul>
    </li>
  </ol>

</blockquote>

<h2 id="combine-segmentation-masks">Combine segmentation masks</h2>

<p>We have now one segmentation mask per image with all the nuclei detected, <code class="language-plaintext highlighter-rouge">MaskNuclei</code>, and another one for the nucleoli, <code class="language-plaintext highlighter-rouge">MaskNucleoli</code>. These are binary masks in which the background is black and the objects detected are white. We would like to check whether both segmentation steps went well. That could be achieved by combining both of them (using different colors) into one image. Here, we are converting the nucleus mask to blue and the nucleoli to magenta. The outcome that you will obtain after the execution of the workflow will look like:</p>

<p><a href="../../images/tutorial-CP/img_combined_masks.png" rel="noopener noreferrer"><figure id="figure-5" style="max-width: 90%; margin:auto;"><img src="../../images/tutorial-CP/img_combined_masks.png" alt="Combined mask for nuclei and nucleoli. " width="2116" height="1708" loading="lazy" />&lt;figcaption&gt;<span class="figcaption-prefix"><strong>Figure 5</strong>:</span> Combined segmentation masks for nuclei (blue) and nucleoli (magenta).&lt;/figcaption&gt;</figure></a></p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-convert-and-save-the-nuclei-and-nucleoli-masks"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Convert and save the nuclei and nucleoli masks</div>

  <ol>
    <li><strong>GrayToColor</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>ConvertObjectsToImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Enter the name of the resulting image”</em>: <code class="language-plaintext highlighter-rouge">CombinedMask</code></li>
        <li><em>“Select a color scheme”</em>: <code class="language-plaintext highlighter-rouge">RGB</code>
          <ul>
            <li><em>“Enter the name of the image to be colored red”</em>: <code class="language-plaintext highlighter-rouge">MaskNucleoli</code></li>
            <li><em>“Relative weight for the red image”</em>: <code class="language-plaintext highlighter-rouge">0.8</code></li>
            <li><em>“Enter the name of the image to be colored blue”</em>: <code class="language-plaintext highlighter-rouge">MaskNuclei</code></li>
            <li><em>“Relative weight for the blue image”</em>: <code class="language-plaintext highlighter-rouge">0.5</code></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><strong>SaveImages</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>GrayToColor</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Select the type of image to save”</em>: <code class="language-plaintext highlighter-rouge">Image</code>
          <ul>
            <li><em>“Saved the format to save the image(s)”</em>: <code class="language-plaintext highlighter-rouge">tiff</code></li>
          </ul>
        </li>
        <li><em>“Enter the name of the image to save”</em>: <code class="language-plaintext highlighter-rouge">CombinedMask</code></li>
        <li><em>“Select method for constructing file names”</em>: <code class="language-plaintext highlighter-rouge">From image filename</code>
          <ul>
            <li><em>“Enter the image name (from NamesAndTypes) to be used as file prefix”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
            <li><em>“Append a suffix to the image file name?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code>
              <ul>
                <li><em>“Text to append to the image name”</em>: <code class="language-plaintext highlighter-rouge">_combinedMask</code></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><em>“Overwrite existing files without warning?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
      </ul>

      <blockquote class="comment">
        <div class="box-title comment-title" id="comment-4"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment</div>

        <ul>
          <li>You can pick any other color of your choice, as long as the contrast is good enough to distinguish both objects.</li>
          <li>We are saving here a tiff image but any other format of your choice would work too.</li>
        </ul>
      </blockquote>
    </li>
  </ol>

</blockquote>

<h1 id="background-extraction">Background extraction</h1>

<p>The background extraction is useful for quality control. For instance, in a high-exposed or low-contrast image, the nuclei will not be very different from the background and that may lead to the wrong segmentation.</p>

<p>To extract the background, we first need to get the foreground and subtract it from the original image. We already have the nuclei mask, however, we excluded incomplete nuclei, i.e., those touching the borders or those which sizes are outside the specified range. This means that the mask is not covering all the nuclei and we need to get rid of the constraints to get the complete foreground. At this stage, we want to detect everything with a certain intensity (foreground) and subtract it from the complete image to get the background.</p>

<h2 id="identify-the-foreground">Identify the foreground</h2>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-segment-all-nuclei"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Segment all nuclei</div>

  <ol>
    <li><strong>IdentifyPrimaryObjects</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>SaveImages</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Use advanced settings?”</em>: <code class="language-plaintext highlighter-rouge">Yes, use advanced settings</code>
          <ul>
            <li><em>“Enter the name of the input image (from NamesAndTypes)”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
            <li><em>“Enter the name of the primary objects to be identified”</em>: <code class="language-plaintext highlighter-rouge">NucleiIncludingTouchingBorders</code></li>
            <li><em>“Typical minimum diameter of objects, in pixel units (Min)”</em>: <code class="language-plaintext highlighter-rouge">15</code></li>
            <li><em>“Typical maximum diameter of objects, in pixel units (Max)”</em>: <code class="language-plaintext highlighter-rouge">200</code></li>
            <li><em>“Discard objects outside the diameter range?”</em>: <code class="language-plaintext highlighter-rouge">No</code></li>
            <li><em>“Discard objects touching the border of the image?”</em>: <code class="language-plaintext highlighter-rouge">No</code></li>
            <li><em>“Threshold strategy”</em>: <code class="language-plaintext highlighter-rouge">Global</code>
              <ul>
                <li><em>“Thresholding method”</em>: <code class="language-plaintext highlighter-rouge">Otsu</code>
                  <ul>
                    <li><em>“Two-class or three-class thresholding?”</em>: <code class="language-plaintext highlighter-rouge">Two classes</code></li>
                    <li><em>“Threshold correction factor”</em>: <code class="language-plaintext highlighter-rouge">0.9</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><em>“Method to distinguish clumped objects”</em>: <code class="language-plaintext highlighter-rouge">Shape</code>
              <ul>
                <li><em>“Method to draw dividing lines between clumped objects”</em>: <code class="language-plaintext highlighter-rouge">Shape</code>
                  <ul>
                    <li><em>“Automatically calculate size of smoothing filter for declumping?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
                    <li><em>“Automatically calculate minimum allowed distance between local maxima?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><em>“Handling of objects if excessive number of objects identified”</em>: <code class="language-plaintext highlighter-rouge">Continue</code></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><strong>ConvertObjectsToImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>IdentifyPrimaryObjects</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Enter the name of the input objects you want to convert to an image”</em>: <code class="language-plaintext highlighter-rouge">NucleiIncludingTouchingBorders</code></li>
        <li><em>“Enter the name of the resulting image”</em>: <code class="language-plaintext highlighter-rouge">Image_NucleiIncludingTouchingBorders</code></li>
        <li><em>“Select the color format”</em>: <code class="language-plaintext highlighter-rouge">Binary (black &amp; white)</code></li>
      </ul>
    </li>
  </ol>

</blockquote>

<h2 id="remove-the-foreground-from-the-original-image">Remove the foreground from the original image</h2>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-subtract-the-foreground-from-the-original-image"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Subtract the foreground from the original image</div>

  <p><strong>ImageMath</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:</p>
  <ul>
    <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>ConvertObjectsToImage</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
    <li><em>“Enter a name for the resulting image”</em>: <code class="language-plaintext highlighter-rouge">BG</code></li>
    <li><em>“Operation”</em>: <code class="language-plaintext highlighter-rouge">Subtract</code>
      <ul>
        <li>In <em>“First Image”</em>:
          <ul>
            <li><em>“Image or measurement?”</em>: <code class="language-plaintext highlighter-rouge">Image</code>
              <ul>
                <li><em>“Enter the name of the first image”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
              </ul>
            </li>
          </ul>
        </li>
        <li>In <em>“Second Image”</em>:
          <ul>
            <li><em>“Image or measurement?”</em>: <code class="language-plaintext highlighter-rouge">Image</code>
              <ul>
                <li><em>“Enter the name of the second image”</em>: <code class="language-plaintext highlighter-rouge">Image_NucleiIncludingTouchingBorders</code></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><em>“Ignore the image masks?”</em>: <code class="language-plaintext highlighter-rouge">No</code></li>
  </ul>

</blockquote>

<h1 id="feature-extraction">Feature extraction</h1>

<p>Now that we have the objects of interest segmented and the background extracted, we can start measuring parameters on them. In particular it is relevant to:</p>

<ul>
  <li>measure the granularity, texture and intensity of the nuclei and original image,</li>
  <li>measure the intensity of the original image, the background and foreground,</li>
  <li>measure the size and shape of nuclei and nucleoli,</li>
  <li>assess the quality of the original image,</li>
  <li>measure the area ocuppied by nuclei and nucleoli.</li>
</ul>

<p>A step that requires special attention is the relationship nucleolus-nucleus. This is useful to compute statistics on the number of nucleoli by nucleus.</p>

<blockquote class="comment">
  <div class="box-title comment-title" id="comment-5"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment</div>

  <p>The order in which the tools in this section are chained is not relevant for the outcome.</p>
</blockquote>

<h2 id="measure-the-granularity-texture-intensity-size-and-shape">Measure the granularity, texture, intensity, size and shape</h2>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-measure-the-granularity-texture-intensity-size-and-shape"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Measure the granularity, texture, intensity, size and shape</div>

  <ol>
    <li><strong>MeasureGranularity</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>ImageMath</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li>In <em>“new image”</em>:
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new image”</em>
              <ul>
                <li><em>“Enter the name of a greyscale image to measure”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><strong>MeasureTexture</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>MeasureGranularity</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li>In <em>“new image”</em>:
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new image”</em>
              <ul>
                <li><em>“Enter the name of an image to measure”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><em>“Measure images or objects?”</em>: <code class="language-plaintext highlighter-rouge">Objects</code>
          <ul>
            <li>In <em>“new object”</em>:
              <ul>
                <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new object”</em>
                  <ul>
                    <li><em>“Enter the names of the objects to measure”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><strong>MeasureObjectIntensity</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>MeasureTexture</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li>In <em>“new image”</em>:
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new image”</em>
              <ul>
                <li><em>“Enter the name of an image to measure”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
              </ul>
            </li>
          </ul>
        </li>
        <li>In <em>“new object”</em>:
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new object”</em>
              <ul>
                <li><em>“Enter the name of the objects to measure”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><strong>MeasureObjectSizeShape</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>MeasureObjectIntensity</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li>In <em>“new object”</em>:
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new object”</em>
              <ul>
                <li><em>“Enter the name of the object to measure”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
              </ul>
            </li>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new object”</em>
              <ul>
                <li><em>“Enter the name of the object to measure”</em>: <code class="language-plaintext highlighter-rouge">Nucleoli</code></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>

</blockquote>

<blockquote class="question">
  <div class="box-title question-title" id="question-3"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>Why are we measuring the granularity, texture and intensity of the original image and the nuclei only?</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-3"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-3" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

    <p>The nucleoli was not stained in the DNA channel and hence, the granularity, texture and intensity are constant values.</p>

  </blockquote>

</blockquote>

<h2 id="relate-nucleoli-to-their-parent-nucleus">Relate nucleoli to their parent nucleus</h2>

<p>It might be relevant to compute some statistics on the number of nucleoli inside each nucleus. CellProfiler has a very interesting module to relate both objects, in which each one of the nucleoli is assigned an identifier and linked to the identifier of its parent nucleus.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-relate-nucleoli-to-their-parent-nucleus"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Relate nucleoli to their parent nucleus</div>

  <ol>
    <li><strong>RelateObjects</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>MeasureObjectSizeShape</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Parent objects”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
        <li><em>“Child objects”</em>: <code class="language-plaintext highlighter-rouge">Nucleoli</code></li>
        <li><em>“Calculate child-parent distances?”</em>: <code class="language-plaintext highlighter-rouge">Both</code>
          <ul>
            <li><em>“Calculate distances to other parents?”</em>: <code class="language-plaintext highlighter-rouge">No</code></li>
          </ul>
        </li>
        <li><em>“Do you want to save the children with parents as a new object set?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
      </ul>
    </li>
  </ol>

</blockquote>

<h2 id="measure-the-image-quality-related-parameters">Measure the image quality-related parameters</h2>

<p>In this section, we will measure the image quality, the area occupied by the nuclei and nucleoli in the original image and the intensity of the foreground and background.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-measure-the-image-quality"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Measure the image quality</div>

  <ol>
    <li><strong>MeasureImageQuality</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>RelateObjects</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li><em>“Calculate blur metrics?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
        <li><em>“Calculate thresholds?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code>
          <ul>
            <li><em>“Use all thresholding methods?”</em>: <code class="language-plaintext highlighter-rouge">No</code>
              <ul>
                <li>In <em>“new threshold method”</em>:
                  <ul>
                    <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new threshold method”</em>
                      <ul>
                        <li><em>“Select a thresholding method”</em>: <code class="language-plaintext highlighter-rouge">Otsu</code>
                          <ul>
                            <li><em>“Two-class or three-class thresholding?”</em>: <code class="language-plaintext highlighter-rouge">Two classes</code></li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><strong>MeasureImageAreaOccupied</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>MeasureImageQuality</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li>In <em>“new area”</em>:
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new area”</em>
              <ul>
                <li><em>“Measure the area occupied in a binary image, or in objects?”</em>: <code class="language-plaintext highlighter-rouge">Objects</code>
                  <ul>
                    <li><em>“Enter the name of the objects to measure”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new area”</em>
              <ul>
                <li><em>“Measure the area occupied in a binary image, or in objects?”</em>: <code class="language-plaintext highlighter-rouge">Objects</code>
                  <ul>
                    <li><em>“Enter the name of the objects to measure”</em>: <code class="language-plaintext highlighter-rouge">Nucleoli</code></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><strong>MeasureImageIntensity</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>MeasureImageAreaOccupied</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
        <li>In <em>“new image”</em>:
          <ul>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new image”</em>
              <ul>
                <li><em>“Enter the name of the image to measure”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
                <li><em>“Measure the intensity only from areas enclosed by objects?”</em>: <code class="language-plaintext highlighter-rouge">No</code></li>
              </ul>
            </li>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new image”</em>
              <ul>
                <li><em>“Enter the name of the image to measure”</em>: <code class="language-plaintext highlighter-rouge">DNA</code></li>
                <li><em>“Measure the intensity only from areas enclosed by objects?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code>
                  <ul>
                    <li><em>“Enter the name of the objects that the intensity will be aggregated within”</em>: <code class="language-plaintext highlighter-rouge">Nuclei</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><i class="far fa-plus-square" aria-hidden="true"></i><span class="visually-hidden">param-repeat</span> <em>“Insert new image”</em>
              <ul>
                <li><em>“Enter the name of the image to measure”</em>: <code class="language-plaintext highlighter-rouge">BG</code></li>
                <li><em>“Measure the intensity only from areas enclosed by objects?”</em>: <code class="language-plaintext highlighter-rouge">No</code></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>

</blockquote>

<blockquote class="question">
  <div class="box-title question-title" id="question-4"><i class="far fa-question-circle" aria-hidden="true" ></i> Question</div>

  <p>In step 3, we are measuring the area occupied by objects for the DNA twice. Why is that?</p>

  <blockquote class="solution">
    <div class="box-title solution-title" id="solution-4"><button class="gtn-boxify-button solution" type="button" aria-controls="solution-4" aria-expanded="true"><i class="far fa-eye" aria-hidden="true" ></i> Solution<span class="fold-unfold fa fa-minus-square"></span></button></div>

    <p>We want to have the global intensity of the image, so the parameter <em>“Measure the intensity only from areas enclosed by objects?”</em> has to be set to <code class="language-plaintext highlighter-rouge">No</code>. However, we also want to obtain the intensity of the foreground, so only the parts of the images that are enclosed by nuclei.</p>

  </blockquote>

</blockquote>

<h2 id="export-the-features-to-a-csv">Export the features to a CSV</h2>

<p>All the parameters that we have measured related to the images and objects need to be exported to a file for each one of 6 example images analysed.</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-export-features"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Export features</div>

  <p><strong>ExportToSpreadsheet</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:</p>
  <ul>
    <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Select the input CellProfiler pipeline”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>MeasureImageIntensity</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
    <li><em>“Select the column delimiter”</em>: <code class="language-plaintext highlighter-rouge">Tab</code></li>
    <li><em>“Add a prefix to file names?”</em>: <code class="language-plaintext highlighter-rouge">Do not add prefix to the file name</code></li>
    <li><em>“Create a GenePattern GCT file?”</em>: <code class="language-plaintext highlighter-rouge">No</code></li>
    <li><em>“Export all measurement types?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
  </ul>

</blockquote>

<h1 id="run-the-cellprofiler-pipeline">Run the CellProfiler pipeline</h1>

<p>All the steps in our workflow (except for the <strong>IDR download</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>) have been passing through an <code class="language-plaintext highlighter-rouge">output_pipeline</code> as a parameter. This was the way to assemble all the modules from CellProfiler, now we can run all of them together!</p>

<blockquote class="notranslate hands_on">
  <div class="box-title hands-on-title" id="hands-on-run-cellprofiler-pipeline"><i class="fas fa-pencil-alt" aria-hidden="true" ></i> Hands-on: Run CellProfiler pipeline</div>

  <p><strong>CellProfiler</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span> with the following parameters:</p>
  <ul>
    <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“Pipeline file”</em>: <code class="language-plaintext highlighter-rouge">output_pipeline</code> (output of <strong>ExportToSpreadsheet</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
    <li><em>“Are the input images packed into a tar archive?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code>
      <ul>
        <li><i class="far fa-file" aria-hidden="true"></i><span class="visually-hidden">param-file</span> <em>“A tarball of images”</em>: <code class="language-plaintext highlighter-rouge">output_tar</code> (output of <strong>IDR Download</strong> <i class="fas fa-wrench" aria-hidden="true"></i><span class="visually-hidden">tool</span>)</li>
      </ul>
    </li>
    <li><em>“Detailed logging file?”</em>: <code class="language-plaintext highlighter-rouge">Yes</code></li>
  </ul>

  <blockquote class="comment">
    <div class="box-title comment-title" id="comment-6"><i class="far fa-comment-dots" aria-hidden="true" ></i> Comment</div>

    <p>This is the only time-consuming step of the workflow, as it needs to perform the whole analysis in the input dataset.</p>
  </blockquote>

</blockquote>

<h1 id="conclusion">Conclusion</h1>

<p>In this tutorial, you have downloaded images from a public image repository into your Galaxy history. After that, you have built and run a typical image analysis pipeline, composed of segmentation of several objects and feature extraction. As an outcome, you got plenty of features to analyse! And some masks to check that the segmentation algorithms worked as expected. Now you are ready to perform your biological data analysis!</p>

                </section>

                <section aria-label="Tutorial Footer, Feedback, Citation" id="tutorial-footer">
                
                <blockquote class="key_points">
                    <div class="box-title"><i class="fas fa-key" aria-hidden="true"></i> Key points</div>
                    <ul>
                        
                        <li><p>Galaxy workflows can download images from the IDR, selecting specific channels, time points, z-stack positions and crop the image in different ways.</p>
</li>
                        
                        <li><p>CellProfiler in Galaxy can segment and extract features of any object of interest.</p>
</li>
                        
                        <li><p>The features and masks can be exported for further analysis.</p>
</li>
                        
                    </ul>
                </blockquote>
                

                <h1>Frequently Asked Questions</h1>
                Have questions about this tutorial? Check out the <a href="faqs/">tutorial FAQ page</a> or the  <a href="/training-material/topics/imaging/faqs/">FAQ page for the Imaging topic</a> to see if your question is listed there.
                If not, please ask your question on the <a href="https://gitter.im/Galaxy-Training-Network/Lobby">GTN Gitter Channel</a> or the
                <a href="https://help.galaxyproject.org">Galaxy Help Forum</a>

                

                
                <h1 data-toc-skip>Useful literature</h1>
                <p>Further information, including links to documentation and original publications, regarding the tools, analysis techniques and the interpretation of results described in this tutorial can be found <a href="/training-material/topics/imaging#references">here</a>.</p>
                


                
                <h1 id="bibliography">References</h1>
                <ol class="bibliography"><li id="Heriche_2014"><b>Integration of biological data by kernels on graph nodes allows prediction of new genes involved in mitotic chromosome condensation</b>, 2014 Mol Biol Cell. 2014;25(16):2522-2536: <a href="https://doi.org/10.1091/mbc.E13-04-0221">10.1091/mbc.E13-04-0221</a></li>
<li id="McQuin_2018"><b>CellProfiler 3.0: Next-generation image processing for biology</b>, 2018 PLoS Biol. 16(7):e2005970: <a href="https://doi.org/10.1371/journal.pbio.2005970">10.1371/journal.pbio.2005970</a> <a href="https://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.2005970">https://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.2005970</a></li></ol>
                

                

                <h1>Feedback</h1>
                <p class="text-muted">Did you use this material as an instructor? Feel free to give us feedback on <a href="https://github.com/galaxyproject/training-material/issues/1452">how it went</a>.
                <br>Did you use this material as a learner or student? Click the form below to leave feedback.<i class="fas fa-hand-point-down"></i>
                </p>

                <a href="https://docs.google.com/forms/d/e/1FAIpQLSd4VZptFTQ03kHkMz0JyW9b6_S8geU5KjNE_tLM0dixT3ZQmA/viewform?embedded=true&entry.1235803833=Nucleoli segmentation and feature extraction using CellProfiler (Imaging)" alt="Feedback form link">
                    <img src="/training-material/shared/images/feedback.png" alt="Preview of the google form" />
                </a>

                <h1>Citing this Tutorial</h1>
                <p>
                    <ol>
                        <li id="citation-text">
                            Beatriz Serrano-Solano, Jean-Karim Hériché,  <b>Nucleoli segmentation and feature extraction using CellProfiler (Galaxy Training Materials)</b>. <a href="https://training.galaxyproject.org/training-material/topics/imaging/tutorials/tutorial-CP/tutorial.html">https://training.galaxyproject.org/training-material/topics/imaging/tutorials/tutorial-CP/tutorial.html</a> Online; accessed TODAY
                        </li>
                        <li>
                        Hiltemann, Saskia, Rasche, Helena et al., 2023 <b>Galaxy Training: A Powerful Framework for Teaching!</b> PLOS Computational Biology <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1010752">10.1371/journal.pcbi.1010752</a>
                        </li>
                        <li>
                        Batut et al., 2018 <b>Community-Driven Data Analysis Training for Biology</b> Cell Systems <a href="https://doi.org/10.1016%2Fj.cels.2018.05.012">10.1016/j.cels.2018.05.012</a>
                        </li>
                    </ol>
                </p>

                <!-- collapsible boxcontaining the BibTeX-formatted citation -->
                <blockquote class="details">

                  <div id="citation-bibtex" class="box-title">
                    <button type="button" aria-controls="citation-bibtex" aria-expanded="false">
                      <i class="fas fa-info-circle" aria-hidden="true"></i>
                      <span class="visually-hidden"></span> BibTeX<span role="button" class="fold-unfold fa fa-minus-square" aria-hidden="true"></span>
                    </button>
                   </div>
                   <p style="display: none;">

                   <div class="highlighter-rouge"><div class="highlight"><pre class="highlight">


<code id="citation-code">@misc{imaging-tutorial-CP,
author = "Beatriz Serrano-Solano and Jean-Karim Hériché",
	title = "Nucleoli segmentation and feature extraction using CellProfiler (Galaxy Training Materials)",
	year = "",
	month = "",
	day = ""
	url = "\url{https://training.galaxyproject.org/training-material/topics/imaging/tutorials/tutorial-CP/tutorial.html}",
	note = "[Online; accessed TODAY]"
}
@article{Hiltemann_2023,
	doi = {10.1371/journal.pcbi.1010752},
	url = {https://doi.org/10.1371%2Fjournal.pcbi.1010752},
	year = 2023,
	month = {jan},
	publisher = {Public Library of Science ({PLoS})},
	volume = {19},
	number = {1},
	pages = {e1010752},
	author = {Saskia Hiltemann and Helena Rasche and Simon Gladman and Hans-Rudolf Hotz and Delphine Larivi{\`{e}}re and Daniel Blankenberg and Pratik D. Jagtap and Thomas Wollmann and Anthony Bretaudeau and Nadia Gou{\'{e}} and Timothy J. Griffin and Coline Royaux and Yvan Le Bras and Subina Mehta and Anna Syme and Frederik Coppens and Bert Droesbeke and Nicola Soranzo and Wendi Bacon and Fotis Psomopoulos and Crist{\'{o}}bal Gallardo-Alba and John Davis and Melanie Christine Föll and Matthias Fahrner and Maria A. Doyle and Beatriz Serrano-Solano and Anne Claire Fouilloux and Peter van Heusden and Wolfgang Maier and Dave Clements and Florian Heyl and Björn Grüning and B{\'{e}}r{\'{e}}nice Batut and},
	editor = {Francis Ouellette},
	title = {Galaxy Training: A powerful framework for teaching!},
	journal = {PLoS Comput Biol} Computational Biology}
}
</code>
                   </pre></div></div>
                   </p>
                </blockquote>

                


<script>
// update the date on load, or leave fallback of 'today'
const citationTodaysDate = new Date();
document.getElementById("citation-code").innerHTML = document.getElementById("citation-code").innerHTML.replace("TODAY", citationTodaysDate.toDateString());
document.getElementById("citation-text").innerHTML = document.getElementById("citation-text").innerHTML.replace("TODAY", citationTodaysDate.toDateString());
</script>

                <i class="far fa-thumbs-up" aria-hidden="true"></i> Congratulations on successfully completing this tutorial!

                

                

		
                <blockquote class="agenda follow-up" id="admins-install-missing-tools">
                    <div class="box-title">Galaxy Administrators: Install the missing tools</div>
			<p>You can use Ephemeris's <code>shed-tools install</code> command to install the tools used in this tutorial.</p>
<div class="highlight"><pre class="highlight"><code>shed-tools install [-g GALAXY] [-a API_KEY] -t &lt;(curl https://training.galaxyproject.org/training-material/api/topics/imaging/tutorials/tutorial-CP/tutorial.json | jq .admin_install_yaml -r)</code></pre></div>
<p>Alternatively you can copy and paste the following YAML</p>
<div class="highlight"><pre class="highlight"><code>---
install_tool_dependencies: true
install_repository_dependencies: true
install_resolver_dependencies: true
tools:
- name: cp_cellprofiler
  owner: bgruening
  revisions: e917a2424690
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_common
  owner: bgruening
  revisions: e7273daa5ae2
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_convert_objects_to_image
  owner: bgruening
  revisions: df3ad3ba5c6f
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_display_data_on_image
  owner: bgruening
  revisions: 2484086dee41
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_enhance_or_suppress_features
  owner: bgruening
  revisions: f2ed92b011a9
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_export_to_spreadsheet
  owner: bgruening
  revisions: f8fa0f6718a3
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_gray_to_color
  owner: bgruening
  revisions: 31d195bedf6d
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_identify_primary_objects
  owner: bgruening
  revisions: 993faa34333b
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_image_math
  owner: bgruening
  revisions: c09dcda1143f
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_mask_image
  owner: bgruening
  revisions: 3a05117669cf
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_measure_granularity
  owner: bgruening
  revisions: a1a961c46d4b
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_measure_image_area_occupied
  owner: bgruening
  revisions: 20dbb1f7ec7b
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_measure_image_intensity
  owner: bgruening
  revisions: 5499dc6f8ac1
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_measure_image_quality
  owner: bgruening
  revisions: e972e07c7845
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_measure_object_intensity
  owner: bgruening
  revisions: 980aed9e8fd5
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_measure_object_size_shape
  owner: bgruening
  revisions: 79e10d12d90a
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_measure_texture
  owner: bgruening
  revisions: 035a58c7f54a
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_relate_objects
  owner: bgruening
  revisions: 8083a87d2fdf
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: cp_save_images
  owner: bgruening
  revisions: 4ecf93628f97
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
- name: idr_download_by_ids
  owner: iuc
  revisions: e08b1dc0480c
  tool_panel_section_label: Imaging
  tool_shed_url: https://toolshed.g2.bx.psu.edu/
</code></pre></div>
                </blockquote>
		


                </section>

            </div>
        </div>
    </div>
</article>
<br/>
<br/>
<br/>

        </div>
        <footer>
	<hr />
	<div class="container">
		<div class="row">
			<div class="col-sm-6" style="text-align: left">
				<p>
					The <a href="https://galaxyproject.org/teach/gtn/">Galaxy Training Network</a>
					provides researchers with online training materials, connects them with local trainers, and helps promoting FAIR and Open Science practices worldwide. All contributions are subject to the <a rel="code-of-conduct" href="https://galaxyproject.org/community/coc/">Galaxy Project Code of Conduct</a>.
				</p>
				<p>
				The GTN infrastructure is licensed under <a rel="license" href="https://github.com/galaxyproject/training-material/blob/main/LICENSE.md">MIT</a>
				</p>
				<p>
				Revision <a href="https://github.com/galaxyproject/training-material/commit/ee51c939937f9893c63a0f9494eaef0bfbfa1c6d">ee51c93</a>, built with Jekyll (4.3.2 | production)
				</p>
			</div>
			<div class="col-sm-6" style="text-align: right">
				
				<p>
					Resource <i class="fas fa-fingerprint" aria-hidden="true"></i><span class="visually-hidden">purl</span><abbr title="Persistent URL">PURL</abbr>: <a href="https://gxy.io/GTN:T00183">https://gxy.io/GTN:T00183</a>
				</p>
				
				<p>
					<i>This Material</i>:
					
					is licensed under
					<a rel="license" href="https://spdx.org/licenses/CC-BY-4.0">
						Creative Commons Attribution 4.0 International License
					</a>
				</p>
				<p>
					<a href="https://github.com/galaxyproject/training-material/edit/main/topics/imaging/tutorials/tutorial-CP/tutorial.md" title="Edit on GitHub">
					<i class="fab fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit on GitHub
					</a>
				</p>
			</div>
		</div>
	</div>
</footer>


    </div>
</footer>


        <script src='/training-material/assets/js/bundle.main.js?v=1701044858'></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </body>
</html>