<!DOCTYPE html>
<html>











  <head>
    <meta charset="utf-8">
    <title>Tool Shed: sharing Galaxy tools</title>
    
        <script async defer data-domain="training.galaxyproject.org" src="https://plausible.galaxyproject.eu/js/plausible.js"></script>

    
    <link rel="stylesheet" href="/training-material/assets/css/slides.css">
    <script src="https://kit.fontawesome.com/67b3f98409.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon" />

    
    
    
    
    <meta name="description" content="Galaxy is an open-source project. Everyone can contribute..." />
    <meta property="og:title" content="Galaxy Training: Tool Shed: sharing Galaxy tools" />
    <meta property="og:description" content="Galaxy is an open-source project. Everyone can contribute..." />
    <meta property="og:image" content="/training-material/assets/images/GTNLogo1000.png" />
    <script type="application/ld+json">
      


{
  "@context": "http://schema.org",
  "@type": "Course",
  "accessMode": [
    "textual",
    "visual"
  ],
  "accessModeSufficient": [
    "textual",
    "visual"
  ],
  "accessibilityControl": [
    "fullKeyboardControl",
    "fullMouseControl"
  ],
  "accessibilityFeature": [
    "alternativeText",
    "tableOfContents"
  ],
  "accessibilitySummary": "Short descriptions are present but long descriptions will be needed for non-visual users",
  "audience": {
    "@type": "EducationalAudience",
    "educationalRole": "students"
  },
  "citation": {
    "@type": "CreativeWork",
    "name": "Community-Driven Data Analysis Training for Biology",
    "url": "https://doi.org/10.1016/j.cels.2018.05.012"
  },
  "copyrightHolder": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "dateModified": "1970-01-01 00:33:41 +0000",
  "discussionUrl": "https://gitter.im/Galaxy-Training-Network/Lobby",
  "headline": "Tool Shed: sharing Galaxy tools",
  "interactivityType": "mixed",
  "isAccessibleForFree": true,
  "isFamilyFriendly": true,
  "license": "https://spdx.org/licenses/CC-BY-4.0.html",
  "producer": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "provider": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "sourceOrganization": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "isPartOf": {
    "@type": "CreativeWork",
    "name": "Development in Galaxy",
    "description": "Galaxy is an open-source project. Everyone can contribute to its development with core Galaxy development, integration of softwares in Galaxy environment, ...",
    "url": "https://training.galaxyproject.org//training-material/topics/dev/"
  },
  "courseCode": "dev / toolshed / slides",
  "learningResourceType": "slides",
  "name": "Slides for 'Tool Shed: sharing Galaxy tools' tutorial",
  "url": "https://training.galaxyproject.org//training-material/topics/dev/tutorials/toolshed/slides.html",
  "timeRequired": "PT3H",
  "description": "The questions this  addresses are:\n - What is a Tool Shed?\n - How to install tools and workflows from a Tool Shed into a Galaxy instance?\n - What are the Tool Shed repository types?\n - How to publish with Planemo?\n\n\\nThe objectives are:\n - Discover what is a Tool Shed\n - Be able to install tools and workflows from a Tool Shed into a Galaxy instance\n - Be able to publish tools with Planemo\n\n",
  "inLanguage": {
    "@type": "Language",
    "name": "English",
    "alternateName": "en"
  },
  "hasPart": [

  ],
  "author": [
    {
      "@type": "Person",
      "name": "Anthony Bretaudeau"
    },
    {
      "@type": "Person",
      "name": "Loraine Guéguen"
    },
    {
      "@type": "Person",
      "name": "Stéphanie Legras"
    },
    {
      "@type": "Person",
      "name": "Bérénice Batut"
    }
  ],
  "contributor": [
    {
      "@type": "Person",
      "name": "Anthony Bretaudeau"
    },
    {
      "@type": "Person",
      "name": "Loraine Guéguen"
    },
    {
      "@type": "Person",
      "name": "Stéphanie Legras"
    },
    {
      "@type": "Person",
      "name": "Bérénice Batut"
    }
  ],
  "about": [
    {
      "@type": "CreativeWork",
      "name": "Development in Galaxy",
      "description": "Galaxy is an open-source project. Everyone can contribute to its development with core Galaxy development, integration of softwares in Galaxy environment, ...",
      "url": "https://training.galaxyproject.org//training-material/topics/dev/"
    }
  ]
}
    </script>
    <script type="text/javascript" src="/training-material/assets/js/jquery.slim.min.js"></script>
  </head>
  <body>
    <textarea id="source">
name: inverse
layout: true
class: center, middle, inverse

<div class="my-header"><span>
<a href="/training-material/topics/dev" title="Return to topic page" ><i class="fa fa-level-up" aria-hidden="true"></i></a>

<a class="nav-link" href="https://github.com/galaxyproject/training-material/edit/main/topics/dev/tutorials/toolshed/slides.html"><i class="fa fa-pencil" aria-hidden="true"></i></a>

</span></div>

<div class="my-footer"><span>

<img src="/training-material/assets/images/GTN-60px.png" alt="Galaxy Training Network" style="height: 40px;"/>

</span></div>

---



<img src="/training-material/assets/images/GTN.png" alt="Galaxy Training Network" class="cover-logo"/>


# Tool Shed: sharing Galaxy tools


<div class="contributors-line">

<a href="/training-material/hall-of-fame/abretaud/" class="contributor-badge contributor-abretaud"><img src="https://avatars.githubusercontent.com/abretaud?s=27" alt="Avatar">Anthony Bretaudeau</a>


<a href="/training-material/hall-of-fame/loraine-gueguen/" class="contributor-badge contributor-loraine-gueguen"><img src="https://avatars.githubusercontent.com/loraine-gueguen?s=27" alt="Avatar">Loraine Guéguen</a>


<a href="/training-material/hall-of-fame/slegras/" class="contributor-badge contributor-slegras"><img src="https://avatars.githubusercontent.com/slegras?s=27" alt="Avatar">Stéphanie Legras</a>


<a href="/training-material/hall-of-fame/bebatut/" class="contributor-badge contributor-bebatut"><img src="https://avatars.githubusercontent.com/bebatut?s=27" alt="Avatar">Bérénice Batut</a>


<a href="https://training.galaxyproject.org/training-material/topics/contributing/" class="contributor-badge contributor-newcontributors"><i class="fas fa-users" aria-hidden="true"></i><span class="visually-hidden">hall-of-fame</span>Add Contributions!</a>


</div>


<div class="footnote" style="bottom: 4 em;"><i class="far fa-calendar" aria-hidden="true"></i><span class="visually-hidden">last_modification</span> Updated: Jul 9, 2021</div>

<div class="footnote" style="bottom: 2.5em;"><i class="fas fa-file-alt" aria-hidden="true"></i><span class="visually-hidden">text-document</span><a href="slides-plain.html"> Plain-text slides</a></div>
<div class="footnote" style="bottom: 1em;"><strong>Tip: </strong>press <kbd>P</kbd> to view the presenter notes</div>

???
Presenter notes contain extra information which might be useful if you intend to use these slides for teaching.

Press `P` again to switch presenter notes off

Press `C` to create a new window where the same presentation will be displayed.
This window is linked to the main window. Changing slides on one will cause the
slide to change on the other.

Useful when presenting.



---







### &lt;i class=&quot;far fa-question-circle&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;question&lt;/span&gt; Questions


- What is a Tool Shed?

- How to install tools and workflows from a Tool Shed into a Galaxy instance?

- What are the Tool Shed repository types?

- How to publish with Planemo?


---



### &lt;i class=&quot;fas fa-bullseye&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;objectives&lt;/span&gt; Objectives


- Discover what is a Tool Shed

- Be able to install tools and workflows from a Tool Shed into a Galaxy instance

- Be able to publish tools with Planemo


---


## 1. What is a Tool Shed?

![toolshed logo with a shed over the words galaxy tool shed](../../images/toolShed.jpg)

---

### ![same logo](../../images/toolShed.jpg) = Galaxy App Store

---

### ![same logo again](../../images/toolShed.jpg) = Galaxy App Store

- Galaxy tools
- ~~Recipes for installing and compiling tools~~,
- Data Managers,
- Custom datatypes,
- Exported workflows.

---

### ![same logo again](../../images/toolShed.jpg) = Galaxy App Store

- For Galaxy administrators, facilitates:
  - **installing/updating** tools

- For tool developers, facilitates:
  - **sharing** of Galaxy utilities
  - **versioning**

---

### Available Tool Sheds

- [Galaxy community Tool Shed](https://toolshed.g2.bx.psu.edu/) -&gt; Main Tool Shed
- [Galaxy community test Tool Shed](https://testtoolshed.g2.bx.psu.edu/) -&gt; Sandbox for testing
- [List of public Tool Sheds](https://galaxyproject.org/toolshed/public-toolsheds/)

---

### Tool Shed interface

![toolshed interface with categories, description, and number of repositories called out with arrows](../../images/main_toolShed_ss.png)

---

### Example of tool

![view of a repository in the toolshed showing a lot of metadata](../../images/exampletool_ss.png)

---

## 2. Installing tools from a Tool Shed

---

### Connect your Galaxy to a Tool Shed

- Only for third party toolsheds (Main and Test by default)
- Add `&lt;tool_shed /&gt;` block in `config/tool_sheds_conf.xml`
- Restart Galaxy

---

### Install a tool from the Tool Shed

- Go to the admin interface and click on &quot;Search Tool Shed&quot;
![admin interface of galaxy with an arrow to search tool shed](../../images/admin_searchtoolshed_ss.png)
- Select a Tool Shed

![arrow to galaxy main toolshed button in older versions of galaxy](../../images/goToToolshed_ss.png)

---

### Install a tool from the Tool Shed

- Search your tool
![toolshed search interface with arrows to the search box and one of the results, trinity](../../images/searchTool_ss.png)

---

### Install a tool from the Tool Shed

- Types of repository&lt;/span&gt;
  - &lt;span style=&quot;color:orange&quot;&gt; Tools (`$name`)&lt;/span&gt;
  - &lt;span style=&quot;color:blue&quot;&gt; Tool suites (`suite_$name`)&lt;/span&gt;
  - &lt;span style=&quot;color:red&quot;&gt; Tool dependencies (`package_$name_$version`)&lt;/span&gt; (gradually removed, replaced by Conda dependencies)
![screenshot with multiple search results called out with boxes for the above types](../../images/typeOfRep_ss.png)

---

### Install a tool from the Tool Shed

![trinity button showing a dropdown with preview and install](../../images/goToToolInstall_ss.png)
- Install the tool
![toolshed page with a button install to galaxy](../../images/launchInstallTool_ss.png)

---

### Install a tool from the Tool Shed

- Install the tool
![another screenshot of a form with checkboxes for dependcy options](../../images/installTool_ss.png)
- &lt;span style=&quot;font-size:70%&quot;&gt; Selecting Tool Shed AND conda will make Galaxy to install both&lt;/span&gt;
- &lt;span style=&quot;font-size:70%&quot;&gt; Recommended: use conda &lt;/span&gt;

---

### Install a tool from the Tool Shed

- Check
![admin interface of galaxy with monitor installing repositories called out](../../images/monitor_installing_toolshed_rep.png)

---

### Manage installed tools

- Admin &gt; Manage installed tools
![admin interface with manage installed tools menu item called out](../../images/manage_installed_tools.png)
![various icons used to indicate tool state](../../images/repStatus_ss.png)

---

### Manage installed tools

- Click on the name of a tool
- Manage and browse the repository
![yet another toolshed interface screenshot with the repository actions menu shown](../../images/managed_an_installed_tool.png)

---

## Tips: How to install workflows

---

###  How to install a workflow?

- Admin &gt; Search Tool Shed
- Search the workflow
  1. ![the interface is identical to the tool install interface](../../images/toolshedWorkflow_ss.png)
  2. ![a graph with two nodes, input dataset and fastqc](../../images/schemaWorkflow_ss.png)
- &lt;span style=&quot;font-size:70%&quot;&gt; Tools can come with the workflow if they are not yet installed &lt;/span&gt;

---

### How to install a workflow?

![galaxy workflow list showing no workflows](../../images/workflowNotInstalled_ss.png)
- No workflow?

---

###  How to install a workflow?

![the installed WF is found in the manage installed tools menu](../../images/workflowInstalled_ss.png)
- Click on the imported workflow

---

###  How to install a workflow?

![contents of the repository section lists fastqc, a link to click on](../../images/makeAvailableWorkflow_ss.png)
- Click on the workflow at the bottom of the “Contents of this repository” section

---

###  How to install a workflow?

- Repository Actions &gt; Import workflow to Galaxy

![clicking on that brings you to a view of the workflow, and you can click import to galaxy on the top right](../../images/exportWorkflow_ss.png)

---

###  How to install a workflow?

![it appears in the workflow menu](../../images/workflowOK_ss.png)
- Done!

---

## 3. Tool Shed repository types

---

### 3.1 Tool with dependencies

---

###  Tool with dependencies

![tool folder with python script, xml, and test-data is put in an archive and uploaded to the TS.](../../images/toolshedPackage.png)

---

### 3.2 Tool suite

#### Group of related repositories

---

###  Tool suite

![multiple wrappers in a single tool archive](../../images/toolSuite.png)

- Works but no way to install a single tool

---

###  Tool suite

![phylogeny pipeline containing 4 tools](../../images/toolsuite2.png)

- One repository per individual tool
- A special 'Tool suite' repository listing the individual repositories

---

###  Tool suite

- relationship between a dependent repository and one or more required repository (tools, datatypes, workflows,...)
- -&gt; One XML file
```xml
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;repositories description=&quot;Pipeline phylogeny&quot;&gt;
   &lt;repository toolshed=&quot;https://testtoolshed.g2.bx.psu.edu&quot;
     name=&quot;fasta_to_phylip&quot; owner=&quot;gandres&quot; changeset_revision=&quot;a895633568&quot; /&gt;
   &lt;repository name=&quot;mafft&quot; owner=&quot;gandres&quot; /&gt;
   &lt;repository name=&quot;phyml&quot; owner=&quot;gandres&quot; /&gt;
[…]
&lt;/repositories&gt;
```
No need to write it yourself, Planemo does it for you

---

###  Tool suite

![phylogeny suite gets uploaded to the TS](../../images/toolsuite3.png)

---

### 3.3 Workflow

---


###  Workflow
![the four tools from the phylogeny pipeline are connected as a workflow](../../images/workflow.png)
- A succession of tools to perform a complete analysis

---

###  Workflow

- In galaxy

![same workflow with galaxy ui](../../images/galaxyWorkflowEx.png)

---

###  Workflow

![extract workflow menu from galaxy](../../images/shareWorkflow.png)

- You get a file: Galaxy-Workflow-NAME.ga

---

###  Workflow

- You have your file Galaxy-Workflow-NAME.ga
- How to automatically install the tools used in the workflow?
  - -&gt; `repository_dependencies.xml`
```xml
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;repositories description=&quot;Phylogeny workflow&quot;&gt;
   &lt;repository name=&quot;suite_phylogeny&quot; owner=&quot;galaxy&quot; /&gt;
&lt;/repositories&gt;
```

---

###  Workflow

![phylogeny workflow is uploaded to the TS](../../images/workflowRepDep.png)

---

###  Workflow

![the workflow points at the tool suite which points at tools](../../images/workflowRepDep2.png)

- **Everything must be on the same toolshed**

---

## Tips

### What about tools working with *.loc files or new datatypes

---

### Tools with `*.loc` files or new datatypes

- add them to the Tool Shed repository.
- `*.loc` files and `datatypes` files should be provided as `*.sample` file in a `tool-data` directory.
- `tool-data/*.loc.sample` files come along with `tool_data_table_conf.xml.sample`.

Their content or the file themselves are put to the right location on tool set up.

---

### Tools with *.loc files or new datatypes

![toolshed interface showing some files](../../images/repWithLoc_ss.png)

&lt;span style=&quot;font-size:60%&quot;&gt;`tool_data_table_conf.xml.sample`&lt;/span&gt;
```xml
&lt;tables&gt;
	&lt;!-- Locations of indexes in the Bowtie2 mapper format --&gt;
	&lt;table name=&quot;bowtie2_indexes&quot; comment_char=&quot;#&quot;&gt;
		&lt;columns&gt;value, dbkey, name, path&lt;/columns&gt;
		&lt;file path=&quot;tool-data/bowtie2_indices.loc&quot; /&gt;
	&lt;/table&gt;
&lt;/tables&gt;
```
&lt;span style=&quot;font-size:60%&quot;&gt;On install, the content of the file and the right
path to the *.loc file is added to `shed_tool_data_table_conf.xml`&lt;/span&gt;

---

## 4. Publishing with Planemo

---

&lt;i class=&quot;fas fa-exclamation-triangle&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;warning&lt;/span&gt; *There are automated ways to publish to a ToolShed using GitHub and Continuous Integration*

[Check out these slides, &quot;Publishing tools&quot; section](/training-material/topics/dev/tutorials/tool-integration/slides.html)

---

### Configure the target Tool Shed

```bash
planemo config_init
```
- Creates `.planemo.yml` file in your home directory:

```yml
## Planemo Global Configuration File.
## Everything in this file is completely optional - these values can all be
## configured via command line options for the corresponding commands.
## [...]
sheds:
     toolshed:
           #key: &quot;&lt;TODO&gt;&quot;
           #email: &quot;&lt;TODO&gt;&quot;
           #password: &quot;&lt;TODO&gt;&quot;
     testtoolshed:
           #key: &quot;&lt;TODO&gt;&quot;
           #email: &quot;&lt;TODO&gt;&quot;
           #password: &quot;&lt;TODO&gt;&quot;
     local:
           #key: &quot;&lt;TODO&gt;&quot;
           #email: &quot;&lt;TODO&gt;&quot;
           #password: &quot;&lt;TODO&gt;&quot;
```

---

### Configure the target Tool Shed

- Add your Tool Shed API key in `.planemo.yml`

```yml
## Planemo Global Configuration File.
## Everything in this file is completely optional - these values can all be
## configured via command line options for the corresponding commands.
## [...]
sheds:
     toolshed:
           key: &quot;xxxxxxxxxmytoolshedAPIkeyxxxxxxx&quot;
           #email: &quot;&lt;TODO&gt;&quot;
           #password: &quot;&lt;TODO&gt;&quot;
     testtoolshed:
           #key: &quot;&lt;TODO&gt;&quot;
           #email: &quot;&lt;TODO&gt;&quot;
           #password: &quot;&lt;TODO&gt;&quot;
     local:
           #key: &quot;&lt;TODO&gt;&quot;
           #email: &quot;&lt;TODO&gt;&quot;
           #password: &quot;&lt;TODO&gt;&quot;
```

---

### Configure repository

```bash
planemo shed_init --name=&quot;tandem_repeats_finder_2&quot;
                     --owner=&quot;gandres&quot;
                     --description=&quot;Tandem Repeats Finder description&quot;
                     --long_description=&quot;A long long description.&quot;
                     --category=&quot;Sequence Analysis&quot;
                     [--remote_repository_url=&lt;URL to .shed.yml on github&gt;]
                     [--homepage_url=&lt;Homepage for tool.&gt;]
```
- Creates `.shed.yml` file in the current repository (tool repository):

```yml
categories: [Sequence Analysis]
description: Tandem Repeats Finder description
long_description: A long long description.
name: tandem_repeats_finder_2
owner: gandres
```

---

### Configure repository

#### Naming conventions
&lt;small&gt;

| Repository Type | Recommended Name         | Examples                 |
| --------------- |--------------------------| -------------------------|
| Data Managers   | `data_manager_$name`     | `data_manager_bowtie2`   |
| Packages        | `package_$name_$version` | `package_aragorn_1_2_36` |
| Tool Suites     | `suite_$name`            | `suite_samtools`         |
| Tools           | `$name`                  | `stringle`, `bowtie2`    |

&lt;/small&gt;
&lt;span style=&quot;color:red&quot;&gt;Planemo will determine the repository type based on these conventions&lt;/span&gt;

---

### Configure repository

- Tools and tool suite `.shed.yml`: implicitly define repositories for each individual tool in the directory and build a suite for those tools.

- Example: `trinity/.shed.yml`

```yml
[...]
auto_tool_repositories:
    name_template: &quot;&quot;
    description_template: &quot; (from the Trinity tool suite)&quot;
suite:
    name: &quot;suite_trinity&quot;
    description: Trinity tools to assemble transcript sequences from Illumina RNA-Seq data.
```

---

### Check

```bash
planemo shed_lint --tools
```
```bash
Linting repository […]/tandem_repeats_finder
Applying linter expansion... CHECK
.. INFO: Included files all found.
Applying linter tool_dependencies_xsd... CHECK
.. INFO: tool_dependencies.xml found and appears to be valid XML
Applying linter tool_dependencies_actions... CHECK
.. INFO: Parsed tool dependencies.
Applying linter repository_dependencies... CHECK
.. INFO: No repository_dependencies.xml, skipping.
Applying linter shed_yaml... CHECK
.. INFO: .shed.yml found and appears to be valid YAML.
Applying linter readme... CHECK
.. INFO: No README found skipping.
+Linting tool […]/tandem_repeats_finder/tandem_repeats_finder_wrapper.xml
[…]
```

---

### Create repository

```bash
planemo shed_create --shed_target testtoolshed
```
- Don't forget **--shed_target**. Default is main toolshed

---

### Create repository

```bash
planemo shed_create --shed_target testtoolshed
```
```bash
Repository created
cd '[…]/tandem_repeats_finder' &amp;&amp; git rev-parse HEAD
Repository tandem_repeats_finder_2 updated successfully.
```
![an image of a toolshed metadata from the planemo uploaded data](../../images/shedCreate.png)

---

### Update repository

```bash
planemo shed_diff --shed_target testtoolshed

```
```bash
wget -q --recursive -O - 'https://testtoolshed.g2.bx.psu.edu/repository/download?repository_id=6306166e4da9a8bf&amp;changeset_revision=default&amp;file_type=gz' | tar -xzf - -C /tmp/tool_shed_diff_DMcOrR/_testtoolshed_ --strip-components 1
mkdir &quot;/tmp/tool_shed_diff_DMcOrR/_local_&quot;; tar -xzf &quot;/tmp/tmp5ousfg&quot; -C &quot;/tmp/tool_shed_diff_DMcOrR/_local_&quot;; rm -rf /tmp/tmp5ousfg
cd &quot;/tmp/tool_shed_diff_DMcOrR&quot;; diff -r _local_ _testtoolshed_
diff -r _local_/tandem_repeats_finder.xml _testtoolshed_/tandem_repeats_finder.xml
41d40
&lt;     &lt;param name=&quot;fileout_label2&quot; type=&quot;text&quot; value=&quot;Unused&quot; label=&quot;none&quot; help=&quot;Output name for files&quot; /&gt;
```
- The repository needs to be updated

---

### Update repository

```bash
planemo shed_update --check_diff --shed_target testtoolshed

```
```bash
wget -q --recursive -O - 'https://testtoolshed.g2.bx.psu.edu/repository/download?repository_id=6306166e4da9a8bf&amp;changeset_revision=default&amp;file_type=gz' | tar -xzf - -C /tmp/tool_shed_diff_DMcOrR/_testtoolshed_ --strip-components 1
mkdir &quot;/tmp/tool_shed_diff_DMcOrR/_local_&quot;; tar -xzf &quot;/tmp/tmp5ousfg&quot; -C &quot;/tmp/tool_shed_diff_DMcOrR/_local_&quot;; rm -rf /tmp/tmp5ousfg
cd &quot;/tmp/tool_shed_diff_DMcOrR&quot;; diff -r _local_ _testtoolshed_
diff -r _local_/tandem_repeats_finder.xml _testtoolshed_/tandem_repeats_finder.xml
41d40
&lt;     &lt;param name=&quot;fileout_label2&quot; type=&quot;text&quot; value=&quot;Unused&quot; label=&quot;none&quot; help=&quot;Output name for files&quot; /&gt;
Repository tandem_repeats_finder updated successfully.
Repository metadata updated.
```
- The repository has been updated

---

### Update repository
```bash
planemo shed_update --check_diff --shed_target testtoolshed

```
![tool shed info with revision circled](../../images/checkToolUpdate.png)

- The repository has been updated

---

![planemo logo](../../images/planemo-logo.png)
#### Publishing to the Tool Shed

![planemo shed_init creates a repo, shed_lint checks, and shed_create/shed_update uploads to the TS](../../images/planemo_toolshed_publishing.png)

---

![planemo logo again](../../images/planemo-logo.png)

&gt; Command-line utilities to assist in building and publishing Galaxy tools.

---

![and again](../../images/planemo-logo.png)

![larger graph with local development, toolshed, conda, and galaxy and various lines between them.](../../images/big_picture.png)

---

![planemo logo again](../../images/planemo-logo.png)

#### Checklist (3/3)

- Initiate the `.shed.yml` file with
```bash
planemo shed_init
```
- Create the repository on ToolShed with
```bash
planemo shed_create
```
- Install and test the wrapper on a Galaxy instance
- Improve the wrapper and push modification on toolshed
```bash
planemo shed_update
```

---

## References

- [ToolShed](https://galaxyproject.org/toolshed/tour/)
- [Install tools from the ToolShed](https://galaxyproject.org/admin/tools/add-tool-from-toolshed-tutorial/)
- [Publish tools with Planemo](https://planemo.readthedocs.io/en/latest/)

---

### &lt;i class=&quot;fas fa-pencil-alt&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;hands_on&lt;/span&gt; Hands-on

![picture indicating exercise](../../images/exercise.png)

---

###  Hands-on

#### The goal
Publish your tool (seqtk_seq) in your local toolshed with Planemo

---

### &lt;i class=&quot;fas fa-pencil-alt&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;hands_on&lt;/span&gt; Hands-on

#### Step 1: Start and configure your toolshed
- Start your toolshed (in galaxy home directory):
```bash
./run_tool_shed.sh
```
- Toolshed available at `http://localhost:9009`
&lt;aside class=&quot;notes&quot;&gt;
login: galaxy/azerty
&lt;/aside&gt;

---

### &lt;i class=&quot;fas fa-pencil-alt&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;hands_on&lt;/span&gt; Hands-on

#### Step 2: Use planemo to publish your tool

---

### &lt;i class=&quot;fas fa-pencil-alt&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;hands_on&lt;/span&gt; Hands-on

#### Step 2: Use planemo to publish your tool

```bash
planemo config_init
```
  - Creates file `.planemo.yml` in your home directory.

```yml
[...]  local:
#key: &quot;&lt;TODO&gt;&quot;
email: &quot;galaxy@localhost.fr&quot;
password: &quot;azerty&quot;
```
```bash
planemo shed_init --name=seqtk_seq --owner=galaxy --description=&quot;common transformation of FASTA/Q&quot; --category=&quot;Fasta Manipulation&quot;
```
```bash
planemo shed_lint .
```
```bash
planemo shed_create --shed_target local
```

---

### &lt;i class=&quot;fas fa-pencil-alt&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;hands_on&lt;/span&gt; Hands-on

#### Step 3: Update your tool and then use planemo to update your tool on the Tool Shed

---

### &lt;i class=&quot;fas fa-pencil-alt&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;hands_on&lt;/span&gt; Hands-on

#### Step 3: Update your tool and then use planemo to update your tool on the Tool Shed

```bash
planemo shed_diff --shed_target local
```
```bash
planemo shed_update --check_diff --shed_target local
```




---
### &lt;i class=&quot;fas fa-key&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;keypoints&lt;/span&gt; Key points


- Use Planemo

- Contribute to the Main Tool Shed







---

## Thank You!

This material is the result of a collaborative work. Thanks to the [Galaxy Training Network](https://training.galaxyproject.org) and all the contributors!


<div class="contributors-line">

<a href="/training-material/hall-of-fame/abretaud/" class="contributor-badge contributor-abretaud"><img src="https://avatars.githubusercontent.com/abretaud?s=27" alt="Avatar">Anthony Bretaudeau</a>


<a href="/training-material/hall-of-fame/loraine-gueguen/" class="contributor-badge contributor-loraine-gueguen"><img src="https://avatars.githubusercontent.com/loraine-gueguen?s=27" alt="Avatar">Loraine Guéguen</a>


<a href="/training-material/hall-of-fame/slegras/" class="contributor-badge contributor-slegras"><img src="https://avatars.githubusercontent.com/slegras?s=27" alt="Avatar">Stéphanie Legras</a>


<a href="/training-material/hall-of-fame/bebatut/" class="contributor-badge contributor-bebatut"><img src="https://avatars.githubusercontent.com/bebatut?s=27" alt="Avatar">Bérénice Batut</a>


</div>



<img src="/training-material/assets/images/GTN.png" alt="Galaxy Training Network" style="height: 100px;"/>


<a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
This material is licensed under the Creative Commons Attribution 4.0 International License</a>.


    </textarea>
	<script src="/training-material/assets/js/remark-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="/training-material/assets/js/theme.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/clipboard.min.js"></script>
    <script type="text/javascript">
      var slideshow = remark.create({navigation: {scroll: false}, ratio: '16:9'});
      var hljs = remark.highlighter.engine;
      var snippets = document.querySelectorAll('code.remark-code');
        [].forEach.call(snippets,function(snippet){
          snippet.firstChild.insertAdjacentHTML('beforebegin','<button class="btn btn-light" data-clipboard-snippet><i class="fa fa-copy"></i>&nbsp;Copy</button>');
        });
      var clipboardSnippets=new ClipboardJS('[data-clipboard-snippet]',{
        target:function(trigger){return trigger.parentElement;
      }});
    </script>

    <script type="text/javascript">
        if(window.location.hostname === "galaxyproject.github.io") {
            // Redirect
            var redirect = "https://training.galaxyproject.org" + window.location.pathname + window.location.search;
            $('body').prepend("<div style='text-align: center'><strong>Note: </strong>This content has a new home at <a href=\"" + redirect + "\">" + redirect + "</a>, which you will be redirected to in 5 seconds.</div>");

            window.setTimeout(function(){
                window.location.href = redirect;
            }, 5000)

        }
    </script>

  </body>
</html>
